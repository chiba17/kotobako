<html lang="ja"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImE3ZTI3MWMzMmJkMTBkY2EwNTExOThmNjkwNjc3MGEzN2Q0MmRhM2IiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwNzE1ODkwNzg2MDAyMzE4NTExOCIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2ZiNWZjMjU5YTkwZjg4ZWVfaW5kZXguaHRtbC0zNCJ9LCJleHAiOjE3Njg1NjU3MDUsImlhdCI6MTc2ODU2MjEwNSwiYWxnIjoiUlMyNTYifQ.RI_vPplpEyjfo9qXGDdsT6M6FMJPdz26zzmZ5RmOsfpxBUc5EjJ0Ih4xWwwI1N-mwE_Tvr3MGgHDvS3TWaC51N8sFMWXneOXyc9LKyERuJ63Ix5QKxz4ioa7m6m89aA2-xbmarkKmhiRP4t6aVP54aVLwOZHuW3ct3wLIj_m0EdSwvmSMmRBE_bDoFBATr1bSeNADLEXZYZQ4WCN30E-HHnRW7WMLy0m--EL1RLuDDBuRLk77RkK3cE_htlFeVz3yc1nZGDDGiVfi5Y9qy2kmBJaPE_bnEpd0G2n5WNHry-kVpjoH_LiO--hLTZrX9nFuaqgp1tpmcwtBAu0Zn1zaA","c_fb5fc259a90f88ee_index.html-34")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#fafaf9">
<title>Kotobako</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    darkMode: 'class',
    theme: {
      extend: {
        colors: {
          stone: {
            850: '#1f1c1a',
            950: '#0c0a09',
          }
        },
        fontFamily: {
          serif: ['"Noto Serif JP"', 'serif'],
        },
        animation: {
          'fade-in': 'fadeIn 0.3s ease-out',
          'float-up': 'floatUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
        },
        keyframes: {
          fadeIn: {
            'from': { opacity: '0' },
            'to': { opacity: '1' },
          },
          floatUp: {
            'from': { transform: 'translateY(100px)', opacity: '0' },
            'to': { transform: 'translateY(0)', opacity: '1' },
          }
        }
      }
    }
  }
</script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&amp;display=swap" rel="stylesheet">
<!-- Import Map: v9.22.0 -->
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "lucide-react": "https://esm.sh/lucide-react@0.263.1",
    "firebase/app": "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js",
    "firebase/auth": "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js",
    "firebase/firestore": "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"
  }
}
</script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin="anonymous"></script>
<style>
  body { font-family: 'Noto Serif JP', serif; -webkit-tap-highlight-color: transparent; }
  .pb-safe-area { padding-bottom: env(safe-area-inset-bottom); }
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  textarea::placeholder, input::placeholder { color: #d6d3d1; }
  .dark textarea::placeholder, .dark input::placeholder { color: #57534e; }
</style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.fixed{position:fixed}.relative{position:relative}.bottom-6{bottom:1.5rem}.left-0{left:0px}.right-0{right:0px}.top-0{top:0px}.z-40{z-index:40}.z-50{z-index:50}.mx-1{margin-left:0.25rem;margin-right:0.25rem}.mx-auto{margin-left:auto;margin-right:auto}.-mr-2{margin-right:-0.5rem}.-mt-0\.5{margin-top:-0.125rem}.mb-4{margin-bottom:1rem}.mt-2{margin-top:0.5rem}.-ml-2{margin-left:-0.5rem}.mt-4{margin-top:1rem}.flex{display:flex}.h-screen{height:100vh}.h-16{height:4rem}.h-\[100dvh\]{height:100dvh}.h-full{height:100%}.h-px{height:1px}.w-20{width:5rem}.w-12{width:3rem}.max-w-md{max-width:28rem}.max-w-xs{max-width:20rem}.flex-grow{flex-grow:1}@keyframes floatUp{from{transform:translateY(100px);opacity:0}to{transform:translateY(0);opacity:1}}.animate-float-up{animation:floatUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.animate-fade-in{animation:fadeIn 0.3s ease-out}.cursor-default{cursor:default}.select-none{-webkit-user-select:none;user-select:none}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-1\.5{gap:0.375rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.space-y-12 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(3rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(3rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded-full{border-radius:9999px}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-stone-200{--tw-border-opacity:1;border-color:rgb(231 229 228 / var(--tw-border-opacity, 1))}.border-stone-200\/50{border-color:rgb(231 229 228 / 0.5)}.border-stone-700{--tw-border-opacity:1;border-color:rgb(68 64 60 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.bg-stone-50{--tw-bg-opacity:1;background-color:rgb(250 250 249 / var(--tw-bg-opacity, 1))}.bg-stone-100\/80{background-color:rgb(245 245 244 / 0.8)}.bg-stone-50\/90{background-color:rgb(250 250 249 / 0.9)}.bg-stone-900{--tw-bg-opacity:1;background-color:rgb(28 25 23 / var(--tw-bg-opacity, 1))}.bg-stone-200{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity, 1))}.p-2{padding:0.5rem}.p-6{padding:1.5rem}.p-3{padding:0.75rem}.p-8{padding:2rem}.px-1{padding-left:0.25rem;padding-right:0.25rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.pb-32{padding-bottom:8rem}.pt-16{padding-top:4rem}.pt-4{padding-top:1rem}.pb-24{padding-bottom:6rem}.pb-8{padding-bottom:2rem}.pt-12{padding-top:3rem}.pt-5{padding-top:1.25rem}.text-center{text-align:center}.font-serif{font-family:"Noto Serif JP", serif}.font-sans{font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.text-\[10px\]{font-size:10px}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.font-bold{font-weight:700}.font-normal{font-weight:400}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-relaxed{line-height:1.625}.tracking-tight{letter-spacing:-0.025em}.tracking-wide{letter-spacing:0.025em}.tracking-widest{letter-spacing:0.1em}.tracking-\[0\.15em\]{letter-spacing:0.15em}.tracking-\[0\.1em\]{letter-spacing:0.1em}.tracking-\[0\.2em\]{letter-spacing:0.2em}.tracking-wider{letter-spacing:0.05em}.text-stone-400{--tw-text-opacity:1;color:rgb(168 162 158 / var(--tw-text-opacity, 1))}.text-stone-300{--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.text-stone-50{--tw-text-opacity:1;color:rgb(250 250 249 / var(--tw-text-opacity, 1))}.text-stone-500{--tw-text-opacity:1;color:rgb(120 113 108 / var(--tw-text-opacity, 1))}.text-stone-800{--tw-text-opacity:1;color:rgb(41 37 36 / var(--tw-text-opacity, 1))}.text-stone-600{--tw-text-opacity:1;color:rgb(87 83 78 / var(--tw-text-opacity, 1))}.text-stone-700{--tw-text-opacity:1;color:rgb(68 64 60 / var(--tw-text-opacity, 1))}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.selection\:bg-stone-200 *::selection{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity, 1))}.selection\:bg-stone-200::selection{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity, 1))}.hover\:bg-stone-800:hover{--tw-bg-opacity:1;background-color:rgb(41 37 36 / var(--tw-bg-opacity, 1))}.hover\:text-stone-600:hover{--tw-text-opacity:1;color:rgb(87 83 78 / var(--tw-text-opacity, 1))}.hover\:text-stone-800:hover{--tw-text-opacity:1;color:rgb(41 37 36 / var(--tw-text-opacity, 1))}.active\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:opacity-70:active{opacity:0.7}.group:hover .group-hover\:border-stone-300{--tw-border-opacity:1;border-color:rgb(214 211 209 / var(--tw-border-opacity, 1))}.group:hover .group-hover\:text-stone-50{--tw-text-opacity:1;color:rgb(250 250 249 / var(--tw-text-opacity, 1))}.group:hover .group-hover\:text-stone-600{--tw-text-opacity:1;color:rgb(87 83 78 / var(--tw-text-opacity, 1))}.dark\:border-stone-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(87 83 78 / var(--tw-border-opacity, 1))}.dark\:border-stone-700\/50:is(.dark *){border-color:rgb(68 64 60 / 0.5)}.dark\:border-stone-800:is(.dark *){--tw-border-opacity:1;border-color:rgb(41 37 36 / var(--tw-border-opacity, 1))}.dark\:bg-stone-900:is(.dark *){--tw-bg-opacity:1;background-color:rgb(28 25 23 / var(--tw-bg-opacity, 1))}.dark\:bg-stone-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(68 64 60 / var(--tw-bg-opacity, 1))}.dark\:bg-stone-800\/80:is(.dark *){background-color:rgb(41 37 36 / 0.8)}.dark\:bg-stone-900\/90:is(.dark *){background-color:rgb(28 25 23 / 0.9)}.dark\:text-stone-500:is(.dark *){--tw-text-opacity:1;color:rgb(120 113 108 / var(--tw-text-opacity, 1))}.dark\:text-stone-100:is(.dark *){--tw-text-opacity:1;color:rgb(245 245 244 / var(--tw-text-opacity, 1))}.dark\:text-stone-200:is(.dark *){--tw-text-opacity:1;color:rgb(231 229 228 / var(--tw-text-opacity, 1))}.dark\:text-stone-400:is(.dark *){--tw-text-opacity:1;color:rgb(168 162 158 / var(--tw-text-opacity, 1))}.dark\:text-stone-600:is(.dark *){--tw-text-opacity:1;color:rgb(87 83 78 / var(--tw-text-opacity, 1))}.dark\:text-stone-300:is(.dark *){--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.dark\:selection\:bg-stone-700 *:is(.dark *)::selection{--tw-bg-opacity:1;background-color:rgb(68 64 60 / var(--tw-bg-opacity, 1))}.dark\:selection\:bg-stone-700:is(.dark *)::selection{--tw-bg-opacity:1;background-color:rgb(68 64 60 / var(--tw-bg-opacity, 1))}.dark\:hover\:bg-stone-600:hover:is(.dark *){--tw-bg-opacity:1;background-color:rgb(87 83 78 / var(--tw-bg-opacity, 1))}.dark\:hover\:text-stone-200:hover:is(.dark *){--tw-text-opacity:1;color:rgb(231 229 228 / var(--tw-text-opacity, 1))}.dark\:hover\:text-stone-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.group:hover .dark\:group-hover\:border-stone-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(87 83 78 / var(--tw-border-opacity, 1))}.group:hover .dark\:group-hover\:text-stone-300:is(.dark *){--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.group:hover .dark\:group-hover\:text-stone-400:is(.dark *){--tw-text-opacity:1;color:rgb(168 162 158 / var(--tw-text-opacity, 1))}</style><script type="module">function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';
import { createRoot } from 'react-dom/client';
import * as LucideIcons from 'lucide-react';
import { initializeApp } from 'firebase/app';
import { getAuth, signInAnonymously, onAuthStateChanged, setPersistence, browserLocalPersistence } from 'firebase/auth';
import { getFirestore, collection, doc, setDoc, getDoc, getDocs, addDoc, updateDoc, deleteDoc, onSnapshot, query } from 'firebase/firestore';
var {
  PenLine,
  Sparkles,
  Check,
  ChevronRight,
  ChevronLeft,
  ArrowLeft,
  Edit2,
  Trash2,
  Menu,
  Copy,
  RefreshCw,
  X,
  AlertCircle,
  Moon,
  Sun,
  ListFilter,
  CloudSun,
  MoreHorizontal,
  Link: LinkIcon
} = LucideIcons;
var firebaseConfig = {
  "apiKey": "AIzaSyBLw99hdYwzQKaWFacV3HdIAsa_adAna9k",
  "authDomain": "kotobako-ec686.firebaseapp.com",
  "projectId": "kotobako-ec686",
  "storageBucket": "kotobako-ec686.firebasestorage.app",
  "messagingSenderId": "836620257824",
  "appId": "1:836620257824:web:5a76bf0e646e37f1fb4a45",
  "measurementId": "G-9XDCCZ1BDM"
};

// --- Firebase Init ---
var app = initializeApp(firebaseConfig);
var auth = getAuth(app);
var db = getFirestore(app);
var appId = 'koto-no-ha-app';

// Auth Init Logic: 
var initAuthPromise = new Promise(resolve => {
  setPersistence(auth, browserLocalPersistence).then(() => {
    var unsubscribe = onAuthStateChanged(auth, user => {
      if (user) {
        resolve(user);
        unsubscribe();
      } else {
        signInAnonymously(auth).catch(e => console.error("SignIn Error:", e));
      }
    });
  }).catch(e => {
    console.error("Persistence Init Error:", e);
    signInAnonymously(auth).then(cred => resolve(cred.user));
  });
});
var CATEGORIES = ["", "", "", ""];
var LINKED_USER_KEY = 'kotobako_linked_user_id';

// --- Constants & Helper Functions ---
var generateShortCode = () => {
  var chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  var result = '';
  for (var i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
  result += '-';
  for (var _i = 0; _i < 4; _i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
  return result;
};
var SOLAR_TERMS = [{
  month: 1,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 1,
  day: 20,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 2,
  day: 4,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 2,
  day: 19,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 21,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 5,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 20,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 21,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 6,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 6,
  day: 21,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 7,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 8,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 8,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 8,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 7,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 22,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 7,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 22,
  name: '',
  yomi: '',
  desc: ''
}];
var MICRO_SEASONS = [{
  month: 1,
  day: 1,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 1,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 1,
  day: 11,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 1,
  day: 16,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 1,
  day: 20,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 1,
  day: 25,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 1,
  day: 30,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 2,
  day: 4,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 2,
  day: 9,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 2,
  day: 14,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 2,
  day: 19,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 2,
  day: 24,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 1,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 11,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 16,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 21,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 26,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 3,
  day: 31,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 5,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 10,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 15,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 20,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 25,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 4,
  day: 30,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 11,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 16,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 21,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 26,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 5,
  day: 31,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 6,
  day: 6,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 6,
  day: 11,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 6,
  day: 16,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 6,
  day: 21,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 6,
  day: 26,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 2,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 7,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 12,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 17,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 7,
  day: 28,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 2,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 8,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 13,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 18,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 8,
  day: 28,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 2,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 8,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 13,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 18,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 9,
  day: 28,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 3,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 8,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 13,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 18,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 23,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 10,
  day: 28,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 2,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 7,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 12,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 17,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 22,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 11,
  day: 27,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 2,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 7,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 12,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 17,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 22,
  name: '',
  yomi: '',
  desc: ''
}, {
  month: 12,
  day: 27,
  name: '',
  yomi: '',
  desc: ''
}];
var getSeasonInfo = date => {
  var m = date.getMonth() + 1;
  var d = date.getDate();
  var currentVal = m * 100 + d;
  var solarTerm = SOLAR_TERMS[SOLAR_TERMS.length - 1];
  for (var i = 0; i < SOLAR_TERMS.length; i++) {
    var sVal = SOLAR_TERMS[i].month * 100 + SOLAR_TERMS[i].day;
    if (currentVal >= sVal) solarTerm = SOLAR_TERMS[i];else break;
  }
  if (currentVal < SOLAR_TERMS[0].month * 100 + SOLAR_TERMS[0].day) {
    solarTerm = SOLAR_TERMS[SOLAR_TERMS.length - 1];
  }
  var microSeason = MICRO_SEASONS[MICRO_SEASONS.length - 1];
  for (var _i2 = 0; _i2 < MICRO_SEASONS.length; _i2++) {
    var _sVal = MICRO_SEASONS[_i2].month * 100 + MICRO_SEASONS[_i2].day;
    if (currentVal >= _sVal) microSeason = MICRO_SEASONS[_i2];else break;
  }
  if (currentVal < MICRO_SEASONS[0].month * 100 + MICRO_SEASONS[0].day) {
    microSeason = MICRO_SEASONS[MICRO_SEASONS.length - 1];
  }
  return {
    solarTerm,
    microSeason
  };
};

// --- Components ---

var Header = _ref => {
  var {
    onTitleClick,
    leftActions,
    rightActions
  } = _ref;
  return /*#__PURE__*/React.createElement("header", {
    className: "fixed top-0 left-0 right-0 z-50 h-16 bg-stone-50/90 dark:bg-stone-900/90 backdrop-blur-md border-b border-stone-200 dark:border-stone-800 px-6 flex items-center justify-between shadow-sm transition-colors duration-300"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-20 flex justify-start items-center"
  }, leftActions), /*#__PURE__*/React.createElement("h1", {
    onClick: onTitleClick,
    className: "text-xl font-serif font-bold tracking-tight text-stone-800 dark:text-stone-200 cursor-default select-none active:opacity-70 transition-opacity",
    title: "\u30C8\u30EA\u30D7\u30EB\u30AF\u30EA\u30C3\u30AF\u3067\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9"
  }, "Kotobako"), /*#__PURE__*/React.createElement("div", {
    className: "w-20 flex justify-end items-center gap-1"
  }, rightActions));
};
var SyncSettingsView = _ref2 => {
  var {
    currentShortCode,
    isLoadingCode,
    errorMsg,
    onRetryCode,
    onSyncCode,
    onRequestReset,
    showToast,
    isSynced,
    onUnsync
  } = _ref2;
  var [inputId, setInputId] = useState('');
  var handleCopy = () => {
    if (!currentShortCode || currentShortCode.length < 8) return;
    navigator.clipboard.writeText(currentShortCode);
    showToast("");
  };
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-6 pt-6 pb-24 animate-fade-in overflow-y-auto no-scrollbar"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1"
  }, isSynced ? '' : ''), /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2 p-4 rounded-xl border shadow-sm transition-colors duration-300 ".concat(isSynced ? 'bg-stone-100 dark:bg-stone-800 border-stone-300 dark:border-stone-600' : 'bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700')
  }, /*#__PURE__*/React.createElement("code", {
    className: "flex-grow text-xl font-mono font-bold text-stone-800 dark:text-stone-200 tracking-tighter text-center"
  }, isLoadingCode ? '...' : errorMsg ? '' : currentShortCode), /*#__PURE__*/React.createElement("button", {
    onClick: handleCopy,
    disabled: !currentShortCode || currentShortCode.includes('...'),
    className: "p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 bg-stone-50 dark:bg-stone-700 rounded-lg active:scale-95 transition-all disabled:opacity-30"
  }, /*#__PURE__*/React.createElement(Copy, {
    size: 20
  }))), errorMsg && /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-center gap-2 text-red-400 text-xs mt-2"
  }, /*#__PURE__*/React.createElement(AlertCircle, {
    size: 14
  }), /*#__PURE__*/React.createElement("span", null, errorMsg), /*#__PURE__*/React.createElement("button", {
    onClick: onRetryCode,
    className: "underline"
  }, "\u518D\u8A66\u884C")), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1"
  }, isSynced ? '' : '8')), isSynced ? /*#__PURE__*/React.createElement("div", {
    className: "pt-4 border-t border-stone-100 dark:border-stone-800"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onUnsync,
    className: "w-full py-4 bg-stone-800 dark:bg-stone-700 text-stone-50 rounded-xl font-bold text-sm tracking-widest transition-all active:scale-[0.98] shadow-md flex items-center justify-center gap-2"
  }, /*#__PURE__*/React.createElement(LinkIcon, {
    size: 16
  }), /*#__PURE__*/React.createElement("span", null, "\u540C\u671F\u3092\u89E3\u9664\u3057\u3066\u81EA\u5206\u306E\u30C7\u30FC\u30BF\u306B\u623B\u308B"))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
    className: "relative"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 flex items-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-full border-t border-stone-100 dark:border-stone-800"
  })), /*#__PURE__*/React.createElement("div", {
    className: "relative flex justify-center text-[10px] uppercase"
  }, /*#__PURE__*/React.createElement("span", {
    className: "bg-stone-50 dark:bg-stone-900 px-3 text-stone-300 dark:text-stone-600 font-bold tracking-widest"
  }, "or"))), /*#__PURE__*/React.createElement("div", {
    className: "space-y-4"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1"
  }, "\u5225\u306E\u30B3\u30FC\u30C9\u3068\u540C\u671F\u3059\u308B"), /*#__PURE__*/React.createElement("input", {
    type: "text",
    value: inputId,
    onChange: e => setInputId(e.target.value.toUpperCase()),
    placeholder: "\u4F8B: ABCD-1234",
    className: "w-full bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 p-4 rounded-xl text-lg text-center focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-stone-800 dark:text-stone-200 font-mono font-bold shadow-sm transition-colors duration-300"
  }), /*#__PURE__*/React.createElement("button", {
    onClick: () => onSyncCode(inputId),
    disabled: !inputId.trim() || inputId.length < 9,
    className: "w-full py-4 bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-200 rounded-xl font-bold text-sm tracking-widest disabled:opacity-30 transition-all active:scale-[0.98] shadow-md hover:bg-stone-800 dark:hover:bg-stone-600"
  }, "\u540C\u671F\u3092\u958B\u59CB\u3059\u308B"), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1 text-center"
  }, "\u203B\u5165\u529B\u3057\u305F\u30B3\u30FC\u30C9\u306E\u30C7\u30FC\u30BF\u306B\u5207\u308A\u66FF\u308F\u308A\u307E\u3059\u3002")), /*#__PURE__*/React.createElement("div", {
    className: "pt-8 mt-8 border-t border-stone-100 dark:border-stone-800"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onRequestReset,
    className: "w-full py-4 text-red-400 hover:text-red-600 dark:hover:text-red-300 text-xs font-bold tracking-widest transition-colors flex items-center justify-center gap-2"
  }, /*#__PURE__*/React.createElement(Trash2, {
    size: 16
  }), /*#__PURE__*/React.createElement("span", null, "\u5168\u30C7\u30FC\u30BF\u3092\u524A\u9664\u3057\u3066\u521D\u671F\u5316"))))));
};
var Toast = _ref3 => {
  var {
    message,
    isVisible,
    onHide
  } = _ref3;
  useEffect(() => {
    if (isVisible) {
      var timer = setTimeout(onHide, 2000);
      return () => clearTimeout(timer);
    }
  }, [isVisible, onHide]);
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed top-20 left-1/2 transform -translate-x-1/2 z-[100] animate-fade-in pointer-events-none"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-4 py-2 rounded-full shadow-lg text-sm font-medium flex items-center gap-2 border border-stone-700 dark:border-stone-600"
  }, /*#__PURE__*/React.createElement(Check, {
    size: 14
  }), message));
};
var FilterSheet = _ref4 => {
  var {
    isVisible,
    currentCategory,
    onSelect,
    onClose
  } = _ref4;
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[60] flex items-end justify-center sm:items-center p-4 animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm",
    onClick: onClose
  }), /*#__PURE__*/React.createElement("div", {
    className: "relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2 max-h-[80vh] overflow-y-auto no-scrollbar"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-xs font-bold text-stone-400 dark:text-stone-500 uppercase tracking-widest mb-4 flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(ListFilter, {
    size: 14
  }), "\u8868\u793A\u3059\u308B\u8A00\u8449\u3092\u9078\u3076"), /*#__PURE__*/React.createElement("button", {
    onClick: () => onSelect(null),
    className: "w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ".concat(!currentCategory ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800')
  }, /*#__PURE__*/React.createElement("span", null, "\u3059\u3079\u3066\u306E\u8A00\u8449"), !currentCategory && /*#__PURE__*/React.createElement(Check, {
    size: 16
  })), CATEGORIES.map(cat => /*#__PURE__*/React.createElement("button", {
    key: cat,
    onClick: () => onSelect(cat),
    className: "w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ".concat(currentCategory === cat ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800')
  }, /*#__PURE__*/React.createElement("span", null, cat), currentCategory === cat && /*#__PURE__*/React.createElement(Check, {
    size: 16
  }))), /*#__PURE__*/React.createElement("div", {
    className: "pt-4 mt-2 border-t border-stone-50 dark:border-stone-800"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: "w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest"
  }, "\u9589\u3058\u308B"))));
};
var MenuSheet = _ref5 => {
  var {
    isVisible,
    onEdit,
    onDelete,
    onClose
  } = _ref5;
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[70] flex items-end justify-center sm:items-center p-4 animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm",
    onClick: onClose
  }), /*#__PURE__*/React.createElement("div", {
    className: "relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      onClose();
      onEdit();
    },
    className: "w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-stone-600 dark:text-stone-300 hover:bg-stone-50 dark:hover:bg-stone-800"
  }, /*#__PURE__*/React.createElement(Edit2, {
    size: 20,
    className: "text-stone-400 dark:text-stone-500"
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-sm tracking-wide"
  }, "\u8A00\u8449\u3092\u7DE8\u96C6\u3059\u308B")), /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      onClose();
      onDelete();
    },
    className: "w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-red-400 hover:bg-red-50 dark:hover:bg-stone-800"
  }, /*#__PURE__*/React.createElement(Trash2, {
    size: 20
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-sm tracking-wide"
  }, "\u524A\u9664\u3059\u308B")), /*#__PURE__*/React.createElement("div", {
    className: "pt-4 mt-2 border-t border-stone-50 dark:border-stone-800"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: "w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest"
  }, "\u9589\u3058\u308B"))));
};
var SeasonDetailView = _ref6 => {
  var {
    initialDate,
    onClose
  } = _ref6;
  var [currentDate, setCurrentDate] = useState(initialDate || new Date());
  var {
    solarTerm,
    microSeason
  } = useMemo(() => getSeasonInfo(currentDate), [currentDate]);
  var handlePrev = () => {
    var d = new Date(currentDate);
    d.setDate(d.getDate() - 5);
    setCurrentDate(d);
  };
  var handleNext = () => {
    var d = new Date(currentDate);
    d.setDate(d.getDate() + 5);
    setCurrentDate(d);
  };
  var btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-grow flex flex-col items-center justify-center pt-5 text-center space-y-12"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 tracking-[0.2em] uppercase"
  }, "\u4E8C\u5341\u56DB\u7BC0\u6C17"), /*#__PURE__*/React.createElement("h2", {
    className: "text-3xl font-serif text-stone-800 dark:text-stone-100 tracking-[0.1em]"
  }, solarTerm.name), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 font-serif tracking-[0.15em]"
  }, solarTerm.yomi), /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4 tracking-wider"
  }, solarTerm.desc)), /*#__PURE__*/React.createElement("div", {
    className: "w-12 h-px bg-stone-200 dark:bg-stone-700 mx-auto"
  }), /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 tracking-[0.2em] uppercase"
  }, "\u4E03\u5341\u4E8C\u5019"), /*#__PURE__*/React.createElement("h3", {
    className: "text-xl font-serif text-stone-700 dark:text-stone-200 tracking-[0.1em]"
  }, microSeason.name), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 font-serif tracking-[0.15em]"
  }, microSeason.yomi), /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4 tracking-wider"
  }, microSeason.desc)), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest pt-4"
  }, currentDate.toLocaleDateString('ja-JP', {
    month: 'long',
    day: 'numeric'
  }))), /*#__PURE__*/React.createElement("div", {
    className: "pt-12 pb-24 text-center flex items-center justify-between px-4 max-w-xs mx-auto"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: handlePrev,
    className: "p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"
  }, /*#__PURE__*/React.createElement(ChevronLeft, {
    size: 24
  })), /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: btnStyle
  }, "\u9589\u3058\u308B"), /*#__PURE__*/React.createElement("button", {
    onClick: handleNext,
    className: "p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"
  }, /*#__PURE__*/React.createElement(ChevronRight, {
    size: 24
  }))));
};
var ConfirmDialog = _ref7 => {
  var {
    isVisible,
    title,
    message,
    actionLabel,
    onConfirm,
    onCancel
  } = _ref7;
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[80] flex items-center justify-center p-6 bg-stone-900/40 dark:bg-black/60 backdrop-blur-sm animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white dark:bg-stone-800 rounded-2xl p-8 max-w-xs w-full shadow-xl text-center"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-lg font-bold text-stone-800 dark:text-stone-200 mb-2 font-serif"
  }, title), /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-500 dark:text-stone-400 mb-8 leading-relaxed"
  }, message), /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onConfirm,
    className: "w-full py-3 bg-stone-900 dark:bg-stone-700 text-stone-50 rounded-lg font-bold text-sm hover:bg-stone-800 dark:hover:bg-stone-600 transition-colors"
  }, actionLabel), /*#__PURE__*/React.createElement("button", {
    onClick: onCancel,
    className: "w-full py-3 bg-stone-100 dark:bg-stone-900 text-stone-600 dark:text-stone-400 rounded-lg font-bold text-sm hover:bg-stone-200 dark:hover:bg-stone-950 transition-colors"
  }, "\u30AD\u30E3\u30F3\u30BB\u30EB"))));
};
var FloatingWriteButton = _ref8 => {
  var {
    onClick
  } = _ref8;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed bottom-6 left-0 right-0 flex justify-center z-40 px-6 pointer-events-none"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onClick,
    className: "bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 border border-stone-700 dark:border-stone-600 pointer-events-auto active:scale-95 transition-all duration-300 hover:bg-stone-800 dark:hover:bg-stone-600 animate-float-up"
  }, /*#__PURE__*/React.createElement(PenLine, {
    size: 20,
    strokeWidth: 2.5
  }), /*#__PURE__*/React.createElement("span", {
    className: "text-sm font-bold tracking-widest"
  }, "\u8A18\u3059")));
};
var InputView = _ref9 => {
  var {
    onSave,
    initialData = null,
    onDirtyChange
  } = _ref9;
  var [text, setText] = useState(initialData ? initialData.text : '');
  var [source, setSource] = useState(initialData ? initialData.source : '');
  var [selectedCategory, setSelectedCategory] = useState(initialData ? initialData.category : CATEGORIES[0]);
  var textareaRef = useRef(null);
  useEffect(() => {
    if (initialData) {
      setText(initialData.text);
      setSource(initialData.source || '');
      setSelectedCategory(initialData.category);
    } else {
      setText('');
      setSource('');
      setSelectedCategory(CATEGORIES[0]);
    }
  }, [initialData]);
  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = 'auto';
      textareaRef.current.style.height = "".concat(textareaRef.current.scrollHeight, "px");
    }
  }, [text]);
  useEffect(() => {
    if (onDirtyChange) {
      var isDirty = initialData ? text !== initialData.text || source !== (initialData.source || '') || selectedCategory !== initialData.category : text.trim().length > 0 || source.trim().length > 0;
      onDirtyChange(isDirty);
    }
  }, [text, source, selectedCategory, initialData, onDirtyChange]);
  var handleSave = () => {
    if (text.trim()) onSave(text, source, selectedCategory);
  };
  var isEditMode = !!initialData;
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-6 pt-8 pb-24 animate-fade-in overflow-y-auto no-scrollbar"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-grow flex flex-col gap-6"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-stone-500 dark:text-stone-400 text-xs font-bold tracking-widest uppercase select-none cursor-default active:text-stone-800 dark:active:text-stone-200 transition-colors"
  }, isEditMode ? '' : ''), /*#__PURE__*/React.createElement("textarea", {
    ref: textareaRef,
    value: text,
    onChange: e => setText(e.target.value),
    placeholder: "\u5FC3\u306B\u6B8B\u3063\u305F\u8A00\u8449\u3092\u5165\u529B...",
    className: "w-full min-h-[8rem] bg-transparent text-lg leading-relaxed text-stone-800 dark:text-stone-200 placeholder:text-stone-300 dark:placeholder:text-stone-600 resize-none focus:outline-none font-serif overflow-hidden transition-colors",
    autoFocus: !isEditMode
  }), /*#__PURE__*/React.createElement("input", {
    type: "text",
    value: source,
    onChange: e => setSource(e.target.value),
    placeholder: "\u51FA\u5178\uFF08\u4EFB\u610F\uFF09",
    className: "w-full bg-transparent border-b border-stone-200 dark:border-stone-700 py-2 mb-4 focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-sm font-serif text-stone-600 dark:text-stone-400 placeholder:text-stone-400 dark:placeholder:text-stone-600 transition-colors"
  }), /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-2 gap-2"
  }, CATEGORIES.map(cat => /*#__PURE__*/React.createElement("button", {
    key: cat,
    onClick: () => setSelectedCategory(cat),
    className: "py-3 px-2 text-sm rounded transition-all duration-200 border ".concat(selectedCategory === cat ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 border-stone-800 dark:border-stone-700 shadow-md' : 'bg-white dark:bg-stone-800 text-stone-600 dark:text-stone-400 border-stone-200 dark:border-stone-700 hover:border-stone-400 dark:hover:border-stone-500')
  }, cat))))), /*#__PURE__*/React.createElement("div", {
    className: "pt-6 pb-4"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: handleSave,
    disabled: !text.trim(),
    className: "w-full py-4 rounded-lg font-bold tracking-widest transition-all duration-200 ".concat(text.trim() ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 shadow-lg hover:bg-stone-700 dark:hover:bg-stone-600 active:scale-[0.98]' : 'bg-stone-200 dark:bg-stone-800 text-stone-400 dark:text-stone-600 cursor-not-allowed')
  }, isEditMode ? '' : '')));
};
var SeasonBadge = _ref0 => {
  var {
    onClick
  } = _ref0;
  var {
    solarTerm,
    microSeason
  } = useMemo(() => getSeasonInfo(new Date()), []);
  return /*#__PURE__*/React.createElement("button", {
    onClick: onClick,
    className: "flex items-center gap-2 text-xs text-stone-500 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200 transition-colors tracking-wide py-1 group"
  }, /*#__PURE__*/React.createElement(CloudSun, {
    size: 18,
    className: "text-stone-400 dark:text-stone-500 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors -mt-0.5"
  }), /*#__PURE__*/React.createElement("span", {
    className: "border-b border-transparent group-hover:border-stone-300 dark:group-hover:border-stone-600 transition-all font-normal"
  }, solarTerm.name, " ", /*#__PURE__*/React.createElement("span", {
    className: "mx-1 text-stone-300 dark:text-stone-600"
  }, "/"), " ", microSeason.name), /*#__PURE__*/React.createElement(ChevronRight, {
    size: 14,
    className: "text-stone-300 dark:text-stone-600 group-hover:text-stone-50 dark:group-hover:text-stone-400 transition-colors -mt-0.5"
  }));
};
var ListView = _ref1 => {
  var {
    quotes,
    onItemClick,
    onStartRandom,
    filterCategory,
    onOpenFilter,
    onOpenSeason
  } = _ref1;
  var displayQuotes = filterCategory ? quotes.filter(q => q.category === filterCategory) : quotes;
  return /*#__PURE__*/React.createElement("div", {
    className: "h-full overflow-y-auto max-w-md mx-auto px-6 pt-4 pb-32 no-scrollbar"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-end mb-4 px-1 gap-2"
  }, /*#__PURE__*/React.createElement(SeasonBadge, {
    onClick: onOpenSeason
  }), /*#__PURE__*/React.createElement("button", {
    onClick: onOpenFilter,
    className: "flex items-center gap-1.5 text-[10px] font-bold text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-300 transition-colors tracking-wide bg-stone-100/80 dark:bg-stone-800/80 px-3 py-1.5 rounded-full border border-stone-200/50 dark:border-stone-700/50"
  }, /*#__PURE__*/React.createElement(ListFilter, {
    size: 12
  }), /*#__PURE__*/React.createElement("span", null, filterCategory || ''))), displayQuotes.length === 0 ? /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 p-6 text-center italic font-serif"
  }, quotes.length === 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("p", null, "\u307E\u3060\u8A00\u8449\u304C\u3042\u308A\u307E\u305B\u3093\u3002"), /*#__PURE__*/React.createElement("p", {
    className: "mt-2"
  }, "\u4E0B\u306E\u300C\u8A18\u3059\u300D\u304B\u3089\u59CB\u3081\u307E\u3057\u3087\u3046\u3002")) : /*#__PURE__*/React.createElement("p", null, "\u3053\u306E\u30AB\u30C6\u30B4\u30EA\u306E\u8A00\u8449\u306F\u3042\u308A\u307E\u305B\u3093\u3002")) : /*#__PURE__*/React.createElement("div", {
    className: "space-y-6"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onStartRandom,
    className: "w-full flex items-center justify-between py-4 px-5 bg-stone-100 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-2xl hover:bg-stone-200 transition-all group active:scale-[0.98]"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white dark:bg-stone-700 p-2.5 rounded-xl text-stone-800 dark:text-stone-200 group-hover:rotate-12 transition-transform"
  }, /*#__PURE__*/React.createElement(Sparkles, {
    size: 20
  })), /*#__PURE__*/React.createElement("div", {
    className: "text-left"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-sm font-bold text-stone-800 dark:text-stone-200 tracking-wider"
  }, "\u8A00\u8449\u3068\u306E\u518D\u4F1A"), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 font-serif"
  }, "\u3044\u3064\u304B\u306E\u8A00\u8449\u306B\u3001\u307E\u305F\u51FA\u4F1A\u3046"))), /*#__PURE__*/React.createElement(ChevronRight, {
    className: "text-stone-300 dark:text-stone-600",
    size: 18
  })), displayQuotes.map(quote => /*#__PURE__*/React.createElement("div", {
    key: quote.id,
    onClick: () => onItemClick(quote.id),
    className: "group bg-white dark:bg-stone-850 p-6 rounded-2xl border border-stone-100 dark:border-stone-800 hover:border-stone-300 transition-all cursor-pointer active:bg-stone-50 shadow-sm text-left"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-base leading-relaxed text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-1 font-serif line-clamp-3"
  }, quote.text), quote.source && /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 font-serif mb-3"
  }, "\u2014 ", quote.source), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-end border-t border-stone-50 dark:border-stone-800 pt-3"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-xs text-stone-500 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 px-2 py-1 rounded-lg font-medium"
  }, quote.category), /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] text-stone-400 dark:text-stone-600 font-mono"
  }, new Date(quote.timestamp).toLocaleDateString('ja-JP')))))));
};
var SingleQuoteView = _ref10 => {
  var {
    quote,
    onNext,
    onPrev,
    hasNext,
    hasPrev,
    nextIcon: NextIcon,
    onClose,
    isRandomMode = false
  } = _ref10;
  var btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-grow flex flex-col items-center pt-5 text-center"
  }, /*#__PURE__*/React.createElement("span", {
    className: "inline-block px-3 py-1 rounded-full border border-stone-200 dark:border-stone-700 text-xs text-stone-500 dark:text-stone-400 tracking-wide mb-8"
  }, quote.category), /*#__PURE__*/React.createElement("div", {
    className: "px-2"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-xl md:text-2xl font-serif text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-4 select-text leading-relaxed",
    style: {
      lineHeight: '1.8'
    }
  }, quote.text), quote.source && /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-500 dark:text-stone-400 font-serif mb-8"
  }, "\u2014 ", quote.source), /*#__PURE__*/React.createElement("div", {
    className: "mt-8 flex justify-center text-stone-300 dark:text-stone-700"
  }, /*#__PURE__*/React.createElement("div", {
    className: "h-px w-12 bg-stone-300 dark:bg-stone-700"
  })), /*#__PURE__*/React.createElement("p", {
    className: "mt-4 text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest"
  }, new Date(quote.timestamp).toLocaleDateString('ja-JP')))), /*#__PURE__*/React.createElement("div", {
    className: "pt-12 pb-24 text-center"
  }, isRandomMode ? /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center gap-8 max-w-xs mx-auto"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onNext,
    className: "group flex flex-col items-center gap-3 text-stone-400 dark:text-stone-500 hover:text-stone-800 dark:hover:text-stone-200 transition-colors active:scale-95"
  }, /*#__PURE__*/React.createElement("div", {
    className: "p-4 rounded-full bg-stone-100 dark:bg-stone-800 group-hover:bg-stone-200 dark:group-hover:bg-stone-700 transition-colors"
  }, /*#__PURE__*/React.createElement(NextIcon, {
    size: 24,
    strokeWidth: 1.5
  }))), /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: btnStyle
  }, "\u9589\u3058\u308B")) : /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between px-4 max-w-xs mx-auto"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onPrev,
    disabled: !hasPrev,
    className: "p-3 text-stone-400 dark:text-stone-600 enabled:hover:text-stone-600 dark:enabled:hover:text-stone-300 transition-colors disabled:opacity-0 active:scale-95"
  }, /*#__PURE__*/React.createElement(ChevronLeft, {
    size: 24
  })), /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: btnStyle
  }, "\u4E00\u89A7\u3078"), /*#__PURE__*/React.createElement("button", {
    onClick: onNext,
    disabled: !hasNext,
    className: "p-3 text-stone-400 dark:text-stone-500 enabled:hover:text-stone-800 dark:enabled:hover:text-stone-200 transition-colors disabled:opacity-0 active:scale-95"
  }, /*#__PURE__*/React.createElement(NextIcon, {
    size: 24
  })))));
};

// --- Main App ---

var App = () => {
  var [user, setUser] = useState(null);
  var [shortCode, setShortCode] = useState('');
  var [isLoadingCode, setIsLoadingCode] = useState(false);
  var [codeError, setCodeError] = useState(null);
  var [syncUserId, setSyncUserId] = useState(null);
  var [linkedUserId, setLinkedUserId] = useState(localStorage.getItem(LINKED_USER_KEY));
  var [viewMode, setViewMode] = useState('list');
  var [selectedQuoteId, setSelectedQuoteId] = useState(null);
  var [randomHistory, setRandomHistory] = useState([]);
  var [quotes, setQuotes] = useState([]);
  var [toast, setToast] = useState({
    show: false,
    message: ''
  });
  var [dialogState, setDialogState] = useState({
    isVisible: false,
    type: null,
    id: null
  });
  var [isDarkMode, setIsDarkMode] = useState(false);
  var [filterCategory, setFilterCategory] = useState(null);
  var [isFilterVisible, setIsFilterVisible] = useState(false);
  var [isInputDirty, setIsInputDirty] = useState(false);
  var [isMenuVisible, setIsMenuVisible] = useState(false);
  var [isInitialLoading, setIsInitialLoading] = useState(true);
  var authInitiatedRef = useRef(false);
  useEffect(() => {
    var savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      setIsDarkMode(true);
      document.documentElement.classList.add('dark');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09');
    } else {
      setIsDarkMode(false);
      document.documentElement.classList.remove('dark');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9');
    }
  }, []);
  var toggleTheme = () => {
    var next = !isDarkMode;
    setIsDarkMode(next);
    if (next) {
      document.documentElement.classList.add('dark');
      localStorage.setItem('theme', 'dark');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09');
    } else {
      document.documentElement.classList.remove('dark');
      localStorage.setItem('theme', 'light');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9');
    }
  };
  var fetchUserData = useCallback(/*#__PURE__*/function () {
    var _ref11 = _asyncToGenerator(function* (targetUid) {
      if (!targetUid) return;
      setIsLoadingCode(true);
      setCodeError(null);
      try {
        var userCodeRef = doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', targetUid);
        var codeSnap = yield getDoc(userCodeRef);
        if (codeSnap.exists()) {
          setShortCode(codeSnap.data().code);
        } else {
          if (user && user.uid === targetUid) {
            var newCode = generateShortCode();
            yield setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', newCode), {
              uid: targetUid
            });
            yield setDoc(userCodeRef, {
              code: newCode
            });
            setShortCode(newCode);
          } else {
            setShortCode('-----');
          }
        }
      } catch (e) {
        console.error(e);
        setCodeError("");
      } finally {
        setIsLoadingCode(false);
      }
    });
    return function (_x) {
      return _ref11.apply(this, arguments);
    };
  }(), [user]);
  useEffect(() => {
    initAuthPromise.then(u => {
      if (u) setUser(u);
    });
  }, []);
  var activeUserId = linkedUserId || (user ? user.uid : null);
  useEffect(() => {
    if (!activeUserId) {
      if (!user && !isInitialLoading === false) setIsInitialLoading(false);
      return;
    }
    fetchUserData(activeUserId);
    var q = query(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'));
    return onSnapshot(q, snap => {
      setQuotes(snap.docs.map(d => _objectSpread({
        id: d.id
      }, d.data())).sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0)));
      setIsInitialLoading(false);
    }, () => setIsInitialLoading(false));
  }, [activeUserId, fetchUserData]);
  var showToast = message => setToast({
    show: true,
    message
  });
  var handleSyncByCode = /*#__PURE__*/function () {
    var _ref12 = _asyncToGenerator(function* (code) {
      if (!user) return;
      try {
        var snap = yield getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', code.trim().toUpperCase()));
        if (snap.exists()) {
          var targetUid = snap.data().uid;
          setSyncUserId(targetUid);
          setLinkedUserId(targetUid);
          localStorage.setItem(LINKED_USER_KEY, targetUid);
          setViewMode('list');
          showToast("");
        } else {
          showToast("");
        }
      } catch (e) {
        showToast("");
      }
    });
    return function handleSyncByCode(_x2) {
      return _ref12.apply(this, arguments);
    };
  }();
  var handleUnsync = () => {
    localStorage.removeItem(LINKED_USER_KEY);
    setLinkedUserId(null);
    setSyncUserId(null);
    showToast("");
    setDialogState({
      isVisible: false,
      type: null,
      id: null
    });
  };
  var addQuote = /*#__PURE__*/function () {
    var _ref13 = _asyncToGenerator(function* (text, source, category) {
      if (!activeUserId) return;
      yield addDoc(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'), {
        text,
        source,
        category,
        timestamp: Date.now()
      });
      setIsInputDirty(false);
      setViewMode('list');
      showToast("");
    });
    return function addQuote(_x3, _x4, _x5) {
      return _ref13.apply(this, arguments);
    };
  }();
  var updateQuote = /*#__PURE__*/function () {
    var _ref14 = _asyncToGenerator(function* (text, source, category) {
      if (!activeUserId || !selectedQuoteId) return;
      yield updateDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', selectedQuoteId), {
        text,
        source,
        category
      });
      setIsInputDirty(false);
      setViewMode(randomHistory.length > 0 ? 'random' : 'detail');
      showToast("");
    });
    return function updateQuote(_x6, _x7, _x8) {
      return _ref14.apply(this, arguments);
    };
  }();
  var handleConfirmAction = /*#__PURE__*/function () {
    var _ref15 = _asyncToGenerator(function* () {
      if (dialogState.type === 'quote') yield confirmDeleteQuote();else if (dialogState.type === 'account') yield confirmResetAccount();else if (dialogState.type === 'discard') {
        setIsInputDirty(false);
        setDialogState({
          isVisible: false,
          type: null,
          id: null
        });
        setViewMode(randomHistory.length > 0 && viewMode === 'edit' ? 'random' : selectedQuoteId && viewMode === 'edit' ? 'detail' : 'list');
      }
    });
    return function handleConfirmAction() {
      return _ref15.apply(this, arguments);
    };
  }();
  var confirmDeleteQuote = /*#__PURE__*/function () {
    var _ref16 = _asyncToGenerator(function* () {
      if (!activeUserId || !dialogState.id) return;
      yield deleteDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', dialogState.id));
      setDialogState({
        isVisible: false,
        type: null,
        id: null
      });
      setViewMode('list');
      setSelectedQuoteId(null);
      showToast("");
    });
    return function confirmDeleteQuote() {
      return _ref16.apply(this, arguments);
    };
  }();
  var confirmResetAccount = /*#__PURE__*/function () {
    var _ref17 = _asyncToGenerator(function* () {
      if (!user) return;
      try {
        if (linkedUserId) {
          handleUnsync();
          return;
        }
        if (shortCode) {
          var snap = yield getDocs(collection(db, 'artifacts', appId, 'users', user.uid, 'quotes'));
          yield Promise.all(snap.docs.map(d => deleteDoc(d.ref)));
          yield deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', shortCode));
          yield deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', user.uid));
        }
        localStorage.removeItem(LINKED_USER_KEY);
        showToast("...");
        setTimeout(() => window.location.reload(), 1500);
      } catch (e) {
        console.error(e);
        showToast("");
        setDialogState({
          isInitialLoading: false,
          isVisible: false,
          type: null,
          id: null
        });
      }
    });
    return function confirmResetAccount() {
      return _ref17.apply(this, arguments);
    };
  }();
  var handleTitleClick = e => {
    if (e.detail === 3) {
      var a = document.createElement('a');
      a.href = URL.createObjectURL(new Blob([document.documentElement.outerHTML], {
        type: 'text/html'
      }));
      a.download = 'index.html';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      showToast("HTML");
    }
  };
  var currentQuote = quotes.find(q => q.id === selectedQuoteId);
  var leftActions = null,
    rightActions = null;
  switch (viewMode) {
    case 'list':
      leftActions = /*#__PURE__*/React.createElement("button", {
        onClick: toggleTheme,
        className: "p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, isDarkMode ? /*#__PURE__*/React.createElement(Sun, {
        size: 24
      }) : /*#__PURE__*/React.createElement(Moon, {
        size: 24
      }));
      rightActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => setViewMode('settings'),
        className: "p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(Menu, {
        size: 24
      }));
      break;
    case 'input':
    case 'settings':
    case 'edit':
      rightActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => isInputDirty ? setDialogState({
          isVisible: true,
          type: 'discard',
          id: null
        }) : setViewMode('list'),
        className: "p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(X, {
        size: 24
      }));
      break;
    case 'detail':
    case 'random':
      leftActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => {
          setViewMode('list');
          setRandomHistory([]);
          setSelectedQuoteId(null);
        },
        className: "p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(ArrowLeft, {
        size: 24
      }));
      rightActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => setIsMenuVisible(true),
        className: "p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(MoreHorizontal, {
        size: 24
      }));
      break;
    case 'season-detail':
      leftActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => setViewMode('list'),
        className: "p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(ArrowLeft, {
        size: 24
      }));
      break;
  }
  if (!user || isInitialLoading) return /*#__PURE__*/React.createElement("div", {
    className: "h-screen flex items-center justify-center font-serif text-stone-400 dark:text-stone-500 italic bg-stone-50 dark:bg-stone-900"
  }, "\u8AAD\u307F\u8FBC\u307F\u4E2D...");
  return /*#__PURE__*/React.createElement("div", {
    className: "h-[100dvh] bg-stone-50 dark:bg-stone-900 text-stone-800 dark:text-stone-200 font-sans selection:bg-stone-200 dark:selection:bg-stone-700 overflow-hidden flex flex-col transition-colors duration-300"
  }, /*#__PURE__*/React.createElement(Header, {
    onTitleClick: handleTitleClick,
    leftActions: leftActions,
    rightActions: rightActions
  }), /*#__PURE__*/React.createElement("div", {
    className: "flex-grow overflow-hidden relative pt-16"
  }, /*#__PURE__*/React.createElement("main", {
    className: "h-full relative overflow-hidden"
  }, viewMode === 'input' && /*#__PURE__*/React.createElement(InputView, {
    onSave: addQuote,
    onDirtyChange: setIsInputDirty
  }), viewMode === 'list' && /*#__PURE__*/React.createElement(ListView, {
    quotes: quotes,
    onItemClick: id => {
      setSelectedQuoteId(id);
      setViewMode('detail');
    },
    onStartRandom: () => {
      if (quotes.length > 0) {
        var f = quotes[Math.floor(Math.random() * quotes.length)];
        setSelectedQuoteId(f.id);
        setRandomHistory([f.id]);
        setViewMode('random');
      }
    },
    filterCategory: filterCategory,
    onOpenFilter: () => setIsFilterVisible(true),
    onOpenSeason: () => setViewMode('season-detail')
  }), viewMode === 'detail' && currentQuote && /*#__PURE__*/React.createElement(SingleQuoteView, {
    quote: currentQuote,
    onNext: () => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) + 1) % quotes.length].id),
    onPrev: () => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) - 1 + quotes.length) % quotes.length].id),
    hasNext: quotes.length > 1,
    hasPrev: quotes.length > 1,
    nextIcon: ChevronRight,
    onClose: () => setViewMode('list')
  }), viewMode === 'random' && currentQuote && /*#__PURE__*/React.createElement(SingleQuoteView, {
    quote: currentQuote,
    onNext: () => {
      var n;
      do {
        n = quotes[Math.floor(Math.random() * quotes.length)].id;
      } while (n === selectedQuoteId && quotes.length > 1);
      setSelectedQuoteId(n);
    },
    nextIcon: Sparkles,
    onClose: () => setViewMode('list'),
    isRandomMode: true
  }), viewMode === 'edit' && currentQuote && /*#__PURE__*/React.createElement(InputView, {
    initialData: currentQuote,
    onSave: updateQuote,
    onDirtyChange: setIsInputDirty
  }), viewMode === 'settings' && /*#__PURE__*/React.createElement(SyncSettingsView, {
    currentShortCode: shortCode,
    isLoadingCode: isLoadingCode,
    errorMsg: codeError,
    onRetryCode: () => fetchUserData(user.uid),
    onSyncCode: handleSyncByCode,
    onRequestReset: () => setDialogState({
      isVisible: true,
      type: 'account',
      id: null
    }),
    showToast: showToast,
    isSynced: !!linkedUserId,
    onUnsync: () => setDialogState({
      isVisible: true,
      type: 'account',
      id: null
    })
  }), viewMode === 'season-detail' && /*#__PURE__*/React.createElement(SeasonDetailView, {
    onClose: () => setViewMode('list')
  }))), /*#__PURE__*/React.createElement(FilterSheet, {
    isVisible: isFilterVisible,
    currentCategory: filterCategory,
    onSelect: cat => {
      setFilterCategory(cat);
      setIsFilterVisible(false);
    },
    onClose: () => setIsFilterVisible(false)
  }), /*#__PURE__*/React.createElement(MenuSheet, {
    isVisible: isMenuVisible,
    onEdit: () => setViewMode('edit'),
    onDelete: () => setDialogState({
      isVisible: true,
      type: 'quote',
      id: selectedQuoteId
    }),
    onClose: () => setIsMenuVisible(false)
  }), viewMode === 'list' && /*#__PURE__*/React.createElement(FloatingWriteButton, {
    onClick: () => setViewMode('input')
  }), /*#__PURE__*/React.createElement(ConfirmDialog, {
    isVisible: dialogState.isVisible,
    title: dialogState.type === 'account' ? "" : dialogState.type === 'discard' ? "" : "",
    message: dialogState.type === 'account' ? linkedUserId ? "" : "" : dialogState.type === 'discard' ? "" : "",
    actionLabel: dialogState.type === 'account' ? linkedUserId ? "" : "" : dialogState.type === 'discard' ? "" : "",
    onConfirm: handleConfirmAction,
    onCancel: () => setDialogState({
      isVisible: false,
      type: null,
      id: null
    })
  }), /*#__PURE__*/React.createElement(Toast, {
    message: toast.message,
    isVisible: toast.show,
    onHide: () => setToast(p => _objectSpread(_objectSpread({}, p), {}, {
      show: false
    }))
  }));
};
createRoot(document.getElementById('root')).render(/*#__PURE__*/React.createElement(App, null));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlTWVtbyIsInVzZUNhbGxiYWNrIiwiY3JlYXRlUm9vdCIsIkx1Y2lkZUljb25zIiwiaW5pdGlhbGl6ZUFwcCIsImdldEF1dGgiLCJzaWduSW5Bbm9ueW1vdXNseSIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInNldFBlcnNpc3RlbmNlIiwiYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJnZXRGaXJlc3RvcmUiLCJjb2xsZWN0aW9uIiwiZG9jIiwic2V0RG9jIiwiZ2V0RG9jIiwiZ2V0RG9jcyIsImFkZERvYyIsInVwZGF0ZURvYyIsImRlbGV0ZURvYyIsIm9uU25hcHNob3QiLCJxdWVyeSIsIlBlbkxpbmUiLCJTcGFya2xlcyIsIkNoZWNrIiwiQ2hldnJvblJpZ2h0IiwiQ2hldnJvbkxlZnQiLCJBcnJvd0xlZnQiLCJFZGl0MiIsIlRyYXNoMiIsIk1lbnUiLCJDb3B5IiwiUmVmcmVzaEN3IiwiWCIsIkFsZXJ0Q2lyY2xlIiwiTW9vbiIsIlN1biIsIkxpc3RGaWx0ZXIiLCJDbG91ZFN1biIsIk1vcmVIb3Jpem9udGFsIiwiTGluayIsIkxpbmtJY29uIiwiZmlyZWJhc2VDb25maWciLCJhcHAiLCJhdXRoIiwiZGIiLCJhcHBJZCIsImluaXRBdXRoUHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsInVuc3Vic2NyaWJlIiwidXNlciIsImNhdGNoIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImNyZWQiLCJDQVRFR09SSUVTIiwiTElOS0VEX1VTRVJfS0VZIiwiZ2VuZXJhdGVTaG9ydENvZGUiLCJjaGFycyIsInJlc3VsdCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJTT0xBUl9URVJNUyIsIm1vbnRoIiwiZGF5IiwibmFtZSIsInlvbWkiLCJkZXNjIiwiTUlDUk9fU0VBU09OUyIsImdldFNlYXNvbkluZm8iLCJkYXRlIiwibSIsImdldE1vbnRoIiwiZCIsImdldERhdGUiLCJjdXJyZW50VmFsIiwic29sYXJUZXJtIiwic1ZhbCIsIm1pY3JvU2Vhc29uIiwiSGVhZGVyIiwiX3JlZiIsIm9uVGl0bGVDbGljayIsImxlZnRBY3Rpb25zIiwicmlnaHRBY3Rpb25zIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJ0aXRsZSIsIlN5bmNTZXR0aW5nc1ZpZXciLCJfcmVmMiIsImN1cnJlbnRTaG9ydENvZGUiLCJpc0xvYWRpbmdDb2RlIiwiZXJyb3JNc2ciLCJvblJldHJ5Q29kZSIsIm9uU3luY0NvZGUiLCJvblJlcXVlc3RSZXNldCIsInNob3dUb2FzdCIsImlzU3luY2VkIiwib25VbnN5bmMiLCJpbnB1dElkIiwic2V0SW5wdXRJZCIsImhhbmRsZUNvcHkiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJjb25jYXQiLCJkaXNhYmxlZCIsImluY2x1ZGVzIiwic2l6ZSIsIkZyYWdtZW50IiwidHlwZSIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJ0b1VwcGVyQ2FzZSIsInBsYWNlaG9sZGVyIiwidHJpbSIsIlRvYXN0IiwiX3JlZjMiLCJtZXNzYWdlIiwiaXNWaXNpYmxlIiwib25IaWRlIiwidGltZXIiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiRmlsdGVyU2hlZXQiLCJfcmVmNCIsImN1cnJlbnRDYXRlZ29yeSIsIm9uU2VsZWN0Iiwib25DbG9zZSIsIm1hcCIsImNhdCIsImtleSIsIk1lbnVTaGVldCIsIl9yZWY1Iiwib25FZGl0Iiwib25EZWxldGUiLCJTZWFzb25EZXRhaWxWaWV3IiwiX3JlZjYiLCJpbml0aWFsRGF0ZSIsImN1cnJlbnREYXRlIiwic2V0Q3VycmVudERhdGUiLCJEYXRlIiwiaGFuZGxlUHJldiIsInNldERhdGUiLCJoYW5kbGVOZXh0IiwiYnRuU3R5bGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJDb25maXJtRGlhbG9nIiwiX3JlZjciLCJhY3Rpb25MYWJlbCIsIm9uQ29uZmlybSIsIm9uQ2FuY2VsIiwiRmxvYXRpbmdXcml0ZUJ1dHRvbiIsIl9yZWY4Iiwic3Ryb2tlV2lkdGgiLCJJbnB1dFZpZXciLCJfcmVmOSIsIm9uU2F2ZSIsImluaXRpYWxEYXRhIiwib25EaXJ0eUNoYW5nZSIsInRleHQiLCJzZXRUZXh0Iiwic291cmNlIiwic2V0U291cmNlIiwic2VsZWN0ZWRDYXRlZ29yeSIsInNldFNlbGVjdGVkQ2F0ZWdvcnkiLCJjYXRlZ29yeSIsInRleHRhcmVhUmVmIiwiY3VycmVudCIsInN0eWxlIiwiaGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiaXNEaXJ0eSIsImhhbmRsZVNhdmUiLCJpc0VkaXRNb2RlIiwicmVmIiwiYXV0b0ZvY3VzIiwiU2Vhc29uQmFkZ2UiLCJfcmVmMCIsIkxpc3RWaWV3IiwiX3JlZjEiLCJxdW90ZXMiLCJvbkl0ZW1DbGljayIsIm9uU3RhcnRSYW5kb20iLCJmaWx0ZXJDYXRlZ29yeSIsIm9uT3BlbkZpbHRlciIsIm9uT3BlblNlYXNvbiIsImRpc3BsYXlRdW90ZXMiLCJmaWx0ZXIiLCJxIiwicXVvdGUiLCJpZCIsInRpbWVzdGFtcCIsIlNpbmdsZVF1b3RlVmlldyIsIl9yZWYxMCIsIm9uTmV4dCIsIm9uUHJldiIsImhhc05leHQiLCJoYXNQcmV2IiwibmV4dEljb24iLCJOZXh0SWNvbiIsImlzUmFuZG9tTW9kZSIsImxpbmVIZWlnaHQiLCJBcHAiLCJzZXRVc2VyIiwic2hvcnRDb2RlIiwic2V0U2hvcnRDb2RlIiwic2V0SXNMb2FkaW5nQ29kZSIsImNvZGVFcnJvciIsInNldENvZGVFcnJvciIsInN5bmNVc2VySWQiLCJzZXRTeW5jVXNlcklkIiwibGlua2VkVXNlcklkIiwic2V0TGlua2VkVXNlcklkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInZpZXdNb2RlIiwic2V0Vmlld01vZGUiLCJzZWxlY3RlZFF1b3RlSWQiLCJzZXRTZWxlY3RlZFF1b3RlSWQiLCJyYW5kb21IaXN0b3J5Iiwic2V0UmFuZG9tSGlzdG9yeSIsInNldFF1b3RlcyIsInRvYXN0Iiwic2V0VG9hc3QiLCJzaG93IiwiZGlhbG9nU3RhdGUiLCJzZXREaWFsb2dTdGF0ZSIsImlzRGFya01vZGUiLCJzZXRJc0RhcmtNb2RlIiwic2V0RmlsdGVyQ2F0ZWdvcnkiLCJpc0ZpbHRlclZpc2libGUiLCJzZXRJc0ZpbHRlclZpc2libGUiLCJpc0lucHV0RGlydHkiLCJzZXRJc0lucHV0RGlydHkiLCJpc01lbnVWaXNpYmxlIiwic2V0SXNNZW51VmlzaWJsZSIsImlzSW5pdGlhbExvYWRpbmciLCJzZXRJc0luaXRpYWxMb2FkaW5nIiwiYXV0aEluaXRpYXRlZFJlZiIsInNhdmVkVGhlbWUiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJ0b2dnbGVUaGVtZSIsIm5leHQiLCJzZXRJdGVtIiwiZmV0Y2hVc2VyRGF0YSIsIl9yZWYxMSIsIl9hc3luY1RvR2VuZXJhdG9yIiwidGFyZ2V0VWlkIiwidXNlckNvZGVSZWYiLCJjb2RlU25hcCIsImV4aXN0cyIsImRhdGEiLCJjb2RlIiwidWlkIiwibmV3Q29kZSIsIl94IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ1IiwiYWN0aXZlVXNlcklkIiwic25hcCIsImRvY3MiLCJfb2JqZWN0U3ByZWFkIiwic29ydCIsImEiLCJiIiwiaGFuZGxlU3luY0J5Q29kZSIsIl9yZWYxMiIsIl94MiIsImhhbmRsZVVuc3luYyIsInJlbW92ZUl0ZW0iLCJhZGRRdW90ZSIsIl9yZWYxMyIsIm5vdyIsIl94MyIsIl94NCIsIl94NSIsInVwZGF0ZVF1b3RlIiwiX3JlZjE0IiwiX3g2IiwiX3g3IiwiX3g4IiwiaGFuZGxlQ29uZmlybUFjdGlvbiIsIl9yZWYxNSIsImNvbmZpcm1EZWxldGVRdW90ZSIsImNvbmZpcm1SZXNldEFjY291bnQiLCJfcmVmMTYiLCJfcmVmMTciLCJhbGwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImhhbmRsZVRpdGxlQ2xpY2siLCJkZXRhaWwiLCJocmVmIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiQmxvYiIsIm91dGVySFRNTCIsImRvd25sb2FkIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZW1vdmVDaGlsZCIsImN1cnJlbnRRdW90ZSIsImZpbmQiLCJmIiwiZmluZEluZGV4IiwibiIsInAiLCJnZXRFbGVtZW50QnlJZCIsInJlbmRlciJdLCJzb3VyY2VzIjpbIklubGluZSBCYWJlbCBzY3JpcHQiXSwic291cmNlc0NvbnRlbnQiOlsiXG4gIGltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuICBpbXBvcnQgeyBjcmVhdGVSb290IH0gZnJvbSAncmVhY3QtZG9tL2NsaWVudCc7XG4gIGltcG9ydCAqIGFzIEx1Y2lkZUljb25zIGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG4gIGltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuICBpbXBvcnQgeyBnZXRBdXRoLCBzaWduSW5Bbm9ueW1vdXNseSwgb25BdXRoU3RhdGVDaGFuZ2VkLCBzZXRQZXJzaXN0ZW5jZSwgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbiAgaW1wb3J0IHsgZ2V0RmlyZXN0b3JlLCBjb2xsZWN0aW9uLCBkb2MsIHNldERvYywgZ2V0RG9jLCBnZXREb2NzLCBhZGREb2MsIHVwZGF0ZURvYywgZGVsZXRlRG9jLCBvblNuYXBzaG90LCBxdWVyeSB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5cbiAgY29uc3QgeyBQZW5MaW5lLCBTcGFya2xlcywgQ2hlY2ssIENoZXZyb25SaWdodCwgQ2hldnJvbkxlZnQsIEFycm93TGVmdCwgRWRpdDIsIFRyYXNoMiwgTWVudSwgQ29weSwgUmVmcmVzaEN3LCBYLCBBbGVydENpcmNsZSwgTW9vbiwgU3VuLCBMaXN0RmlsdGVyLCBDbG91ZFN1biwgTW9yZUhvcml6b250YWwsIExpbms6IExpbmtJY29uIH0gPSBMdWNpZGVJY29ucztcblxuICBjb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcImFwaUtleVwiOlwiQUl6YVN5Qkx3OTloZFl3elFLYVdGYWNWM0hkSUFzYV9hZEFuYTlrXCIsXCJhdXRoRG9tYWluXCI6XCJrb3RvYmFrby1lYzY4Ni5maXJlYmFzZWFwcC5jb21cIixcInByb2plY3RJZFwiOlwia290b2Jha28tZWM2ODZcIixcInN0b3JhZ2VCdWNrZXRcIjpcImtvdG9iYWtvLWVjNjg2LmZpcmViYXNlc3RvcmFnZS5hcHBcIixcIm1lc3NhZ2luZ1NlbmRlcklkXCI6XCI4MzY2MjAyNTc4MjRcIixcImFwcElkXCI6XCIxOjgzNjYyMDI1NzgyNDp3ZWI6NWE3NmJmMGU2NDZlMzdmMWZiNGE0NVwiLFwibWVhc3VyZW1lbnRJZFwiOlwiRy05WERDQ1oxQkRNXCJ9O1xuICBcbiAgLy8gLS0tIEZpcmViYXNlIEluaXQgLS0tXG4gIGNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuICBjb25zdCBhdXRoID0gZ2V0QXV0aChhcHApO1xuICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZShhcHApO1xuICBjb25zdCBhcHBJZCA9ICdrb3RvLW5vLWhhLWFwcCc7XG5cbiAgLy8gQXV0aCBJbml0IExvZ2ljOiDmsLjntprljJbjgpLmnIDlhKrlhYhcbiAgY29uc3QgaW5pdEF1dGhQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBzZXRQZXJzaXN0ZW5jZShhdXRoLCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKHVzZXIpID0+IHtcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh1c2VyKTtcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaWduSW5Bbm9ueW1vdXNseShhdXRoKS5jYXRjaCgoZSkgPT4gY29uc29sZS5lcnJvcihcIlNpZ25JbiBFcnJvcjpcIiwgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlBlcnNpc3RlbmNlIEluaXQgRXJyb3I6XCIsIGUpO1xuICAgICAgICBzaWduSW5Bbm9ueW1vdXNseShhdXRoKS50aGVuKGNyZWQgPT4gcmVzb2x2ZShjcmVkLnVzZXIpKTtcbiAgICAgIH0pO1xuICB9KTtcblxuICBjb25zdCBDQVRFR09SSUVTID0gW1wi5b+D44Gr5q6L44Gj44GfXCIsIFwi5paw44Gf44Gq5rCX44Gl44GNXCIsIFwi44GK44KC44GX44KN44GEXCIsIFwi5b2556uL44Gh44Gd44GGXCJdO1xuICBjb25zdCBMSU5LRURfVVNFUl9LRVkgPSAna290b2Jha29fbGlua2VkX3VzZXJfaWQnO1xuXG4gIC8vIC0tLSBDb25zdGFudHMgJiBIZWxwZXIgRnVuY3Rpb25zIC0tLVxuICBjb25zdCBnZW5lcmF0ZVNob3J0Q29kZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISktMTU5QUVJTVFVWV1hZWjIzNDU2Nzg5JztcbiAgICAgIGxldCByZXN1bHQgPSAnJztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSByZXN1bHQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xuICAgICAgcmVzdWx0ICs9ICctJztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSByZXN1bHQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBjb25zdCBTT0xBUl9URVJNUyA9IFtcbiAgICB7IG1vbnRoOiAxLCBkYXk6IDYsIG5hbWU6ICflsI/lr5InLCB5b21pOiAn44GX44KH44GG44GL44KTJywgZGVzYzogJ+WvkuOBleOBjOWOs+OBl+OBj+OBquOCiuWni+OCgeOCi+mgg+OAguWvkuOBruWFpeOCiuOBqOOCguiogOOCj+OCjOOBvuOBmeOAgicgfSxcbiAgICB7IG1vbnRoOiAxLCBkYXk6IDIwLCBuYW1lOiAn5aSn5a+SJywgeW9taTogJ+OBoOOBhOOBi+OCkycsIGRlc2M6ICfkuIDlubTjgafmnIDjgoLlr5LjgZXjgYzljrPjgZfjgYTpoIPjgILmrabpgZPjgoTkv67ooYzjgYzooYzjgo/jgozjgovmmYLmnJ/jgafjgZnjgIInIH0sXG4gICAgeyBtb250aDogMiwgZGF5OiA0LCBuYW1lOiAn56uL5pilJywgeW9taTogJ+OCiuOBo+OBl+OCheOCkycsIGRlc2M6ICfmmKXjga7msJfphY3jgYznq4vjgaHlp4vjgoHjgovpoIPjgILmmqbjga7kuIrjgafjga/mmKXjga7lp4vjgb7jgorjgafjgZnjgIInIH0sXG4gICAgeyBtb250aDogMiwgZGF5OiAxOSwgbmFtZTogJ+mbqOawtCcsIHlvbWk6ICfjgYbjgZnjgYQnLCBkZXNjOiAn6Zuq44GM6Zuo44Gr5aSJ44KP44KK44CB5rC344GM6Kej44GR44Gm5rC044Gr44Gq44KL6aCD44CC6L6y6ICV44Gu5rqW5YKZ44KS5aeL44KB44KL5pmC5pyf44Gn44GZ44CCJyB9LFxuICAgIHsgbW9udGg6IDMsIGRheTogNiwgbmFtZTogJ+WVk+ifhCcsIHlvbWk6ICfjgZHjgYTjgaHjgaQnLCBkZXNjOiAn5Yas44GU44KC44KK44GX44Gm44GE44Gf6Jmr44Gf44Gh44GM44CB5pil44Gu5pqW44GL44GV44Gr6KqY44KP44KM44Gm5Zyf44GL44KJ5Ye644Gm44GP44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDMsIGRheTogMjEsIG5hbWU6ICfmmKXliIYnLCB5b21pOiAn44GX44KF44KT44G244KTJywgZGVzYzogJ+aYvOOBqOWknOOBrumVt+OBleOBjOOBu+OBvOWQjOOBmOOBq+OBquOCi+aXpeOAguiHqueEtuOCkuensOOBiOOAgeeUn+eJqeOCkuaFiOOBl+OCgOaXpeOBp+OBmeOAgicgfSxcbiAgICB7IG1vbnRoOiA0LCBkYXk6IDUsIG5hbWU6ICfmuIXmmI4nLCB5b21pOiAn44Gb44GE44KB44GEJywgZGVzYzogJ+OBmeOBueOBpuOBruOCguOBruOBjOa4heOCieOBi+OBp+eUn+OBjeeUn+OBjeOBqOOBl+OBpuOBj+OCi+mgg+OAguiKseOBjOmWi+OBjeOAgemzpeOBjOatjOOBhOOBvuOBmeOAgicgfSxcbiAgICB7IG1vbnRoOiA0LCBkYXk6IDIwLCBuYW1lOiAn56mA6ZuoJywgeW9taTogJ+OBk+OBj+OBhicsIGRlc2M6ICfnqYDnianjgpLmvaTjgZnmmKXjga7pm6jjgYzpmY3jgovpoIPjgILnqK7jgb7jgY3jgavpganjgZfjgZ/mmYLmnJ/jgafjgZnjgIInIH0sXG4gICAgeyBtb250aDogNSwgZGF5OiA2LCBuYW1lOiAn56uL5aSPJywgeW9taTogJ+OCiuOBo+OBiycsIGRlc2M6ICflpI/jga7msJfphY3jgYzmhJ/jgZjjgonjgozlp4vjgoHjgovpoIPjgILmlrDnt5HjgYzjgb7jgbbjgZfjgY/jgIHniL3jgoTjgYvjgarpoqjjgYzlkLnjgY3jgb7jgZnjgIInIH0sXG4gICAgeyBtb250aDogNSwgZGF5OiAyMSwgbmFtZTogJ+Wwj+a6gCcsIHlvbWk6ICfjgZfjgofjgYbjgb7jgpMnLCBkZXNjOiAn6Zm95rCX44GM6Imv44GP44Gq44KK44CB6I2J5pyo44GM5oiQ6ZW344GX44Gm5ZGo5Zuy44Gr5rqA44Gh5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDYsIGRheTogNiwgbmFtZTogJ+iKkueoricsIHlvbWk6ICfjgbzjgYbjgZfjgoUnLCBkZXNjOiAn56iy44KE6bqm44Gq44Gp44CB56mC44Gu5Ye644KL56mA54mp44Gu56iu44KS44G+44GP6aCD44CC5qKF6Zuo5YWl44KK44Gu5pmC5pyf44Gn44KC44GC44KK44G+44GZ44CCJyB9LFxuICAgIHsgbW9udGg6IDYsIGRheTogMjEsIG5hbWU6ICflpI/oh7MnLCB5b21pOiAn44GS44GXJywgZGVzYzogJ+S4gOW5tOOBp+acgOOCguaYvOOBjOmVt+OBj+OAgeWknOOBjOefreOBhOaXpeOAguacrOagvOeahOOBquWkj+OBjOWni+OBvuOCiuOBvuOBmeOAgicgfSxcbiAgICB7IG1vbnRoOiA3LCBkYXk6IDcsIG5hbWU6ICflsI/mmpEnLCB5b21pOiAn44GX44KH44GG44GX44KHJywgZGVzYzogJ+aihembqOaYjuOBkeOBjOi/keOBpeOBjeOAgeaakeOBleOBjOasoeesrOOBq+acrOagvOeahOOBq+OBquOBo+OBpuOBj+OCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA3LCBkYXk6IDIzLCBuYW1lOiAn5aSn5pqRJywgeW9taTogJ+OBn+OBhOOBl+OChycsIGRlc2M6ICfkuIDlubTjgafmnIDjgoLmmpHjgZXjgYzljrPjgZfjgYTpoIPjgILlpI/jga7nm5vjgorjgpLmhJ/jgZjjgovmmYLmnJ/jgafjgZnjgIInIH0sXG4gICAgeyBtb250aDogOCwgZGF5OiA4LCBuYW1lOiAn56uL56eLJywgeW9taTogJ+OCiuOBo+OBl+OCheOBhicsIGRlc2M6ICfnp4vjga7msJfphY3jgYznq4vjgaHlp4vjgoHjgovpoIPjgILmmqbjga7kuIrjgafjga/jgZPjga7ml6XjgYvjgonnp4vjgavjgarjgorjgb7jgZnjgIInIH0sXG4gICAgeyBtb250aDogOCwgZGF5OiAyMywgbmFtZTogJ+WHpuaakScsIHlvbWk6ICfjgZfjgofjgZfjgocnLCBkZXNjOiAn5pqR44GV44GM5bOg44KS6LaK44GI44CB5pyd5aSV44Gr5ra85rCX44KS5oSf44GY44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDksIGRheTogOCwgbmFtZTogJ+eZvemcsicsIHlvbWk6ICfjga/jgY/jgo0nLCBkZXNjOiAn6I2J6Iqx44Gr5pyd6Zyy44GM5a6/44KK44CB55m944GP6Lyd44GE44Gm6KaL44GI44KL6aCD44CC56eL44Gu5rex44G+44KK44KS5oSf44GY5aeL44KB44G+44GZ44CCJyB9LFxuICAgIHsgbW9udGg6IDksIGRheTogMjMsIG5hbWU6ICfnp4vliIYnLCB5b21pOiAn44GX44KF44GG44G244KTJywgZGVzYzogJ+aYvOOBqOWknOOBrumVt+OBleOBjOWGjeOBs+OBu+OBvOWQjOOBmOOBq+OBquOCi+aXpeOAguelluWFiOOCkuaVrOOBhOOAgeS6oeOBj+OBquOBo+OBn+S6uuOCkuWBsuOBtuaXpeOBp+OBmeOAgicgfSxcbiAgICB7IG1vbnRoOiAxMCwgZGF5OiA4LCBuYW1lOiAn5a+S6ZyyJywgeW9taTogJ+OBi+OCk+OCjScsIGRlc2M6ICflhrfjgZ/jgYTpnLLjgYzpmY3jgorjgovpoIPjgILnp4vjgoLmt7Hjgb7jgorjgIHlj47nqavjga7mmYLmnJ/jgpLov47jgYjjgb7jgZnjgIInIH0sXG4gICAgeyBtb250aDogMTAsIGRheTogMjMsIG5hbWU6ICfpnJzpmY0nLCB5b21pOiAn44Gd44GG44GT44GGJywgZGVzYzogJ+mcnOOBjOmZjeOCiuWni+OCgeOCi+mgg+OAgueni+OBjOe1guOCj+OCiuOAgeWGrOOBrui/keOBpeOBjeOCkuaEn+OBmOOCi+aZguacn+OBp+OBmeOAgicgfSxcbiAgICB7IG1vbnRoOiAxMSwgZGF5OiA3LCBuYW1lOiAn56uL5YasJywgeW9taTogJ+OCiuOBo+OBqOOBhicsIGRlc2M6ICflhqzjga7msJfphY3jgYznq4vjgaHlp4vjgoHjgovpoIPjgILmmqbjga7kuIrjgafjga/lhqzjga7lp4vjgb7jgorjgafjgZnjgIInIH0sXG4gICAgeyBtb250aDogMTEsIGRheTogMjIsIG5hbWU6ICflsI/pm6onLCB5b21pOiAn44GX44KH44GG44Gb44GkJywgZGVzYzogJ+OCj+OBmuOBi+OBquOBjOOCiembquOBjOmZjeOCiuWni+OCgeOCi+mgg+OAguWvkuOBleOBjOacrOagvOWMluOBl+Wni+OCgeOBvuOBmeOAgicgfSxcbiAgICB7IG1vbnRoOiAxMiwgZGF5OiA3LCBuYW1lOiAn5aSn6ZuqJywgeW9taTogJ+OBn+OBhOOBm+OBpCcsIGRlc2M6ICfpm6rjgYzmv4DjgZfjgY/pmY3jgorlp4vjgoHjgovpoIPjgILlsbHjga7ls7DjgIXjga/pm6rjgavopobjgo/jgozjgb7jgZnjgIInIH0sXG4gICAgeyBtb250aDogMTIsIGRheTogMjIsIG5hbWU6ICflhqzoh7MnLCB5b21pOiAn44Go44GG44GYJywgZGVzYzogJ+S4gOW5tOOBp+acgOOCguaYvOOBjOefreOBj+OAgeWknOOBjOmVt+OBhOaXpeOAguOBk+OBruaXpeOCkuWig+OBq+aXpeOBjOmVt+OBj+OBquOBo+OBpuOBhOOBjeOBvuOBmeOAgicgfSxcbiAgXTtcblxuICBjb25zdCBNSUNST19TRUFTT05TID0gW1xuICAgIHsgbW9udGg6IDEsIGRheTogMSwgbmFtZTogJ+mbquS4i+WHuum6picsIHlvbWk6ICfjgobjgY3jgo/jgZ/jgorjgabjgoDjgY7jga7jgbPjgosnLCBkZXNjOiAn6Zuq44Gu5LiL44Gn6bqm44GM6Iq944KS5Ye644GZ6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDEsIGRheTogNiwgbmFtZTogJ+iKueS5g+aghCcsIHlvbWk6ICfjgZvjgorjgZnjgarjgo/jgaHjgZXjgYvjgYYnLCBkZXNjOiAn6Iq544GM5Ya344Gf44GE5rC06L6644Gn55ub44KT44Gr6IKy44Gk6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDEsIGRheTogMTEsIG5hbWU6ICfmsLTms4nli5UnLCB5b21pOiAn44GX44G/44Ga44GC44Gf44Gf44GL44KS44G144GP44KAJywgZGVzYzogJ+WcsOS4reOBruWHjeOBo+OBn+awtOOBjOWLleOBjeWni+OCgeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxLCBkYXk6IDE2LCBuYW1lOiAn6ZuJ5aeL6ZuKJywgeW9taTogJ+OBjeOBmOOBr+OBmOOCgeOBpuOBquOBjycsIGRlc2M6ICfpm4Tjga7pm4njgYzmsYLmhJvjga7jgZ/jgoHjgavps7TjgY3lp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMSwgZGF5OiAyMCwgbmFtZTogJ+asvuWGrOiPrycsIHlvbWk6ICfjgbXjgY3jga7jga/jgarjgZXjgY8nLCBkZXNjOiAn6Zuq44Gu5LiL44GL44KJ6JWX44Gu6Ja577yI44G144GN44Gu44Go44GG77yJ44GM6aGU44KS5Ye644GZ6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDEsIGRheTogMjUsIG5hbWU6ICfmsLTmsqLohbnloIUnLCB5b21pOiAn44GV44KP44G/44Ga44GT44GK44KK44Gk44KB44KLJywgZGVzYzogJ+ayouOBruawtOOBjOWOmuOBj+awt+OBq+mWieOBluOBleOCjOOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxLCBkYXk6IDMwLCBuYW1lOiAn6baP5aeL5LmzJywgeW9taTogJ+OBq+OCj+OBqOOCiuOBr+OBmOOCgeOBpuOBqOOChOOBq+OBpOOBjycsIGRlc2M6ICfpto/jgYzmmKXjga7msJfphY3jgpLmhJ/jgZjjgabljbXjgpLnlKPjgb/lp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMiwgZGF5OiA0LCBuYW1lOiAn5p2x6aKo6Kej5YeNJywgeW9taTogJ+OBr+OCi+OBi+OBnOOBk+OBiuOCiuOCkuOBqOOBjycsIGRlc2M6ICfmmKXjga7mmpbjgYvjgYTpoqjjgYzmsLfjgpLop6PjgYvjgZflp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMiwgZGF5OiA5LCBuYW1lOiAn6buE6bav552N552GJywgeW9taTogJ+OBhuOBkOOBhOOBmeOBquOBjycsIGRlc2M6ICfptq/jgYzlsbHph4zjgafps7TjgY3lp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMiwgZGF5OiAxNCwgbmFtZTogJ+mtmuS4iuawtycsIHlvbWk6ICfjgYbjgYrjgZPjgYrjgorjgpLjgYTjgZrjgosnLCBkZXNjOiAn5Ymy44KM44Gf5rC344Gu6ZaT44GL44KJ6a2a44GM6aOb44Gz6Lez44Gt44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDIsIGRheTogMTksIG5hbWU6ICflnJ/ohInmvaTotbcnLCB5b21pOiAn44Gk44Gh44Gu44GX44KH44GG44GG44KL44GK44GE44GK44GT44KLJywgZGVzYzogJ+mbqOOBjOmZjeOCiuOAgeS5vuOBhOOBn+Wcn+OBjOa5v+OCiuawl+OCkuWQq+OCgOmgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAyLCBkYXk6IDI0LCBuYW1lOiAn6Zye5aeL6Z2GJywgeW9taTogJ+OBi+OBmeOBv+OBr+OBmOOCgeOBpuOBn+OBquOBs+OBjycsIGRlc2M6ICfmmKXpnJ7jgYzlsbHph47jgavjgZ/jgarjgbPjgY3lp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMywgZGF5OiAxLCBuYW1lOiAn6I2J5pyo6JCM5YuVJywgeW9taTogJ+OBneOBhuOCguOBj+OCgeOBsOOBiOOBhOOBmuOCiycsIGRlc2M6ICfojYnmnKjjgYzoir3lkLnjgY3lp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMywgZGF5OiA2LCBuYW1lOiAn6J+E6Jmr5ZWT5oi4JywgeW9taTogJ+OBmeOBlOOCguOCiuOBruOCgOOBl+OBqOOCkuOBsuOCieOBjycsIGRlc2M6ICflhqzjgZTjgoLjgorjgZfjgabjgYTjgZ/omavjgYzlh7rjgabjgY/jgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMywgZGF5OiAxMSwgbmFtZTogJ+ahg+Wni+eskScsIHlvbWk6ICfjgoLjgoLjga/jgZjjgoHjgabjgZXjgY8nLCBkZXNjOiAn5qGD44Gu6Iqx44GM5ZKy44GN5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDMsIGRheTogMTYsIG5hbWU6ICfoj5zomavljJbonbYnLCB5b21pOiAn44Gq44KA44GX44Gh44KH44GG44Go44Gq44KLJywgZGVzYzogJ+mdkuiZq+OBjOe+veWMluOBl+OBpue0i+eZveidtuOBq+OBquOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAzLCBkYXk6IDIxLCBuYW1lOiAn6ZuA5aeL5bejJywgeW9taTogJ+OBmeOBmuOCgeOBr+OBmOOCgeOBpuOBmeOBj+OBhicsIGRlc2M6ICfpm4DjgYzlt6PkvZzjgorjgpLlp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMywgZGF5OiAyNiwgbmFtZTogJ+ahnOWni+mWiycsIHlvbWk6ICfjgZXjgY/jgonjga/jgZjjgoHjgabjgbLjgonjgY8nLCBkZXNjOiAn5qGc44Gu6Iqx44GM5ZKy44GN5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDMsIGRheTogMzEsIG5hbWU6ICfpm7fkuYPnmbrlo7AnLCB5b21pOiAn44GL44G/44Gq44KK44GZ44Gq44KP44Gh44GT44GI44KS44Gv44Gj44GZJywgZGVzYzogJ+mBoOOBj+OBp+mbt+OBrumfs+OBjOiBnuOBk+OBiOWni+OCgeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA0LCBkYXk6IDUsIG5hbWU6ICfnjoTps6Xoh7MnLCB5b21pOiAn44Gk44Gw44KB44GN44Gf44KLJywgZGVzYzogJ+eHleOBjOWNl+OBi+OCieOChOOBo+OBpuadpeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA0LCBkYXk6IDEwLCBuYW1lOiAn6bS76ZuB5YyXJywgeW9taTogJ+OBk+OBhuOBjOOCk+OBi+OBiOOCiycsIGRlc2M6ICfpm4HjgYzljJfjgbjluLDjgaPjgabjgYTjgY/poIPjgIInIH0sXG4gICAgeyBtb250aDogNCwgZGF5OiAxNSwgbmFtZTogJ+iZueWni+imiycsIHlvbWk6ICfjgavjgZjjga/jgZjjgoHjgabjgYLjgonjgo/jgosnLCBkZXNjOiAn6Zuo5LiK44GM44KK44Gr6Jm544GM6KaL44GI5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDQsIGRheTogMjAsIG5hbWU6ICfoka3lp4vnlJ8nLCB5b21pOiAn44GC44GX44Gv44GY44KB44Gm44GX44KH44GG44GaJywgZGVzYzogJ+iRpuOBjOiKveOCkuWQueOBjeWni+OCgeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA0LCBkYXk6IDI1LCBuYW1lOiAn6Zyc5q2i5Ye66IuXJywgeW9taTogJ+OBl+OCguOChOOBv+OBpuOBquOBiOOBhOOBmuOCiycsIGRlc2M6ICfpnJzjgYzpmY3jgorjgarjgY/jgarjgoroi5fjgYzogrLjgaTpoIPjgIInIH0sXG4gICAgeyBtb250aDogNCwgZGF5OiAzMCwgbmFtZTogJ+eJoeS4ueiPrycsIHlvbWk6ICfjgbzjgZ/jgpPjga/jgarjgZXjgY8nLCBkZXNjOiAn54mh5Li544Gu6Iqx44GM5ZKy44GP6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDUsIGRheTogNiwgbmFtZTogJ+ibmeWni+mztCcsIHlvbWk6ICfjgYvjgo/jgZrjga/jgZjjgoHjgabjgarjgY8nLCBkZXNjOiAn6JuZ44GM6bO044GN5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDUsIGRheTogMTEsIG5hbWU6ICfomq/ompPlh7onLCB5b21pOiAn44G/44G/44Ga44GE44Ga44KLJywgZGVzYzogJ+iar+iak+OBjOWcsOS4iuOBq+WHuuOBpuOBj+OCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA1LCBkYXk6IDE2LCBuYW1lOiAn56u556yL55SfJywgeW9taTogJ+OBn+OBkeOBruOBk+OBl+OCh+OBhuOBmicsIGRlc2M6ICfnrY3jgYznlJ/jgYjjgabjgY/jgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogNSwgZGF5OiAyMSwgbmFtZTogJ+ialei1t+mjn+ahkScsIHlvbWk6ICfjgYvjgYTjgZPjgYrjgY3jgabjgY/jgo/jgpLjga/jgoAnLCBkZXNjOiAn6JqV44GM5qGR44KS55ub44KT44Gr6aOf44G55aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDUsIGRheTogMjYsIG5hbWU6ICfntIXoirHmoIQnLCB5b21pOiAn44G544Gr44Gw44Gq44GV44GL44GGJywgZGVzYzogJ+e0heiKseOBjOebm+OCk+OBq+WSsuOBj+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA1LCBkYXk6IDMxLCBuYW1lOiAn6bqm56eL6IezJywgeW9taTogJ+OCgOOBjuOBruOBqOOBjeOBhOOBn+OCiycsIGRlc2M6ICfpuqbjgYznhp/jgZfjgIHlj47nqavjgpLov47jgYjjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogNiwgZGF5OiA2LCBuYW1lOiAn6J+36J6C55SfJywgeW9taTogJ+OBi+OBvuOBjeOCiuOBl+OCh+OBhuOBmicsIGRlc2M6ICfjgqvjg57jgq3jg6rjgYznlJ/jgb7jgozjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogNiwgZGF5OiAxMSwgbmFtZTogJ+iFkOiNieeCuuibjScsIHlvbWk6ICfjgY/jgZXjgozjgZ/jgovjgY/jgZXjgbvjgZ/jgovjgajjgarjgosnLCBkZXNjOiAn6JuN44GM6aOb44Gz5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDYsIGRheTogMTYsIG5hbWU6ICfmooXlrZDpu4QnLCB5b21pOiAn44GG44KB44Gu44G/44GN44Gw44KAJywgZGVzYzogJ+aiheOBruWun+OBjOm7hOiJsuOBj+eGn+OBmemgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA2LCBkYXk6IDIxLCBuYW1lOiAn5LmD5p2x5p6vJywgeW9taTogJ+OBquOBpOOBi+OCjOOBj+OBleOBi+OCi+OCiycsIGRlc2M6ICflpI/mnq/ojYnvvIjjgYbjgaTjgbzjgZDjgZXvvInjgYzmnq/jgozjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogNiwgZGF5OiAyNiwgbmFtZTogJ+iPluiSsuiPrycsIHlvbWk6ICfjgYLjgoTjgoHjga/jgarjgZXjgY8nLCBkZXNjOiAn44GC44KE44KB44Gu6Iqx44GM5ZKy44GP6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDcsIGRheTogMiwgbmFtZTogJ+WNiuWkj+eUnycsIHlvbWk6ICfjga/jgpPjgZLjgZfjgofjgYbjgZonLCBkZXNjOiAn5Y2K5aSP44GM55Sf44GI5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDcsIGRheTogNywgbmFtZTogJ+a4qemiqOiHsycsIHlvbWk6ICfjgYLjgaTjgYvjgZzjgYTjgZ/jgosnLCBkZXNjOiAn5pqW44GL44GE6aKo44GM5ZC544GE44Gm5p2l44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDcsIGRheTogMTIsIG5hbWU6ICfok67lp4vplosnLCB5b21pOiAn44Gv44GZ44Gv44GY44KB44Gm44Gy44KJ44GPJywgZGVzYzogJ+iTruOBruiKseOBjOmWi+OBjeWni+OCgeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA3LCBkYXk6IDE3LCBuYW1lOiAn6be55LmD5a2m57+SJywgeW9taTogJ+OBn+OBi+OBmeOBquOCj+OBoeOCj+OBluOCkuOBquOCieOBhicsIGRlc2M6ICfpt7njga7lubzps6XjgYzpo5vjgbbnt7Tnv5LjgpLjgZnjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogNywgZGF5OiAyMywgbmFtZTogJ+ahkOWni+e1kOiKsScsIHlvbWk6ICfjgY3jgorjga/jgZjjgoHjgabjga/jgarjgpLjgoDjgZnjgbYnLCBkZXNjOiAn5qGQ44Gu5a6f44GM44Gq44KK5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDcsIGRheTogMjgsIG5hbWU6ICflnJ/mvaTmur3mmpEnLCB5b21pOiAn44Gk44Gh44GG44KL44GK44GG44Gm44KA44GX44GC44Gk44GXJywgZGVzYzogJ+Wcn+OBjOa5v+OBo+OBpuiSuOOBl+aakeOBj+OBquOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA4LCBkYXk6IDIsIG5hbWU6ICflpKfpm6jmmYLooYwnLCB5b21pOiAn44Gf44GE44GG44Go44GN44Gp44GN44G144KLJywgZGVzYzogJ+aZguOBqOOBl+OBpuWkp+mbqOOBjOmZjeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA4LCBkYXk6IDgsIG5hbWU6ICfmtrzpoqjoh7MnLCB5b21pOiAn44GZ44Ga44GL44Gc44GE44Gf44KLJywgZGVzYzogJ+a2vOOBl+OBhOmiqOOBjOeri+OBoeWni+OCgeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA4LCBkYXk6IDEzLCBuYW1lOiAn5a+S6J2J6bO0JywgeW9taTogJ+OBsuOBkOOCieOBl+OBquOBjycsIGRlc2M6ICfjg5LjgrDjg6njgrfjgYzps7TjgY3lp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogOCwgZGF5OiAxOCwgbmFtZTogJ+iSmemcp+WNh+mZjScsIHlvbWk6ICfjgbXjgYvjgY3jgY3jgorjgb7jgajjgYYnLCBkZXNjOiAn5rex44GE6Zyn44GM56uL44Gh6L6844KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDgsIGRheTogMjMsIG5hbWU6ICfntr/mn47plosnLCB5b21pOiAn44KP44Gf44Gu44Gv44Gq44GX44G544Gy44KJ44GPJywgZGVzYzogJ+e2v+OCkuWMheOCgOOCrOOCr+OBjOmWi+OBj+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA4LCBkYXk6IDI4LCBuYW1lOiAn5aSp5Zyw5aeL57KbJywgeW9taTogJ+OBpuOCk+OBoeOBr+OBmOOCgeOBpuOBleOCgOOBlycsIGRlc2M6ICfjgojjgYbjgoTjgY/mmpHjgZXjgYzpjq7jgb7jgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogOSwgZGF5OiAyLCBuYW1lOiAn56a+5LmD55m7JywgeW9taTogJ+OBk+OBj+OCguOBruOBmeOBquOCj+OBoeOBv+OBruOCiycsIGRlc2M6ICfnqLLjgYzlrp/jgorjgIHlj47nqavjgpLov47jgYjjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogOSwgZGF5OiA4LCBuYW1lOiAn6I2J6Zyy55m9JywgeW9taTogJ+OBj+OBleOBruOBpOOChuOBl+OCjeOBlycsIGRlc2M6ICfojYnjgavpmY3jgorjgZ/pnLLjgYznmb3jgY/lhYnjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogOSwgZGF5OiAxMywgbmFtZTogJ+m2uum0kumztCcsIHlvbWk6ICfjgZvjgY3jgozjgYTjgarjgY8nLCBkZXNjOiAn6ba66bSS77yI44Gb44GN44KM44GE77yJ44GM6bO044GN5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDksIGRheTogMTgsIG5hbWU6ICfnjoTps6XljrsnLCB5b21pOiAn44Gk44Gw44KB44GV44KLJywgZGVzYzogJ+eHleOBjOWNl+OBuOW4sOOBo+OBpuihjOOBj+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiA5LCBkYXk6IDIzLCBuYW1lOiAn6Zu35LmD5Y+O5aOwJywgeW9taTogJ+OBi+OBv+OBquOCiuOBmeOBquOCj+OBoeOBk+OBiOOCkuOBiuOBleOCgCcsIGRlc2M6ICfpm7fjgYzps7TjgonjgarjgY/jgarjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogOSwgZGF5OiAyOCwgbmFtZTogJ+ifhOiZq+Wdj+aIuCcsIHlvbWk6ICfjgoDjgZfjgYvjgY/jgozjgabjgajjgpLjgbXjgZXjgZAnLCBkZXNjOiAn6Jmr44GM5Zyf5Lit44Gr5r2c44KK44CB5YWl44KK5Y+j44KS5aGe44GQ6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDEwLCBkYXk6IDMsIG5hbWU6ICfmsLTlp4vmtrgnLCB5b21pOiAn44G/44Ga44Gv44GY44KB44Gm44GL44KLJywgZGVzYzogJ+eUsOeVkeOBruawtOOCkuaKnOOBhOOBpuW5suOBmemgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxMCwgZGF5OiA4LCBuYW1lOiAn6bS76ZuB5p2lJywgeW9taTogJ+OBk+OBhuOBjOOCk+OBjeOBn+OCiycsIGRlc2M6ICfpm4HjgYzljJfjgYvjgonmuKHjgaPjgabmnaXjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMTAsIGRheTogMTMsIG5hbWU6ICfoj4roirHplosnLCB5b21pOiAn44GN44GP44Gu44Gv44Gq44Gy44KJ44GPJywgZGVzYzogJ+iPiuOBruiKseOBjOWSsuOBj+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxMCwgZGF5OiAxOCwgbmFtZTogJ+ifi+ifgOWcqOaIuCcsIHlvbWk6ICfjgY3jgorjgY7jgorjgZnjgajjgavjgYLjgoonLCBkZXNjOiAn44Kt44Oq44Ku44Oq44K544GM5oi45Y+j44Gn6bO044GP6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDEwLCBkYXk6IDIzLCBuYW1lOiAn6Zyc5aeL6ZmNJywgeW9taTogJ+OBl+OCguOBr+OBmOOCgeOBpuOBteOCiycsIGRlc2M6ICfpnJzjgYzpmY3jgorlp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMTAsIGRheTogMjgsIG5hbWU6ICfpnI7mmYLmlr0nLCB5b21pOiAn44GT44GV44KB44Go44GN44Gp44GN44G144KLJywgZGVzYzogJ+Wwj+mbqOOBjOOBl+OBqOOBl+OBqOmZjeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxMSwgZGF5OiAyLCBuYW1lOiAn5qWT6JSm6buEJywgeW9taTogJ+OCguOBv+OBmOOBpOOBn+OBjeOBsOOCgCcsIGRlc2M6ICfntIXokYnjgoTolKbjgYzoibLjgaXjgY/poIPjgIInIH0sXG4gICAgeyBtb250aDogMTEsIGRheTogNywgbmFtZTogJ+WxseiMtuWni+mWiycsIHlvbWk6ICfjgaTjgbDjgY3jga/jgZjjgoHjgabjgbLjgonjgY8nLCBkZXNjOiAn5bGx6Iy26Iqx44GM5ZKy44GN5aeL44KB44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDExLCBkYXk6IDEyLCBuYW1lOiAn5Zyw5aeL5YeNJywgeW9taTogJ+OBoeOBr+OBmOOCgeOBpuOBk+OBiuOCiycsIGRlc2M6ICflpKflnLDjgYzlh43jgorlp4vjgoHjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMTEsIGRheTogMTcsIG5hbWU6ICfph5Hnm57pppknLCB5b21pOiAn44GN44KT44Gb44KT44GL44GV44GPJywgZGVzYzogJ+awtOS7meOBruiKseOBjOWSsuOBjemmmeOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxMSwgZGF5OiAyMiwgbmFtZTogJ+iZueiUteS4jeimiycsIHlvbWk6ICfjgavjgZjjgYvjgY/jgozjgabjgb/jgYjjgZonLCBkZXNjOiAn6Jm544KS6KaL44GL44GR44Gq44GP44Gq44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDExLCBkYXk6IDI3LCBuYW1lOiAn5pyU6aKo5omV6JGJJywgeW9taTogJ+OBjeOBn+OBi+OBnOOBk+OBruOBr+OCkuOBr+OCieOBhicsIGRlc2M6ICfljJfpoqjjgYzmnKjjga7okYnjgpLmiZXjgYTokL3jgajjgZnpoIPjgIInIH0sXG4gICAgeyBtb250aDogMTIsIGRheTogMiwgbmFtZTogJ+apmOWni+m7hCcsIHlvbWk6ICfjgZ/jgaHjgbDjgarjga/jgZjjgoHjgabjgY3jgbDjgoAnLCBkZXNjOiAn5qmY44Gu5a6f44GM6buE6Imy44GP6Imy44Gl44GP6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDEyLCBkYXk6IDcsIG5hbWU6ICfplonloZ7miJDlhqwnLCB5b21pOiAn44Gd44KJ44GV44KA44GP44G144KG44Go44Gq44KLJywgZGVzYzogJ+WkqeWcsOOBruawl+OBjOWhnuOBjOOCiuWGrOOBqOOBquOCi+mgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxMiwgZGF5OiAxMiwgbmFtZTogJ+eGiuifhOeptCcsIHlvbWk6ICfjgY/jgb7jgYLjgarjgavjgZPjgoLjgosnLCBkZXNjOiAn54aK44GM56m044Gr5YWl44Gj44Gm5Yas55yg44GZ44KL6aCD44CCJyB9LFxuICAgIHsgbW9udGg6IDEyLCBkYXk6IDE3LCBuYW1lOiAn6bGW6a2a576kJywgeW9taTogJ+OBleOBkeOBruOBhuOBiuOCgOOCieOBjOOCiycsIGRlc2M6ICfprq3jgYznvqTjgYzjgaPjgablt53jgpLkuIrjgovpoIPjgIInIH0sXG4gICAgeyBtb250aDogMTIsIGRheTogMjIsIG5hbWU6ICfkuYPmnbHnlJ8nLCB5b21pOiAn44Gq44Gk44GL44KM44GP44GV44GX44KH44GG44GaJywgZGVzYzogJ+Wkj+aer+iNie+8iOOBhuOBpOOBvOOBkOOBle+8ieOBjOiKveOCkuWHuuOBmemgg+OAgicgfSxcbiAgICB7IG1vbnRoOiAxMiwgZGF5OiAyNywgbmFtZTogJ+m6i+inkuinoycsIHlvbWk6ICfjgYrjgYrjgZfjgYvjga7jgaTjga7jgYrjgaTjgosnLCBkZXNjOiAn5aSn6bm/44Gu6KeS44GM6JC944Gh44KL6aCD44CCJyB9LFxuICBdO1xuXG4gIGNvbnN0IGdldFNlYXNvbkluZm8gPSAoZGF0ZSkgPT4ge1xuICAgIGNvbnN0IG0gPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIGNvbnN0IGQgPSBkYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBjdXJyZW50VmFsID0gbSAqIDEwMCArIGQ7XG4gICAgbGV0IHNvbGFyVGVybSA9IFNPTEFSX1RFUk1TW1NPTEFSX1RFUk1TLmxlbmd0aCAtIDFdOyBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFNPTEFSX1RFUk1TLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNWYWwgPSBTT0xBUl9URVJNU1tpXS5tb250aCAqIDEwMCArIFNPTEFSX1RFUk1TW2ldLmRheTtcbiAgICAgICAgaWYgKGN1cnJlbnRWYWwgPj0gc1ZhbCkgc29sYXJUZXJtID0gU09MQVJfVEVSTVNbaV07IGVsc2UgYnJlYWs7XG4gICAgfVxuICAgIGlmIChjdXJyZW50VmFsIDwgU09MQVJfVEVSTVNbMF0ubW9udGggKiAxMDAgKyBTT0xBUl9URVJNU1swXS5kYXkpIHtcbiAgICAgICAgc29sYXJUZXJtID0gU09MQVJfVEVSTVNbU09MQVJfVEVSTVMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIGxldCBtaWNyb1NlYXNvbiA9IE1JQ1JPX1NFQVNPTlNbTUlDUk9fU0VBU09OUy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1JQ1JPX1NFQVNPTlMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc1ZhbCA9IE1JQ1JPX1NFQVNPTlNbaV0ubW9udGggKiAxMDAgKyBNSUNST19TRUFTT05TW2ldLmRheTtcbiAgICAgICAgaWYgKGN1cnJlbnRWYWwgPj0gc1ZhbCkgbWljcm9TZWFzb24gPSBNSUNST19TRUFTT05TW2ldOyBlbHNlIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoY3VycmVudFZhbCA8IE1JQ1JPX1NFQVNPTlNbMF0ubW9udGggKiAxMDAgKyBNSUNST19TRUFTT05TWzBdLmRheSkge1xuICAgICAgICBtaWNyb1NlYXNvbiA9IE1JQ1JPX1NFQVNPTlNbTUlDUk9fU0VBU09OUy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHsgc29sYXJUZXJtLCBtaWNyb1NlYXNvbiB9O1xuICB9O1xuXG4gIC8vIC0tLSBDb21wb25lbnRzIC0tLVxuXG4gIGNvbnN0IEhlYWRlciA9ICh7IG9uVGl0bGVDbGljaywgbGVmdEFjdGlvbnMsIHJpZ2h0QWN0aW9ucyB9KSA9PiAoXG4gICAgICA8aGVhZGVyIGNsYXNzTmFtZT1cImZpeGVkIHRvcC0wIGxlZnQtMCByaWdodC0wIHotNTAgaC0xNiBiZy1zdG9uZS01MC85MCBkYXJrOmJnLXN0b25lLTkwMC85MCBiYWNrZHJvcC1ibHVyLW1kIGJvcmRlci1iIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtODAwIHB4LTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHNoYWRvdy1zbSB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMjAgZmxleCBqdXN0aWZ5LXN0YXJ0IGl0ZW1zLWNlbnRlclwiPntsZWZ0QWN0aW9uc308L2Rpdj5cbiAgICAgICAgICA8aDEgb25DbGljaz17b25UaXRsZUNsaWNrfSBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VyaWYgZm9udC1ib2xkIHRyYWNraW5nLXRpZ2h0IHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAgY3Vyc29yLWRlZmF1bHQgc2VsZWN0LW5vbmUgYWN0aXZlOm9wYWNpdHktNzAgdHJhbnNpdGlvbi1vcGFjaXR5XCIgdGl0bGU9XCLjg4jjg6rjg5fjg6vjgq/jg6rjg4Pjgq/jgafjg4Djgqbjg7Pjg63jg7zjg4lcIj5Lb3RvYmFrbzwvaDE+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIwIGZsZXgganVzdGlmeS1lbmQgaXRlbXMtY2VudGVyIGdhcC0xXCI+e3JpZ2h0QWN0aW9uc308L2Rpdj5cbiAgICAgIDwvaGVhZGVyPlxuICApO1xuXG4gIGNvbnN0IFN5bmNTZXR0aW5nc1ZpZXcgPSAoeyBjdXJyZW50U2hvcnRDb2RlLCBpc0xvYWRpbmdDb2RlLCBlcnJvck1zZywgb25SZXRyeUNvZGUsIG9uU3luY0NvZGUsIG9uUmVxdWVzdFJlc2V0LCBzaG93VG9hc3QsIGlzU3luY2VkLCBvblVuc3luYyB9KSA9PiB7XG4gICAgICBjb25zdCBbaW5wdXRJZCwgc2V0SW5wdXRJZF0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgICBjb25zdCBoYW5kbGVDb3B5ID0gKCkgPT4geyBpZiAoIWN1cnJlbnRTaG9ydENvZGUgfHwgY3VycmVudFNob3J0Q29kZS5sZW5ndGggPCA4KSByZXR1cm47IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGN1cnJlbnRTaG9ydENvZGUpOyBzaG93VG9hc3QoXCLlkIzmnJ/jgrPjg7zjg4njgpLjgrPjg5Tjg7zjgZfjgb7jgZfjgZ9cIik7IH07XG4gICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgbWF4LXctbWQgbXgtYXV0byBwLTYgcHQtNiBwYi0yNCBhbmltYXRlLWZhZGUtaW4gb3ZlcmZsb3cteS1hdXRvIG5vLXNjcm9sbGJhclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LThcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC1zdG9uZS01MDAgZGFyazp0ZXh0LXN0b25lLTQwMCB0ZXh0LVsxMHB4XSBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHVwcGVyY2FzZSBibG9jayBtbC0xXCI+e2lzU3luY2VkID8gJ+WQjOacn+S4reOBruOCs+ODvOODiScgOiAn44GC44Gq44Gf44Gu5ZCM5pyf44Kz44O844OJJ308L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcC00IHJvdW5kZWQteGwgYm9yZGVyIHNoYWRvdy1zbSB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDAgJHtpc1N5bmNlZCA/ICdiZy1zdG9uZS0xMDAgZGFyazpiZy1zdG9uZS04MDAgYm9yZGVyLXN0b25lLTMwMCBkYXJrOmJvcmRlci1zdG9uZS02MDAnIDogJ2JnLXdoaXRlIGRhcms6Ymctc3RvbmUtODAwIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtNzAwJ31gfT5cbiAgICAgICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT1cImZsZXgtZ3JvdyB0ZXh0LXhsIGZvbnQtbW9ubyBmb250LWJvbGQgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCB0cmFja2luZy10aWdodGVyIHRleHQtY2VudGVyXCI+e2lzTG9hZGluZ0NvZGUgPyAnLi4uJyA6IChlcnJvck1zZyA/ICfjgqjjg6njg7wnIDogY3VycmVudFNob3J0Q29kZSl9PC9jb2RlPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVDb3B5fSBkaXNhYmxlZD17IWN1cnJlbnRTaG9ydENvZGUgfHwgY3VycmVudFNob3J0Q29kZS5pbmNsdWRlcygnLi4uJyl9IGNsYXNzTmFtZT1cInAtMiB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMjAwIGJnLXN0b25lLTUwIGRhcms6Ymctc3RvbmUtNzAwIHJvdW5kZWQtbGcgYWN0aXZlOnNjYWxlLTk1IHRyYW5zaXRpb24tYWxsIGRpc2FibGVkOm9wYWNpdHktMzBcIj48Q29weSBzaXplPXsyMH0gLz48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7ZXJyb3JNc2cgJiYgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiB0ZXh0LXJlZC00MDAgdGV4dC14cyBtdC0yXCI+PEFsZXJ0Q2lyY2xlIHNpemU9ezE0fSAvPjxzcGFuPntlcnJvck1zZ308L3NwYW4+PGJ1dHRvbiBvbkNsaWNrPXtvblJldHJ5Q29kZX0gY2xhc3NOYW1lPVwidW5kZXJsaW5lXCI+5YaN6Kmm6KGMPC9idXR0b24+PC9kaXY+fVxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgbGVhZGluZy1yZWxheGVkIGl0YWxpYyBweC0xXCI+e2lzU3luY2VkID8gJ+ePvuWcqOOAgeWQjOacn+OBl+OBn+err+acq+OBruODh+ODvOOCv+OCkuWFseacieOBl+OBpuOBhOOBvuOBmeOAgue3qOmbhuOCguWPr+iDveOBp+OBmeOAgicgOiAn44GT44GuOOaWh+Wtl+OCkuWIpeOBruerr+acq+OBp+WFpeWKm+OBmeOCi+OBqOOAgeiogOiRieOCkuWQjOacn+OBp+OBjeOBvuOBmeOAgid9PC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAge2lzU3luY2VkID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC00IGJvcmRlci10IGJvcmRlci1zdG9uZS0xMDAgZGFyazpib3JkZXItc3RvbmUtODAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblVuc3luY30gY2xhc3NOYW1lPVwidy1mdWxsIHB5LTQgYmctc3RvbmUtODAwIGRhcms6Ymctc3RvbmUtNzAwIHRleHQtc3RvbmUtNTAgcm91bmRlZC14bCBmb250LWJvbGQgdGV4dC1zbSB0cmFja2luZy13aWRlc3QgdHJhbnNpdGlvbi1hbGwgYWN0aXZlOnNjYWxlLVswLjk4XSBzaGFkb3ctbWQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtJY29uIHNpemU9ezE2fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj7lkIzmnJ/jgpLop6PpmaTjgZfjgaboh6rliIbjga7jg4fjg7zjgr/jgavmiLvjgos8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlclwiPjxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlci10IGJvcmRlci1zdG9uZS0xMDAgZGFyazpib3JkZXItc3RvbmUtODAwXCI+PC9kaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXgganVzdGlmeS1jZW50ZXIgdGV4dC1bMTBweF0gdXBwZXJjYXNlXCI+PHNwYW4gY2xhc3NOYW1lPVwiYmctc3RvbmUtNTAgZGFyazpiZy1zdG9uZS05MDAgcHgtMyB0ZXh0LXN0b25lLTMwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGZvbnQtYm9sZCB0cmFja2luZy13aWRlc3RcIj5vcjwvc3Bhbj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC1zdG9uZS01MDAgZGFyazp0ZXh0LXN0b25lLTQwMCB0ZXh0LVsxMHB4XSBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHVwcGVyY2FzZSBibG9jayBtbC0xXCI+5Yil44Gu44Kz44O844OJ44Go5ZCM5pyf44GZ44KLPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPXtpbnB1dElkfSBvbkNoYW5nZT17KGUpID0+IHNldElucHV0SWQoZS50YXJnZXQudmFsdWUudG9VcHBlckNhc2UoKSl9IHBsYWNlaG9sZGVyPVwi5L6LOiBBQkNELTEyMzRcIiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctd2hpdGUgZGFyazpiZy1zdG9uZS04MDAgYm9yZGVyIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtNzAwIHAtNCByb3VuZGVkLXhsIHRleHQtbGcgdGV4dC1jZW50ZXIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1zdG9uZS00MDAgZGFyazpmb2N1czpib3JkZXItc3RvbmUtNTAwIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAgZm9udC1tb25vIGZvbnQtYm9sZCBzaGFkb3ctc20gdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMzAwXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25TeW5jQ29kZShpbnB1dElkKX0gZGlzYWJsZWQ9eyFpbnB1dElkLnRyaW0oKSB8fCBpbnB1dElkLmxlbmd0aCA8IDl9IGNsYXNzTmFtZT1cInctZnVsbCBweS00IGJnLXN0b25lLTkwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIGRhcms6dGV4dC1zdG9uZS0yMDAgcm91bmRlZC14bCBmb250LWJvbGQgdGV4dC1zbSB0cmFja2luZy13aWRlc3QgZGlzYWJsZWQ6b3BhY2l0eS0zMCB0cmFuc2l0aW9uLWFsbCBhY3RpdmU6c2NhbGUtWzAuOThdIHNoYWRvdy1tZCBob3ZlcjpiZy1zdG9uZS04MDAgZGFyazpob3ZlcjpiZy1zdG9uZS02MDBcIj7lkIzmnJ/jgpLplovlp4vjgZnjgos8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgbGVhZGluZy1yZWxheGVkIGl0YWxpYyBweC0xIHRleHQtY2VudGVyXCI+4oC75YWl5Yqb44GX44Gf44Kz44O844OJ44Gu44OH44O844K/44Gr5YiH44KK5pu/44KP44KK44G+44GZ44CCPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC04IG10LTggYm9yZGVyLXQgYm9yZGVyLXN0b25lLTEwMCBkYXJrOmJvcmRlci1zdG9uZS04MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25SZXF1ZXN0UmVzZXR9IGNsYXNzTmFtZT1cInctZnVsbCBweS00IHRleHQtcmVkLTQwMCBob3Zlcjp0ZXh0LXJlZC02MDAgZGFyazpob3Zlcjp0ZXh0LXJlZC0zMDAgdGV4dC14cyBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yXCI+PFRyYXNoMiBzaXplPXsxNn0gLz48c3Bhbj7lhajjg4fjg7zjgr/jgpLliYrpmaTjgZfjgabliJ3mnJ/ljJY8L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gIH07XG5cbiAgY29uc3QgVG9hc3QgPSAoeyBtZXNzYWdlLCBpc1Zpc2libGUsIG9uSGlkZSB9KSA9PiB7XG4gICAgICB1c2VFZmZlY3QoKCkgPT4geyBpZiAoaXNWaXNpYmxlKSB7IGNvbnN0IHRpbWVyID0gc2V0VGltZW91dChvbkhpZGUsIDIwMDApOyByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTsgfSB9LCBbaXNWaXNpYmxlLCBvbkhpZGVdKTtcbiAgICAgIGlmICghaXNWaXNpYmxlKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC0yMCBsZWZ0LTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS14LTEvMiB6LVsxMDBdIGFuaW1hdGUtZmFkZS1pbiBwb2ludGVyLWV2ZW50cy1ub25lXCI+PGRpdiBjbGFzc05hbWU9XCJiZy1zdG9uZS04MDAgZGFyazpiZy1zdG9uZS03MDAgdGV4dC1zdG9uZS01MCBkYXJrOnRleHQtc3RvbmUtMTAwIHB4LTQgcHktMiByb3VuZGVkLWZ1bGwgc2hhZG93LWxnIHRleHQtc20gZm9udC1tZWRpdW0gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYm9yZGVyIGJvcmRlci1zdG9uZS03MDAgZGFyazpib3JkZXItc3RvbmUtNjAwXCI+PENoZWNrIHNpemU9ezE0fSAvPnttZXNzYWdlfTwvZGl2PjwvZGl2PjtcbiAgfTtcblxuICBjb25zdCBGaWx0ZXJTaGVldCA9ICh7IGlzVmlzaWJsZSwgY3VycmVudENhdGVnb3J5LCBvblNlbGVjdCwgb25DbG9zZSB9KSA9PiB7XG4gICAgaWYgKCFpc1Zpc2libGUpIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei1bNjBdIGZsZXggaXRlbXMtZW5kIGp1c3RpZnktY2VudGVyIHNtOml0ZW1zLWNlbnRlciBwLTQgYW5pbWF0ZS1mYWRlLWluXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctc3RvbmUtOTAwLzIwIGRhcms6YmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbVwiIG9uQ2xpY2s9e29uQ2xvc2V9PjwvZGl2PlxuICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctc20gYmctd2hpdGUgZGFyazpiZy1zdG9uZS04NTAgcm91bmRlZC0yeGwgcC02IHNoYWRvdy14bCBhbmltYXRlLWZsb2F0LXVwIHNwYWNlLXktMiBtYXgtaC1bODB2aF0gb3ZlcmZsb3cteS1hdXRvIG5vLXNjcm9sbGJhclwiPlxuICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LWJvbGQgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0IG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj48TGlzdEZpbHRlciBzaXplPXsxNH0gLz7ooajnpLrjgZnjgovoqIDokYnjgpLpgbjjgbY8L2gzPlxuICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IG9uU2VsZWN0KG51bGwpfSBjbGFzc05hbWU9e2B3LWZ1bGwgdGV4dC1sZWZ0IHAtNCByb3VuZGVkLXhsIHRyYW5zaXRpb24tYWxsIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciAkeyFjdXJyZW50Q2F0ZWdvcnkgPyAnYmctc3RvbmUtMTAwIGRhcms6Ymctc3RvbmUtODAwIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMjAwJyA6ICd0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtNDAwIGhvdmVyOmJnLXN0b25lLTUwIGRhcms6aG92ZXI6Ymctc3RvbmUtODAwJ31gfT48c3Bhbj7jgZnjgbnjgabjga7oqIDokYk8L3NwYW4+eyFjdXJyZW50Q2F0ZWdvcnkgJiYgPENoZWNrIHNpemU9ezE2fSAvPn08L2J1dHRvbj5cbiAgICAgICAgICAge0NBVEVHT1JJRVMubWFwKGNhdCA9PiAoPGJ1dHRvbiBrZXk9e2NhdH0gb25DbGljaz17KCkgPT4gb25TZWxlY3QoY2F0KX0gY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBwLTQgcm91bmRlZC14bCB0cmFuc2l0aW9uLWFsbCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgJHtjdXJyZW50Q2F0ZWdvcnkgPT09IGNhdCA/ICdiZy1zdG9uZS0xMDAgZGFyazpiZy1zdG9uZS04MDAgZm9udC1ib2xkIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAnIDogJ3RleHQtc3RvbmUtNjAwIGRhcms6dGV4dC1zdG9uZS00MDAgaG92ZXI6Ymctc3RvbmUtNTAgZGFyazpob3ZlcjpiZy1zdG9uZS04MDAnfWB9PjxzcGFuPntjYXR9PC9zcGFuPntjdXJyZW50Q2F0ZWdvcnkgPT09IGNhdCAmJiA8Q2hlY2sgc2l6ZT17MTZ9IC8+fTwvYnV0dG9uPikpfVxuICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTQgbXQtMiBib3JkZXItdCBib3JkZXItc3RvbmUtNTAgZGFyazpib3JkZXItc3RvbmUtODAwXCI+PGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9XCJ3LWZ1bGwgcHktMyB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTYwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMzAwIHRleHQteHMgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdFwiPumWieOBmOOCizwvYnV0dG9uPjwvZGl2PlxuICAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IE1lbnVTaGVldCA9ICh7IGlzVmlzaWJsZSwgb25FZGl0LCBvbkRlbGV0ZSwgb25DbG9zZSB9KSA9PiB7XG4gICAgaWYgKCFpc1Zpc2libGUpIHJldHVybiBudWxsO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei1bNzBdIGZsZXggaXRlbXMtZW5kIGp1c3RpZnktY2VudGVyIHNtOml0ZW1zLWNlbnRlciBwLTQgYW5pbWF0ZS1mYWRlLWluXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctc3RvbmUtOTAwLzIwIGRhcms6YmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbVwiIG9uQ2xpY2s9e29uQ2xvc2V9PjwvZGl2PlxuICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSB3LWZ1bGwgbWF4LXctc20gYmctd2hpdGUgZGFyazpiZy1zdG9uZS04NTAgcm91bmRlZC0yeGwgcC02IHNoYWRvdy14bCBhbmltYXRlLWZsb2F0LXVwIHNwYWNlLXktMlwiPlxuICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgb25DbG9zZSgpOyBvbkVkaXQoKTsgfX0gY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBwLTQgcm91bmRlZC14bCB0cmFuc2l0aW9uLWFsbCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCB0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtMzAwIGhvdmVyOmJnLXN0b25lLTUwIGRhcms6aG92ZXI6Ymctc3RvbmUtODAwXCI+PEVkaXQyIHNpemU9ezIwfSBjbGFzc05hbWU9XCJ0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNTAwXCIgLz48c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1zbSB0cmFja2luZy13aWRlXCI+6KiA6JGJ44KS57eo6ZuG44GZ44KLPC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgb25DbG9zZSgpOyBvbkRlbGV0ZSgpOyB9fSBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHAtNCByb3VuZGVkLXhsIHRyYW5zaXRpb24tYWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC00IHRleHQtcmVkLTQwMCBob3ZlcjpiZy1yZWQtNTAgZGFyazpob3ZlcjpiZy1zdG9uZS04MDBcIj48VHJhc2gyIHNpemU9ezIwfSAvPjxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNtIHRyYWNraW5nLXdpZGVcIj7liYrpmaTjgZnjgos8L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtNCBtdC0yIGJvcmRlci10IGJvcmRlci1zdG9uZS01MCBkYXJrOmJvcmRlci1zdG9uZS04MDBcIj48YnV0dG9uIG9uQ2xpY2s9e29uQ2xvc2V9IGNsYXNzTmFtZT1cInctZnVsbCBweS0zIHRleHQtc3RvbmUtNDAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0zMDAgdGV4dC14cyBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0XCI+6ZaJ44GY44KLPC9idXR0b24+PC9kaXY+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgU2Vhc29uRGV0YWlsVmlldyA9ICh7IGluaXRpYWxEYXRlLCBvbkNsb3NlIH0pID0+IHtcbiAgICBjb25zdCBbY3VycmVudERhdGUsIHNldEN1cnJlbnREYXRlXSA9IHVzZVN0YXRlKGluaXRpYWxEYXRlIHx8IG5ldyBEYXRlKCkpO1xuICAgIGNvbnN0IHsgc29sYXJUZXJtLCBtaWNyb1NlYXNvbiB9ID0gdXNlTWVtbygoKSA9PiBnZXRTZWFzb25JbmZvKGN1cnJlbnREYXRlKSwgW2N1cnJlbnREYXRlXSk7XG4gICAgY29uc3QgaGFuZGxlUHJldiA9ICgpID0+IHsgY29uc3QgZCA9IG5ldyBEYXRlKGN1cnJlbnREYXRlKTsgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpIC0gNSk7IHNldEN1cnJlbnREYXRlKGQpOyB9O1xuICAgIGNvbnN0IGhhbmRsZU5leHQgPSAoKSA9PiB7IGNvbnN0IGQgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZSk7IGQuc2V0RGF0ZShkLmdldERhdGUoKSArIDUpOyBzZXRDdXJyZW50RGF0ZShkKTsgfTtcbiAgICBjb25zdCBidG5TdHlsZSA9IFwidGV4dC14cyBmb250LWJvbGQgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTYwMCBob3Zlcjp0ZXh0LXN0b25lLTYwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMzAwIHRyYW5zaXRpb24tY29sb3JzIHRyYWNraW5nLXdpZGVzdCBweC00IHB5LTJcIjtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIG1heC13LW1kIG14LWF1dG8gcC04IHBiLTggcmVsYXRpdmUgYW5pbWF0ZS1mYWRlLWluIGJnLXN0b25lLTUwIGRhcms6Ymctc3RvbmUtOTAwIG92ZXJmbG93LXktYXV0byBuby1zY3JvbGxiYXIgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMzAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB0LTUgdGV4dC1jZW50ZXIgc3BhY2UteS0xMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgdHJhY2tpbmctWzAuMmVtXSB1cHBlcmNhc2VcIj7kuozljYHlm5vnr4DmsJc8L3A+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1zZXJpZiB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMTAwIHRyYWNraW5nLVswLjFlbV1cIj57c29sYXJUZXJtLm5hbWV9PC9oMj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBmb250LXNlcmlmIHRyYWNraW5nLVswLjE1ZW1dXCI+e3NvbGFyVGVybS55b21pfTwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1zdG9uZS02MDAgZGFyazp0ZXh0LXN0b25lLTMwMCBmb250LXNlcmlmIGxlYWRpbmctcmVsYXhlZCBtdC00IHB4LTQgdHJhY2tpbmctd2lkZXJcIj57c29sYXJUZXJtLmRlc2N9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMiBoLXB4IGJnLXN0b25lLTIwMCBkYXJrOmJnLXN0b25lLTcwMCBteC1hdXRvXCI+PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCB0cmFja2luZy1bMC4yZW1dIHVwcGVyY2FzZVwiPuS4g+WNgeS6jOWAmTwvcD5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VyaWYgdGV4dC1zdG9uZS03MDAgZGFyazp0ZXh0LXN0b25lLTIwMCB0cmFja2luZy1bMC4xZW1dXCI+e21pY3JvU2Vhc29uLm5hbWV9PC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBmb250LXNlcmlmIHRyYWNraW5nLVswLjE1ZW1dXCI+e21pY3JvU2Vhc29uLnlvbWl9PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtMzAwIGZvbnQtc2VyaWYgbGVhZGluZy1yZWxheGVkIG10LTQgcHgtNCB0cmFja2luZy13aWRlclwiPnttaWNyb1NlYXNvbi5kZXNjfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS02MDAgZm9udC1tb25vIHRyYWNraW5nLXdpZGVzdCBwdC00XCI+e2N1cnJlbnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnamEtSlAnLCB7IG1vbnRoOiAnbG9uZycsIGRheTogJ251bWVyaWMnIH0pfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtMTIgcGItMjQgdGV4dC1jZW50ZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB4LTQgbWF4LXcteHMgbXgtYXV0b1wiPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUHJldn0gY2xhc3NOYW1lPVwicC0zIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS02MDAgaG92ZXI6dGV4dC1zdG9uZS02MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBhY3RpdmU6c2NhbGUtOTVcIj48Q2hldnJvbkxlZnQgc2l6ZT17MjR9IC8+PC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9e2J0blN0eWxlfT7plonjgZjjgos8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZU5leHR9IGNsYXNzTmFtZT1cInAtMyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0zMDAgdHJhbnNpdGlvbi1jb2xvcnMgYWN0aXZlOnNjYWxlLTk1XCI+PENoZXZyb25SaWdodCBzaXplPXsyNH0gLz48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IENvbmZpcm1EaWFsb2cgPSAoeyBpc1Zpc2libGUsIHRpdGxlLCBtZXNzYWdlLCBhY3Rpb25MYWJlbCwgb25Db25maXJtLCBvbkNhbmNlbCB9KSA9PiB7XG4gICAgICBpZiAoIWlzVmlzaWJsZSkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIHotWzgwXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTYgYmctc3RvbmUtOTAwLzQwIGRhcms6YmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbSBhbmltYXRlLWZhZGUtaW5cIj48ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGRhcms6Ymctc3RvbmUtODAwIHJvdW5kZWQtMnhsIHAtOCBtYXgtdy14cyB3LWZ1bGwgc2hhZG93LXhsIHRleHQtY2VudGVyXCI+PGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAgbWItMiBmb250LXNlcmlmXCI+e3RpdGxlfTwvaDM+PHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIG1iLTggbGVhZGluZy1yZWxheGVkXCI+e21lc3NhZ2V9PC9wPjxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+PGJ1dHRvbiBvbkNsaWNrPXtvbkNvbmZpcm19IGNsYXNzTmFtZT1cInctZnVsbCBweS0zIGJnLXN0b25lLTkwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIHJvdW5kZWQtbGcgZm9udC1ib2xkIHRleHQtc20gaG92ZXI6Ymctc3RvbmUtODAwIGRhcms6aG92ZXI6Ymctc3RvbmUtNjAwIHRyYW5zaXRpb24tY29sb3JzXCI+e2FjdGlvbkxhYmVsfTwvYnV0dG9uPjxidXR0b24gb25DbGljaz17b25DYW5jZWx9IGNsYXNzTmFtZT1cInctZnVsbCBweS0zIGJnLXN0b25lLTEwMCBkYXJrOmJnLXN0b25lLTkwMCB0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtNDAwIHJvdW5kZWQtbGcgZm9udC1ib2xkIHRleHQtc20gaG92ZXI6Ymctc3RvbmUtMjAwIGRhcms6aG92ZXI6Ymctc3RvbmUtOTUwIHRyYW5zaXRpb24tY29sb3JzXCI+44Kt44Oj44Oz44K744OrPC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+O1xuICB9O1xuXG4gIGNvbnN0IEZsb2F0aW5nV3JpdGVCdXR0b24gPSAoeyBvbkNsaWNrIH0pID0+ICg8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGJvdHRvbS02IGxlZnQtMCByaWdodC0wIGZsZXgganVzdGlmeS1jZW50ZXIgei00MCBweC02IHBvaW50ZXItZXZlbnRzLW5vbmVcIj48YnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2t9IGNsYXNzTmFtZT1cImJnLXN0b25lLTkwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIGRhcms6dGV4dC1zdG9uZS0xMDAgcHgtOCBweS00IHJvdW5kZWQtZnVsbCBzaGFkb3ctMnhsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIGJvcmRlciBib3JkZXItc3RvbmUtNzAwIGRhcms6Ym9yZGVyLXN0b25lLTYwMCBwb2ludGVyLWV2ZW50cy1hdXRvIGFjdGl2ZTpzY2FsZS05NSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgaG92ZXI6Ymctc3RvbmUtODAwIGRhcms6aG92ZXI6Ymctc3RvbmUtNjAwIGFuaW1hdGUtZmxvYXQtdXBcIj48UGVuTGluZSBzaXplPXsyMH0gc3Ryb2tlV2lkdGg9ezIuNX0gLz48c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0cmFja2luZy13aWRlc3RcIj7oqJjjgZk8L3NwYW4+PC9idXR0b24+PC9kaXY+KTtcbiAgXG4gIGNvbnN0IElucHV0VmlldyA9ICh7IG9uU2F2ZSwgaW5pdGlhbERhdGEgPSBudWxsLCBvbkRpcnR5Q2hhbmdlIH0pID0+IHtcbiAgICAgIGNvbnN0IFt0ZXh0LCBzZXRUZXh0XSA9IHVzZVN0YXRlKGluaXRpYWxEYXRhID8gaW5pdGlhbERhdGEudGV4dCA6ICcnKTtcbiAgICAgIGNvbnN0IFtzb3VyY2UsIHNldFNvdXJjZV0gPSB1c2VTdGF0ZShpbml0aWFsRGF0YSA/IGluaXRpYWxEYXRhLnNvdXJjZSA6ICcnKTtcbiAgICAgIGNvbnN0IFtzZWxlY3RlZENhdGVnb3J5LCBzZXRTZWxlY3RlZENhdGVnb3J5XSA9IHVzZVN0YXRlKGluaXRpYWxEYXRhID8gaW5pdGlhbERhdGEuY2F0ZWdvcnkgOiBDQVRFR09SSUVTWzBdKTtcbiAgICAgIGNvbnN0IHRleHRhcmVhUmVmID0gdXNlUmVmKG51bGwpO1xuICAgICAgdXNlRWZmZWN0KCgpID0+IHsgaWYgKGluaXRpYWxEYXRhKSB7IHNldFRleHQoaW5pdGlhbERhdGEudGV4dCk7IHNldFNvdXJjZShpbml0aWFsRGF0YS5zb3VyY2UgfHwgJycpOyBzZXRTZWxlY3RlZENhdGVnb3J5KGluaXRpYWxEYXRhLmNhdGVnb3J5KTsgfSBlbHNlIHsgc2V0VGV4dCgnJyk7IHNldFNvdXJjZSgnJyk7IHNldFNlbGVjdGVkQ2F0ZWdvcnkoQ0FURUdPUklFU1swXSk7IH0gfSwgW2luaXRpYWxEYXRhXSk7XG4gICAgICB1c2VFZmZlY3QoKCkgPT4geyBpZiAodGV4dGFyZWFSZWYuY3VycmVudCkgeyB0ZXh0YXJlYVJlZi5jdXJyZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJzsgdGV4dGFyZWFSZWYuY3VycmVudC5zdHlsZS5oZWlnaHQgPSBgJHt0ZXh0YXJlYVJlZi5jdXJyZW50LnNjcm9sbEhlaWdodH1weGA7IH0gfSwgW3RleHRdKTtcbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChvbkRpcnR5Q2hhbmdlKSB7XG4gICAgICAgICAgICBjb25zdCBpc0RpcnR5ID0gaW5pdGlhbERhdGEgPyAodGV4dCAhPT0gaW5pdGlhbERhdGEudGV4dCB8fCBzb3VyY2UgIT09IChpbml0aWFsRGF0YS5zb3VyY2UgfHwgJycpIHx8IHNlbGVjdGVkQ2F0ZWdvcnkgIT09IGluaXRpYWxEYXRhLmNhdGVnb3J5KSA6ICh0ZXh0LnRyaW0oKS5sZW5ndGggPiAwIHx8IHNvdXJjZS50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgICAgICAgICBvbkRpcnR5Q2hhbmdlKGlzRGlydHkpO1xuICAgICAgICB9XG4gICAgICB9LCBbdGV4dCwgc291cmNlLCBzZWxlY3RlZENhdGVnb3J5LCBpbml0aWFsRGF0YSwgb25EaXJ0eUNoYW5nZV0pO1xuICAgICAgY29uc3QgaGFuZGxlU2F2ZSA9ICgpID0+IHsgaWYgKHRleHQudHJpbSgpKSBvblNhdmUodGV4dCwgc291cmNlLCBzZWxlY3RlZENhdGVnb3J5KTsgfTtcbiAgICAgIGNvbnN0IGlzRWRpdE1vZGUgPSAhIWluaXRpYWxEYXRhO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIG1heC13LW1kIG14LWF1dG8gcC02IHB0LTggcGItMjQgYW5pbWF0ZS1mYWRlLWluIG92ZXJmbG93LXktYXV0byBuby1zY3JvbGxiYXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IGZsZXggZmxleC1jb2wgZ2FwLTZcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQtc3RvbmUtNTAwIGRhcms6dGV4dC1zdG9uZS00MDAgdGV4dC14cyBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHVwcGVyY2FzZSBzZWxlY3Qtbm9uZSBjdXJzb3ItZGVmYXVsdCBhY3RpdmU6dGV4dC1zdG9uZS04MDAgZGFyazphY3RpdmU6dGV4dC1zdG9uZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIj57aXNFZGl0TW9kZSA/ICfoqIDokYnjgpLnt6jpm4bjgZnjgosnIDogJ+iogOiRieOCkuiomOOBmSd9PC9sYWJlbD5cbiAgICAgICAgICAgICAgPHRleHRhcmVhIHJlZj17dGV4dGFyZWFSZWZ9IHZhbHVlPXt0ZXh0fSBvbkNoYW5nZT17KGUpID0+IHNldFRleHQoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cIuW/g+OBq+aui+OBo+OBn+iogOiRieOCkuWFpeWKmy4uLlwiIGNsYXNzTmFtZT1cInctZnVsbCBtaW4taC1bOHJlbV0gYmctdHJhbnNwYXJlbnQgdGV4dC1sZyBsZWFkaW5nLXJlbGF4ZWQgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCBwbGFjZWhvbGRlcjp0ZXh0LXN0b25lLTMwMCBkYXJrOnBsYWNlaG9sZGVyOnRleHQtc3RvbmUtNjAwIHJlc2l6ZS1ub25lIGZvY3VzOm91dGxpbmUtbm9uZSBmb250LXNlcmlmIG92ZXJmbG93LWhpZGRlbiB0cmFuc2l0aW9uLWNvbG9yc1wiIGF1dG9Gb2N1cz17IWlzRWRpdE1vZGV9IC8+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPXtzb3VyY2V9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0U291cmNlKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9XCLlh7rlhbjvvIjku7vmhI/vvIlcIiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctdHJhbnNwYXJlbnQgYm9yZGVyLWIgYm9yZGVyLXN0b25lLTIwMCBkYXJrOmJvcmRlci1zdG9uZS03MDAgcHktMiBtYi00IGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItc3RvbmUtNDAwIGRhcms6Zm9jdXM6Ym9yZGVyLXN0b25lLTUwMCB0ZXh0LXNtIGZvbnQtc2VyaWYgdGV4dC1zdG9uZS02MDAgZGFyazp0ZXh0LXN0b25lLTQwMCBwbGFjZWhvbGRlcjp0ZXh0LXN0b25lLTQwMCBkYXJrOnBsYWNlaG9sZGVyOnRleHQtc3RvbmUtNjAwIHRyYW5zaXRpb24tY29sb3JzXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgIHtDQVRFR09SSUVTLm1hcCgoY2F0KSA9PiAoPGJ1dHRvbiBrZXk9e2NhdH0gb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRDYXRlZ29yeShjYXQpfSBjbGFzc05hbWU9e2BweS0zIHB4LTIgdGV4dC1zbSByb3VuZGVkIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBib3JkZXIgJHtzZWxlY3RlZENhdGVnb3J5ID09PSBjYXQgPyAnYmctc3RvbmUtODAwIGRhcms6Ymctc3RvbmUtNzAwIHRleHQtc3RvbmUtNTAgZGFyazp0ZXh0LXN0b25lLTEwMCBib3JkZXItc3RvbmUtODAwIGRhcms6Ym9yZGVyLXN0b25lLTcwMCBzaGFkb3ctbWQnIDogJ2JnLXdoaXRlIGRhcms6Ymctc3RvbmUtODAwIHRleHQtc3RvbmUtNjAwIGRhcms6dGV4dC1zdG9uZS00MDAgYm9yZGVyLXN0b25lLTIwMCBkYXJrOmJvcmRlci1zdG9uZS03MDAgaG92ZXI6Ym9yZGVyLXN0b25lLTQwMCBkYXJrOmhvdmVyOmJvcmRlci1zdG9uZS01MDAnfWB9PntjYXR9PC9idXR0b24+KSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTYgcGItNFwiPjxidXR0b24gb25DbGljaz17aGFuZGxlU2F2ZX0gZGlzYWJsZWQ9eyF0ZXh0LnRyaW0oKX0gY2xhc3NOYW1lPXtgdy1mdWxsIHB5LTQgcm91bmRlZC1sZyBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCAke3RleHQudHJpbSgpID8gJ2JnLXN0b25lLTgwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIGRhcms6dGV4dC1zdG9uZS0xMDAgc2hhZG93LWxnIGhvdmVyOmJnLXN0b25lLTcwMCBkYXJrOmhvdmVyOmJnLXN0b25lLTYwMCBhY3RpdmU6c2NhbGUtWzAuOThdJyA6ICdiZy1zdG9uZS0yMDAgZGFyazpiZy1zdG9uZS04MDAgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTYwMCBjdXJzb3Itbm90LWFsbG93ZWQnfWB9Pntpc0VkaXRNb2RlID8gJ+abtOaWsOOBmeOCiycgOiAn5L+d5a2Y44GZ44KLJ308L2J1dHRvbj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gIH07XG4gIFxuICBjb25zdCBTZWFzb25CYWRnZSA9ICh7IG9uQ2xpY2sgfSkgPT4ge1xuICAgIGNvbnN0IHsgc29sYXJUZXJtLCBtaWNyb1NlYXNvbiB9ID0gdXNlTWVtbygoKSA9PiBnZXRTZWFzb25JbmZvKG5ldyBEYXRlKCkpLCBbXSk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxidXR0b24gb25DbGljaz17b25DbGlja30gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC14cyB0ZXh0LXN0b25lLTUwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtNDAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnMgdHJhY2tpbmctd2lkZSBweS0xIGdyb3VwXCI+XG4gICAgICAgIDxDbG91ZFN1biBzaXplPXsxOH0gY2xhc3NOYW1lPVwidGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBncm91cC1ob3Zlcjp0ZXh0LXN0b25lLTYwMCBkYXJrOmdyb3VwLWhvdmVyOnRleHQtc3RvbmUtMzAwIHRyYW5zaXRpb24tY29sb3JzIC1tdC0wLjVcIiAvPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJib3JkZXItYiBib3JkZXItdHJhbnNwYXJlbnQgZ3JvdXAtaG92ZXI6Ym9yZGVyLXN0b25lLTMwMCBkYXJrOmdyb3VwLWhvdmVyOmJvcmRlci1zdG9uZS02MDAgdHJhbnNpdGlvbi1hbGwgZm9udC1ub3JtYWxcIj57c29sYXJUZXJtLm5hbWV9IDxzcGFuIGNsYXNzTmFtZT1cIm14LTEgdGV4dC1zdG9uZS0zMDAgZGFyazp0ZXh0LXN0b25lLTYwMFwiPi88L3NwYW4+IHttaWNyb1NlYXNvbi5uYW1lfTwvc3Bhbj5cbiAgICAgICAgPENoZXZyb25SaWdodCBzaXplPXsxNH0gY2xhc3NOYW1lPVwidGV4dC1zdG9uZS0zMDAgZGFyazp0ZXh0LXN0b25lLTYwMCBncm91cC1ob3Zlcjp0ZXh0LXN0b25lLTUwIGRhcms6Z3JvdXAtaG92ZXI6dGV4dC1zdG9uZS00MDAgdHJhbnNpdGlvbi1jb2xvcnMgLW10LTAuNVwiIC8+XG4gICAgICA8L2J1dHRvbj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IExpc3RWaWV3ID0gKHsgcXVvdGVzLCBvbkl0ZW1DbGljaywgb25TdGFydFJhbmRvbSwgZmlsdGVyQ2F0ZWdvcnksIG9uT3BlbkZpbHRlciwgb25PcGVuU2Vhc29uIH0pID0+IHtcbiAgICBjb25zdCBkaXNwbGF5UXVvdGVzID0gZmlsdGVyQ2F0ZWdvcnkgPyBxdW90ZXMuZmlsdGVyKHEgPT4gcS5jYXRlZ29yeSA9PT0gZmlsdGVyQ2F0ZWdvcnkpIDogcXVvdGVzO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBvdmVyZmxvdy15LWF1dG8gbWF4LXctbWQgbXgtYXV0byBweC02IHB0LTQgcGItMzIgbm8tc2Nyb2xsYmFyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtZW5kIG1iLTQgcHgtMSBnYXAtMlwiPlxuICAgICAgICAgIDxTZWFzb25CYWRnZSBvbkNsaWNrPXtvbk9wZW5TZWFzb259IC8+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbk9wZW5GaWx0ZXJ9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgdGV4dC1bMTBweF0gZm9udC1ib2xkIHRleHQtc3RvbmUtNDAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6dGV4dC1zdG9uZS01MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyB0cmFja2luZy13aWRlIGJnLXN0b25lLTEwMC84MCBkYXJrOmJnLXN0b25lLTgwMC84MCBweC0zIHB5LTEuNSByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci1zdG9uZS0yMDAvNTAgZGFyazpib3JkZXItc3RvbmUtNzAwLzUwXCI+XG4gICAgICAgICAgICA8TGlzdEZpbHRlciBzaXplPXsxMn0gLz48c3Bhbj57ZmlsdGVyQ2F0ZWdvcnkgfHwgJ+OBmeOBueOBpuOBruiogOiRiSd9PC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2Rpc3BsYXlRdW90ZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaC1mdWxsIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgcC02IHRleHQtY2VudGVyIGl0YWxpYyBmb250LXNlcmlmXCI+XG4gICAgICAgICAgICB7cXVvdGVzLmxlbmd0aCA9PT0gMCA/IDw+PHA+44G+44Gg6KiA6JGJ44GM44GC44KK44G+44Gb44KT44CCPC9wPjxwIGNsYXNzTmFtZT1cIm10LTJcIj7kuIvjga7jgIzoqJjjgZnjgI3jgYvjgonlp4vjgoHjgb7jgZfjgofjgYbjgII8L3A+PC8+IDogPHA+44GT44Gu44Kr44OG44K044Oq44Gu6KiA6JGJ44Gv44GC44KK44G+44Gb44KT44CCPC9wPn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblN0YXJ0UmFuZG9tfSBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB5LTQgcHgtNSBiZy1zdG9uZS0xMDAgZGFyazpiZy1zdG9uZS04MDAgYm9yZGVyIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtNzAwIHJvdW5kZWQtMnhsIGhvdmVyOmJnLXN0b25lLTIwMCB0cmFuc2l0aW9uLWFsbCBncm91cCBhY3RpdmU6c2NhbGUtWzAuOThdXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj48ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGRhcms6Ymctc3RvbmUtNzAwIHAtMi41IHJvdW5kZWQteGwgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCBncm91cC1ob3Zlcjpyb3RhdGUtMTIgdHJhbnNpdGlvbi10cmFuc2Zvcm1cIj48U3BhcmtsZXMgc2l6ZT17MjB9IC8+PC9kaXY+PGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxlZnRcIj48cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMjAwIHRyYWNraW5nLXdpZGVyXCI+6KiA6JGJ44Go44Gu5YaN5LyaPC9wPjxwIGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgZm9udC1zZXJpZlwiPuOBhOOBpOOBi+OBruiogOiRieOBq+OAgeOBvuOBn+WHuuS8muOBhjwvcD48L2Rpdj48L2Rpdj5cbiAgICAgICAgICAgICAgPENoZXZyb25SaWdodCBjbGFzc05hbWU9XCJ0ZXh0LXN0b25lLTMwMCBkYXJrOnRleHQtc3RvbmUtNjAwXCIgc2l6ZT17MTh9IC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIHtkaXNwbGF5UXVvdGVzLm1hcCgocXVvdGUpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e3F1b3RlLmlkfSBvbkNsaWNrPXsoKSA9PiBvbkl0ZW1DbGljayhxdW90ZS5pZCl9IGNsYXNzTmFtZT1cImdyb3VwIGJnLXdoaXRlIGRhcms6Ymctc3RvbmUtODUwIHAtNiByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXN0b25lLTEwMCBkYXJrOmJvcmRlci1zdG9uZS04MDAgaG92ZXI6Ym9yZGVyLXN0b25lLTMwMCB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlciBhY3RpdmU6Ymctc3RvbmUtNTAgc2hhZG93LXNtIHRleHQtbGVmdFwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmFzZSBsZWFkaW5nLXJlbGF4ZWQgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCB3aGl0ZXNwYWNlLXByZS13cmFwIG1iLTEgZm9udC1zZXJpZiBsaW5lLWNsYW1wLTNcIj57cXVvdGUudGV4dH08L3A+XG4gICAgICAgICAgICAgICAge3F1b3RlLnNvdXJjZSAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNTAwIGZvbnQtc2VyaWYgbWItM1wiPuKAlCB7cXVvdGUuc291cmNlfTwvcD59XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1lbmQgYm9yZGVyLXQgYm9yZGVyLXN0b25lLTUwIGRhcms6Ym9yZGVyLXN0b25lLTgwMCBwdC0zXCI+PHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIGJnLXN0b25lLTEwMCBkYXJrOmJnLXN0b25lLTgwMCBweC0yIHB5LTEgcm91bmRlZC1sZyBmb250LW1lZGl1bVwiPntxdW90ZS5jYXRlZ29yeX08L3NwYW4+PHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bMTBweF0gdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTYwMCBmb250LW1vbm9cIj57bmV3IERhdGUocXVvdGUudGltZXN0YW1wKS50b0xvY2FsZURhdGVTdHJpbmcoJ2phLUpQJyl9PC9zcGFuPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBTaW5nbGVRdW90ZVZpZXcgPSAoeyBxdW90ZSwgb25OZXh0LCBvblByZXYsIGhhc05leHQsIGhhc1ByZXYsIG5leHRJY29uOiBOZXh0SWNvbiwgb25DbG9zZSwgaXNSYW5kb21Nb2RlID0gZmFsc2UgfSkgPT4ge1xuICAgIGNvbnN0IGJ0blN0eWxlID0gXCJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0zMDAgdHJhbnNpdGlvbi1jb2xvcnMgdHJhY2tpbmctd2lkZXN0IHB4LTQgcHktMlwiO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIG1heC13LW1kIG14LWF1dG8gcC04IHBiLTggcmVsYXRpdmUgYW5pbWF0ZS1mYWRlLWluIGJnLXN0b25lLTUwIGRhcms6Ymctc3RvbmUtOTAwIG92ZXJmbG93LXktYXV0byBuby1zY3JvbGxiYXIgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMzAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHB0LTUgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgcHgtMyBweS0xIHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLXN0b25lLTIwMCBkYXJrOmJvcmRlci1zdG9uZS03MDAgdGV4dC14cyB0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIHRyYWNraW5nLXdpZGUgbWItOFwiPntxdW90ZS5jYXRlZ29yeX08L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC0yXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhsIG1kOnRleHQtMnhsIGZvbnQtc2VyaWYgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCB3aGl0ZXNwYWNlLXByZS13cmFwIG1iLTQgc2VsZWN0LXRleHQgbGVhZGluZy1yZWxheGVkXCIgc3R5bGU9e3sgbGluZUhlaWdodDogJzEuOCcgfX0+e3F1b3RlLnRleHR9PC9wPlxuICAgICAgICAgICAge3F1b3RlLnNvdXJjZSAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtc3RvbmUtNTAwIGRhcms6dGV4dC1zdG9uZS00MDAgZm9udC1zZXJpZiBtYi04XCI+4oCUIHtxdW90ZS5zb3VyY2V9PC9wPn1cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOCBmbGV4IGp1c3RpZnktY2VudGVyIHRleHQtc3RvbmUtMzAwIGRhcms6dGV4dC1zdG9uZS03MDBcIj48ZGl2IGNsYXNzTmFtZT1cImgtcHggdy0xMiBiZy1zdG9uZS0zMDAgZGFyazpiZy1zdG9uZS03MDBcIj48L2Rpdj48L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC14cyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGZvbnQtbW9ubyB0cmFja2luZy13aWRlc3RcIj57bmV3IERhdGUocXVvdGUudGltZXN0YW1wKS50b0xvY2FsZURhdGVTdHJpbmcoJ2phLUpQJyl9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0xMiBwYi0yNCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIHtpc1JhbmRvbU1vZGUgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC04IG1heC13LXhzIG14LWF1dG9cIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbk5leHR9IGNsYXNzTmFtZT1cImdyb3VwIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0zIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgaG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyBhY3RpdmU6c2NhbGUtOTVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCByb3VuZGVkLWZ1bGwgYmctc3RvbmUtMTAwIGRhcms6Ymctc3RvbmUtODAwIGdyb3VwLWhvdmVyOmJnLXN0b25lLTIwMCBkYXJrOmdyb3VwLWhvdmVyOmJnLXN0b25lLTcwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPjxOZXh0SWNvbiBzaXplPXsyNH0gc3Ryb2tlV2lkdGg9ezEuNX0gLz48L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPXtidG5TdHlsZX0+6ZaJ44GY44KLPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHgtNCBtYXgtdy14cyBteC1hdXRvXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25QcmV2fSBkaXNhYmxlZD17IWhhc1ByZXZ9IGNsYXNzTmFtZT1cInAtMyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGVuYWJsZWQ6aG92ZXI6dGV4dC1zdG9uZS02MDAgZGFyazplbmFibGVkOmhvdmVyOnRleHQtc3RvbmUtMzAwIHRyYW5zaXRpb24tY29sb3JzIGRpc2FibGVkOm9wYWNpdHktMCBhY3RpdmU6c2NhbGUtOTVcIj48Q2hldnJvbkxlZnQgc2l6ZT17MjR9IC8+PC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPXtidG5TdHlsZX0+5LiA6Kan44G4PC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25OZXh0fSBkaXNhYmxlZD17IWhhc05leHR9IGNsYXNzTmFtZT1cInAtMyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNTAwIGVuYWJsZWQ6aG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazplbmFibGVkOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzIGRpc2FibGVkOm9wYWNpdHktMCBhY3RpdmU6c2NhbGUtOTVcIj48TmV4dEljb24gc2l6ZT17MjR9IC8+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgLy8gLS0tIE1haW4gQXBwIC0tLVxuXG4gIGNvbnN0IEFwcCA9ICgpID0+IHtcbiAgICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbc2hvcnRDb2RlLCBzZXRTaG9ydENvZGVdID0gdXNlU3RhdGUoJycpO1xuICAgIGNvbnN0IFtpc0xvYWRpbmdDb2RlLCBzZXRJc0xvYWRpbmdDb2RlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbY29kZUVycm9yLCBzZXRDb2RlRXJyb3JdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW3N5bmNVc2VySWQsIHNldFN5bmNVc2VySWRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW2xpbmtlZFVzZXJJZCwgc2V0TGlua2VkVXNlcklkXSA9IHVzZVN0YXRlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKExJTktFRF9VU0VSX0tFWSkpO1xuICAgIGNvbnN0IFt2aWV3TW9kZSwgc2V0Vmlld01vZGVdID0gdXNlU3RhdGUoJ2xpc3QnKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRRdW90ZUlkLCBzZXRTZWxlY3RlZFF1b3RlSWRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW3JhbmRvbUhpc3RvcnksIHNldFJhbmRvbUhpc3RvcnldID0gdXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IFtxdW90ZXMsIHNldFF1b3Rlc10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgW3RvYXN0LCBzZXRUb2FzdF0gPSB1c2VTdGF0ZSh7IHNob3c6IGZhbHNlLCBtZXNzYWdlOiAnJyB9KTtcbiAgICBjb25zdCBbZGlhbG9nU3RhdGUsIHNldERpYWxvZ1N0YXRlXSA9IHVzZVN0YXRlKHsgaXNWaXNpYmxlOiBmYWxzZSwgdHlwZTogbnVsbCwgaWQ6IG51bGwgfSk7XG4gICAgY29uc3QgW2lzRGFya01vZGUsIHNldElzRGFya01vZGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtmaWx0ZXJDYXRlZ29yeSwgc2V0RmlsdGVyQ2F0ZWdvcnldID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW2lzRmlsdGVyVmlzaWJsZSwgc2V0SXNGaWx0ZXJWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbaXNJbnB1dERpcnR5LCBzZXRJc0lucHV0RGlydHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtpc01lbnVWaXNpYmxlLCBzZXRJc01lbnVWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbaXNJbml0aWFsTG9hZGluZywgc2V0SXNJbml0aWFsTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBhdXRoSW5pdGlhdGVkUmVmID0gdXNlUmVmKGZhbHNlKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBzYXZlZFRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJyk7XG4gICAgICBpZiAoc2F2ZWRUaGVtZSA9PT0gJ2RhcmsnKSB7IHNldElzRGFya01vZGUodHJ1ZSk7IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrJyk7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cInRoZW1lLWNvbG9yXCJdJykuc2V0QXR0cmlidXRlKCdjb250ZW50JywgJyMwYzBhMDknKTsgfVxuICAgICAgZWxzZSB7IHNldElzRGFya01vZGUoZmFsc2UpOyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZGFyaycpOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJ0aGVtZS1jb2xvclwiXScpLnNldEF0dHJpYnV0ZSgnY29udGVudCcsICcjZmFmYWY5Jyk7IH1cbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG5leHQgPSAhaXNEYXJrTW9kZTsgc2V0SXNEYXJrTW9kZShuZXh0KTtcbiAgICAgIGlmIChuZXh0KSB7IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrJyk7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsICdkYXJrJyk7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cInRoZW1lLWNvbG9yXCJdJykuc2V0QXR0cmlidXRlKCdjb250ZW50JywgJyMwYzBhMDknKTsgfVxuICAgICAgZWxzZSB7IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrJyk7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsICdsaWdodCcpOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJ0aGVtZS1jb2xvclwiXScpLnNldEF0dHJpYnV0ZSgnY29udGVudCcsICcjZmFmYWY5Jyk7IH1cbiAgICB9O1xuXG4gICAgY29uc3QgZmV0Y2hVc2VyRGF0YSA9IHVzZUNhbGxiYWNrKGFzeW5jICh0YXJnZXRVaWQpID0+IHtcbiAgICAgIGlmICghdGFyZ2V0VWlkKSByZXR1cm47XG4gICAgICBzZXRJc0xvYWRpbmdDb2RlKHRydWUpOyBzZXRDb2RlRXJyb3IobnVsbCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyQ29kZVJlZiA9IGRvYyhkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAncHVibGljJywgJ2RhdGEnLCAndXNlckNvZGVzJywgdGFyZ2V0VWlkKTtcbiAgICAgICAgY29uc3QgY29kZVNuYXAgPSBhd2FpdCBnZXREb2ModXNlckNvZGVSZWYpO1xuICAgICAgICBpZiAoY29kZVNuYXAuZXhpc3RzKCkpIHsgXG4gICAgICAgICAgICBzZXRTaG9ydENvZGUoY29kZVNuYXAuZGF0YSgpLmNvZGUpOyBcbiAgICAgICAgfSBlbHNlIHsgXG4gICAgICAgICAgICBpZiAodXNlciAmJiB1c2VyLnVpZCA9PT0gdGFyZ2V0VWlkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q29kZSA9IGdlbmVyYXRlU2hvcnRDb2RlKCk7IFxuICAgICAgICAgICAgICAgIGF3YWl0IHNldERvYyhkb2MoZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3B1YmxpYycsICdkYXRhJywgJ3N5bmNDb2RlcycsIG5ld0NvZGUpLCB7IHVpZDogdGFyZ2V0VWlkIH0pOyBcbiAgICAgICAgICAgICAgICBhd2FpdCBzZXREb2ModXNlckNvZGVSZWYsIHsgY29kZTogbmV3Q29kZSB9KTsgXG4gICAgICAgICAgICAgICAgc2V0U2hvcnRDb2RlKG5ld0NvZGUpOyBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0U2hvcnRDb2RlKCctLS0tLScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IHNldENvZGVFcnJvcihcIuaOpee2muOCqOODqeODvFwiKTsgfSBmaW5hbGx5IHsgc2V0SXNMb2FkaW5nQ29kZShmYWxzZSk7IH1cbiAgICB9LCBbdXNlcl0pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaW5pdEF1dGhQcm9taXNlLnRoZW4odSA9PiB7IGlmKHUpIHNldFVzZXIodSk7IH0pO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGFjdGl2ZVVzZXJJZCA9IGxpbmtlZFVzZXJJZCB8fCAodXNlciA/IHVzZXIudWlkIDogbnVsbCk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaWYgKCFhY3RpdmVVc2VySWQpIHsgaWYgKCF1c2VyICYmICFpc0luaXRpYWxMb2FkaW5nID09PSBmYWxzZSkgc2V0SXNJbml0aWFsTG9hZGluZyhmYWxzZSk7IHJldHVybjsgfVxuICAgICAgZmV0Y2hVc2VyRGF0YShhY3RpdmVVc2VySWQpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3VzZXJzJywgYWN0aXZlVXNlcklkLCAncXVvdGVzJykpO1xuICAgICAgcmV0dXJuIG9uU25hcHNob3QocSwgKHNuYXApID0+IHtcbiAgICAgICAgc2V0UXVvdGVzKHNuYXAuZG9jcy5tYXAoZCA9PiAoeyBpZDogZC5pZCwgLi4uZC5kYXRhKCkgfSkpLnNvcnQoKGEsIGIpID0+IChiLnRpbWVzdGFtcCB8fCAwKSAtIChhLnRpbWVzdGFtcCB8fCAwKSkpO1xuICAgICAgICBzZXRJc0luaXRpYWxMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0sICgpID0+IHNldElzSW5pdGlhbExvYWRpbmcoZmFsc2UpKTtcbiAgICB9LCBbYWN0aXZlVXNlcklkLCBmZXRjaFVzZXJEYXRhXSk7XG5cbiAgICBjb25zdCBzaG93VG9hc3QgPSAobWVzc2FnZSkgPT4gc2V0VG9hc3QoeyBzaG93OiB0cnVlLCBtZXNzYWdlIH0pO1xuICAgIFxuICAgIGNvbnN0IGhhbmRsZVN5bmNCeUNvZGUgPSBhc3luYyAoY29kZSkgPT4geyBcbiAgICAgICAgaWYgKCF1c2VyKSByZXR1cm47IFxuICAgICAgICB0cnkgeyBcbiAgICAgICAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2MoZG9jKGRiLCAnYXJ0aWZhY3RzJywgYXBwSWQsICdwdWJsaWMnLCAnZGF0YScsICdzeW5jQ29kZXMnLCBjb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpKSk7IFxuICAgICAgICAgICAgaWYgKHNuYXAuZXhpc3RzKCkpIHsgXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VWlkID0gc25hcC5kYXRhKCkudWlkO1xuICAgICAgICAgICAgICAgIHNldFN5bmNVc2VySWQodGFyZ2V0VWlkKTtcbiAgICAgICAgICAgICAgICBzZXRMaW5rZWRVc2VySWQodGFyZ2V0VWlkKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMSU5LRURfVVNFUl9LRVksIHRhcmdldFVpZCk7XG4gICAgICAgICAgICAgICAgc2V0Vmlld01vZGUoJ2xpc3QnKTsgXG4gICAgICAgICAgICAgICAgc2hvd1RvYXN0KFwi5ZCM5pyf44KS6ZaL5aeL44GX44G+44GX44GfXCIpOyBcbiAgICAgICAgICAgIH0gZWxzZSB7IHNob3dUb2FzdChcIuOCs+ODvOODieOBjOimi+OBpOOBi+OCiuOBvuOBm+OCk1wiKTsgfVxuICAgICAgICB9IGNhdGNoIChlKSB7IHNob3dUb2FzdChcIuWQjOacn+OCqOODqeODvFwiKTsgfSBcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlVW5zeW5jID0gKCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMSU5LRURfVVNFUl9LRVkpO1xuICAgICAgICBzZXRMaW5rZWRVc2VySWQobnVsbCk7XG4gICAgICAgIHNldFN5bmNVc2VySWQobnVsbCk7XG4gICAgICAgIHNob3dUb2FzdChcIuWQjOacn+OCkuino+mZpOOBl+OBvuOBl+OBn1wiKTtcbiAgICAgICAgc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IGZhbHNlLCB0eXBlOiBudWxsLCBpZDogbnVsbCB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkUXVvdGUgPSBhc3luYyAodGV4dCwgc291cmNlLCBjYXRlZ29yeSkgPT4geyBpZiAoIWFjdGl2ZVVzZXJJZCkgcmV0dXJuOyBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAndXNlcnMnLCBhY3RpdmVVc2VySWQsICdxdW90ZXMnKSwgeyB0ZXh0LCBzb3VyY2UsIGNhdGVnb3J5LCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSk7IHNldElzSW5wdXREaXJ0eShmYWxzZSk7IHNldFZpZXdNb2RlKCdsaXN0Jyk7IHNob3dUb2FzdChcIuiogOiRieOCkuS/neWtmOOBl+OBvuOBl+OBn1wiKTsgfTtcbiAgICBjb25zdCB1cGRhdGVRdW90ZSA9IGFzeW5jICh0ZXh0LCBzb3VyY2UsIGNhdGVnb3J5KSA9PiB7IGlmICghYWN0aXZlVXNlcklkIHx8ICFzZWxlY3RlZFF1b3RlSWQpIHJldHVybjsgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAndXNlcnMnLCBhY3RpdmVVc2VySWQsICdxdW90ZXMnLCBzZWxlY3RlZFF1b3RlSWQpLCB7IHRleHQsIHNvdXJjZSwgY2F0ZWdvcnkgfSk7IHNldElzSW5wdXREaXJ0eShmYWxzZSk7IHNldFZpZXdNb2RlKHJhbmRvbUhpc3RvcnkubGVuZ3RoID4gMCA/ICdyYW5kb20nIDogJ2RldGFpbCcpOyBzaG93VG9hc3QoXCLoqIDokYnjgpLmm7TmlrDjgZfjgb7jgZfjgZ9cIik7IH07XG4gICAgY29uc3QgaGFuZGxlQ29uZmlybUFjdGlvbiA9IGFzeW5jICgpID0+IHsgaWYgKGRpYWxvZ1N0YXRlLnR5cGUgPT09ICdxdW90ZScpIGF3YWl0IGNvbmZpcm1EZWxldGVRdW90ZSgpOyBlbHNlIGlmIChkaWFsb2dTdGF0ZS50eXBlID09PSAnYWNjb3VudCcpIGF3YWl0IGNvbmZpcm1SZXNldEFjY291bnQoKTsgZWxzZSBpZiAoZGlhbG9nU3RhdGUudHlwZSA9PT0gJ2Rpc2NhcmQnKSB7IHNldElzSW5wdXREaXJ0eShmYWxzZSk7IHNldERpYWxvZ1N0YXRlKHsgaXNWaXNpYmxlOiBmYWxzZSwgdHlwZTogbnVsbCwgaWQ6IG51bGwgfSk7IHNldFZpZXdNb2RlKHJhbmRvbUhpc3RvcnkubGVuZ3RoID4gMCAmJiB2aWV3TW9kZSA9PT0gJ2VkaXQnID8gJ3JhbmRvbScgOiBzZWxlY3RlZFF1b3RlSWQgJiYgdmlld01vZGUgPT09ICdlZGl0JyA/ICdkZXRhaWwnIDogJ2xpc3QnKTsgfSB9O1xuICAgIGNvbnN0IGNvbmZpcm1EZWxldGVRdW90ZSA9IGFzeW5jICgpID0+IHsgaWYgKCFhY3RpdmVVc2VySWQgfHwgIWRpYWxvZ1N0YXRlLmlkKSByZXR1cm47IGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3VzZXJzJywgYWN0aXZlVXNlcklkLCAncXVvdGVzJywgZGlhbG9nU3RhdGUuaWQpKTsgc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IGZhbHNlLCB0eXBlOiBudWxsLCBpZDogbnVsbCB9KTsgc2V0Vmlld01vZGUoJ2xpc3QnKTsgc2V0U2VsZWN0ZWRRdW90ZUlkKG51bGwpOyBzaG93VG9hc3QoXCLliYrpmaTjgZfjgb7jgZfjgZ9cIik7IH07XG4gICAgXG4gICAgY29uc3QgY29uZmlybVJlc2V0QWNjb3VudCA9IGFzeW5jICgpID0+IHsgXG4gICAgICAgIGlmICghdXNlcikgcmV0dXJuOyBcbiAgICAgICAgdHJ5IHsgXG4gICAgICAgICAgICBpZiAobGlua2VkVXNlcklkKSB7IGhhbmRsZVVuc3luYygpOyByZXR1cm47IH1cbiAgICAgICAgICAgIGlmIChzaG9ydENvZGUpIHtcbiAgICAgICAgICAgICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAndXNlcnMnLCB1c2VyLnVpZCwgJ3F1b3RlcycpKTsgXG4gICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHNuYXAuZG9jcy5tYXAoZCA9PiBkZWxldGVEb2MoZC5yZWYpKSk7IFxuICAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnYXJ0aWZhY3RzJywgYXBwSWQsICdwdWJsaWMnLCAnZGF0YScsICdzeW5jQ29kZXMnLCBzaG9ydENvZGUpKTsgXG4gICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3B1YmxpYycsICdkYXRhJywgJ3VzZXJDb2RlcycsIHVzZXIudWlkKSk7IFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTElOS0VEX1VTRVJfS0VZKTtcbiAgICAgICAgICAgIHNob3dUb2FzdChcIuWIneacn+WMluOBl+OBvuOBl+OBn+OAguODquODreODvOODieOBl+OBvuOBmS4uLlwiKTsgXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKSwgMTUwMCk7IFxuICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IHNob3dUb2FzdChcIuWIneacn+WMluWkseaVl1wiKTsgc2V0RGlhbG9nU3RhdGUoeyBpc0luaXRpYWxMb2FkaW5nOiBmYWxzZSwgaXNWaXNpYmxlOiBmYWxzZSwgdHlwZTogbnVsbCwgaWQ6IG51bGwgfSk7IH0gXG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVRpdGxlQ2xpY2sgPSAoZSkgPT4ge1xuICAgICAgaWYgKGUuZGV0YWlsID09PSAzKSB7XG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUxdLCB7IHR5cGU6ICd0ZXh0L2h0bWwnIH0pKTsgYS5kb3dubG9hZCA9ICdpbmRleC5odG1sJzsgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsgYS5jbGljaygpOyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOyBzaG93VG9hc3QoXCJIVE1M44OV44Kh44Kk44Or44KS44OA44Km44Oz44Ot44O844OJ44GX44G+44GX44GfXCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBjdXJyZW50UXVvdGUgPSBxdW90ZXMuZmluZChxID0+IHEuaWQgPT09IHNlbGVjdGVkUXVvdGVJZCk7XG4gICAgbGV0IGxlZnRBY3Rpb25zID0gbnVsbCwgcmlnaHRBY3Rpb25zID0gbnVsbDtcbiAgICBzd2l0Y2ggKHZpZXdNb2RlKSB7XG4gICAgICBjYXNlICdsaXN0JzogbGVmdEFjdGlvbnMgPSA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZVRoZW1lfSBjbGFzc05hbWU9XCJwLTIgdGV4dC1zdG9uZS00MDAgaG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTIwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPntpc0RhcmtNb2RlID8gPFN1biBzaXplPXsyNH0gLz4gOiA8TW9vbiBzaXplPXsyNH0gLz59PC9idXR0b24+OyByaWdodEFjdGlvbnMgPSA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdzZXR0aW5ncycpfSBjbGFzc05hbWU9XCJwLTIgLW1yLTIgdGV4dC1zdG9uZS00MDAgaG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTIwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPjxNZW51IHNpemU9ezI0fSAvPjwvYnV0dG9uPjsgYnJlYWs7XG4gICAgICBjYXNlICdpbnB1dCc6IGNhc2UgJ3NldHRpbmdzJzogY2FzZSAnZWRpdCc6IHJpZ2h0QWN0aW9ucyA9IDxidXR0b24gb25DbGljaz17KCkgPT4gaXNJbnB1dERpcnR5ID8gc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IHRydWUsIHR5cGU6ICdkaXNjYXJkJywgaWQ6IG51bGwgfSkgOiBzZXRWaWV3TW9kZSgnbGlzdCcpfSBjbGFzc05hbWU9XCJwLTIgLW1yLTIgdGV4dC1zdG9uZS00MDAgaG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTIwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPjxYIHNpemU9ezI0fSAvPjwvYnV0dG9uPjsgYnJlYWs7XG4gICAgICBjYXNlICdkZXRhaWwnOiBjYXNlICdyYW5kb20nOiBsZWZ0QWN0aW9ucyA9IDxidXR0b24gb25DbGljaz17KCkgPT4geyBzZXRWaWV3TW9kZSgnbGlzdCcpOyBzZXRSYW5kb21IaXN0b3J5KFtdKTsgc2V0U2VsZWN0ZWRRdW90ZUlkKG51bGwpOyB9fSBjbGFzc05hbWU9XCJwLTIgLW1sLTIgdGV4dC1zdG9uZS00MDAgaG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTIwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPjxBcnJvd0xlZnQgc2l6ZT17MjR9IC8+PC9idXR0b24+OyByaWdodEFjdGlvbnMgPSA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldElzTWVudVZpc2libGUodHJ1ZSl9IGNsYXNzTmFtZT1cInAtMiAtbXItMiB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzXCI+PE1vcmVIb3Jpem9udGFsIHNpemU9ezI0fSAvPjwvYnV0dG9uPjsgYnJlYWs7XG4gICAgICBjYXNlICdzZWFzb24tZGV0YWlsJzogbGVmdEFjdGlvbnMgPSA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdsaXN0Jyl9IGNsYXNzTmFtZT1cInAtMiAtbWwtMiB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzXCI+PEFycm93TGVmdCBzaXplPXsyNH0gLz48L2J1dHRvbj47IGJyZWFrO1xuICAgIH1cblxuICAgIGlmICghdXNlciB8fCBpc0luaXRpYWxMb2FkaW5nKSByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJoLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmb250LXNlcmlmIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgaXRhbGljIGJnLXN0b25lLTUwIGRhcms6Ymctc3RvbmUtOTAwXCI+6Kqt44G/6L6844G/5LitLi4uPC9kaXY+O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bMTAwZHZoXSBiZy1zdG9uZS01MCBkYXJrOmJnLXN0b25lLTkwMCB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMjAwIGZvbnQtc2FucyBzZWxlY3Rpb246Ymctc3RvbmUtMjAwIGRhcms6c2VsZWN0aW9uOmJnLXN0b25lLTcwMCBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDBcIj5cbiAgICAgICAgPEhlYWRlciBvblRpdGxlQ2xpY2s9e2hhbmRsZVRpdGxlQ2xpY2t9IGxlZnRBY3Rpb25zPXtsZWZ0QWN0aW9uc30gcmlnaHRBY3Rpb25zPXtyaWdodEFjdGlvbnN9IC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IG92ZXJmbG93LWhpZGRlbiByZWxhdGl2ZSBwdC0xNlwiPlxuICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT1cImgtZnVsbCByZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ2lucHV0JyAmJiA8SW5wdXRWaWV3IG9uU2F2ZT17YWRkUXVvdGV9IG9uRGlydHlDaGFuZ2U9e3NldElzSW5wdXREaXJ0eX0gLz59XG4gICAgICAgICAgICB7dmlld01vZGUgPT09ICdsaXN0JyAmJiA8TGlzdFZpZXcgcXVvdGVzPXtxdW90ZXN9IG9uSXRlbUNsaWNrPXsoaWQpID0+IHsgc2V0U2VsZWN0ZWRRdW90ZUlkKGlkKTsgc2V0Vmlld01vZGUoJ2RldGFpbCcpOyB9fSBvblN0YXJ0UmFuZG9tPXsoKSA9PiB7IGlmIChxdW90ZXMubGVuZ3RoID4gMCkgeyBjb25zdCBmID0gcXVvdGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHF1b3Rlcy5sZW5ndGgpXTsgc2V0U2VsZWN0ZWRRdW90ZUlkKGYuaWQpOyBzZXRSYW5kb21IaXN0b3J5KFtmLmlkXSk7IHNldFZpZXdNb2RlKCdyYW5kb20nKTsgfSB9fSBmaWx0ZXJDYXRlZ29yeT17ZmlsdGVyQ2F0ZWdvcnl9IG9uT3BlbkZpbHRlcj17KCkgPT4gc2V0SXNGaWx0ZXJWaXNpYmxlKHRydWUpfSBvbk9wZW5TZWFzb249eygpID0+IHNldFZpZXdNb2RlKCdzZWFzb24tZGV0YWlsJyl9IC8+fVxuICAgICAgICAgICAge3ZpZXdNb2RlID09PSAnZGV0YWlsJyAmJiBjdXJyZW50UXVvdGUgJiYgPFNpbmdsZVF1b3RlVmlldyBxdW90ZT17Y3VycmVudFF1b3RlfSBvbk5leHQ9eygpID0+IHNldFNlbGVjdGVkUXVvdGVJZChxdW90ZXNbKHF1b3Rlcy5maW5kSW5kZXgocSA9PiBxLmlkID09PSBzZWxlY3RlZFF1b3RlSWQpICsgMSkgJSBxdW90ZXMubGVuZ3RoXS5pZCl9IG9uUHJldj17KCkgPT4gc2V0U2VsZWN0ZWRRdW90ZUlkKHF1b3Rlc1socXVvdGVzLmZpbmRJbmRleChxID0+IHEuaWQgPT09IHNlbGVjdGVkUXVvdGVJZCkgLSAxICsgcXVvdGVzLmxlbmd0aCkgJSBxdW90ZXMubGVuZ3RoXS5pZCl9IGhhc05leHQ9e3F1b3Rlcy5sZW5ndGggPiAxfSBoYXNQcmV2PXtxdW90ZXMubGVuZ3RoID4gMX0gbmV4dEljb249e0NoZXZyb25SaWdodH0gb25DbG9zZT17KCkgPT4gc2V0Vmlld01vZGUoJ2xpc3QnKX0gLz59XG4gICAgICAgICAgICB7dmlld01vZGUgPT09ICdyYW5kb20nICYmIGN1cnJlbnRRdW90ZSAmJiA8U2luZ2xlUXVvdGVWaWV3IHF1b3RlPXtjdXJyZW50UXVvdGV9IG9uTmV4dD17KCkgPT4geyBsZXQgbjsgZG8geyBuID0gcXVvdGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHF1b3Rlcy5sZW5ndGgpXS5pZDsgfSB3aGlsZSAobiA9PT0gc2VsZWN0ZWRRdW90ZUlkICYmIHF1b3Rlcy5sZW5ndGggPiAxKTsgc2V0U2VsZWN0ZWRRdW90ZUlkKG4pOyB9fSBuZXh0SWNvbj17U3BhcmtsZXN9IG9uQ2xvc2U9eygpID0+IHNldFZpZXdNb2RlKCdsaXN0Jyl9IGlzUmFuZG9tTW9kZT17dHJ1ZX0gLz59XG4gICAgICAgICAgICB7dmlld01vZGUgPT09ICdlZGl0JyAmJiBjdXJyZW50UXVvdGUgJiYgPElucHV0VmlldyBpbml0aWFsRGF0YT17Y3VycmVudFF1b3RlfSBvblNhdmU9e3VwZGF0ZVF1b3RlfSBvbkRpcnR5Q2hhbmdlPXtzZXRJc0lucHV0RGlydHl9IC8+fVxuICAgICAgICAgICAge3ZpZXdNb2RlID09PSAnc2V0dGluZ3MnICYmIDxTeW5jU2V0dGluZ3NWaWV3IGN1cnJlbnRTaG9ydENvZGU9e3Nob3J0Q29kZX0gaXNMb2FkaW5nQ29kZT17aXNMb2FkaW5nQ29kZX0gZXJyb3JNc2c9e2NvZGVFcnJvcn0gb25SZXRyeUNvZGU9eygpID0+IGZldGNoVXNlckRhdGEodXNlci51aWQpfSBvblN5bmNDb2RlPXtoYW5kbGVTeW5jQnlDb2RlfSBvblJlcXVlc3RSZXNldD17KCkgPT4gc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IHRydWUsIHR5cGU6ICdhY2NvdW50JywgaWQ6IG51bGwgfSl9IHNob3dUb2FzdD17c2hvd1RvYXN0fSBpc1N5bmNlZD17ISFsaW5rZWRVc2VySWR9IG9uVW5zeW5jPXsoKSA9PiBzZXREaWFsb2dTdGF0ZSh7IGlzVmlzaWJsZTogdHJ1ZSwgdHlwZTogJ2FjY291bnQnLCBpZDogbnVsbCB9KX0gLz59XG4gICAgICAgICAgICB7dmlld01vZGUgPT09ICdzZWFzb24tZGV0YWlsJyAmJiA8U2Vhc29uRGV0YWlsVmlldyBvbkNsb3NlPXsoKSA9PiBzZXRWaWV3TW9kZSgnbGlzdCcpfSAvPn1cbiAgICAgICAgICA8L21haW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8RmlsdGVyU2hlZXQgaXNWaXNpYmxlPXtpc0ZpbHRlclZpc2libGV9IGN1cnJlbnRDYXRlZ29yeT17ZmlsdGVyQ2F0ZWdvcnl9IG9uU2VsZWN0PXsoY2F0KSA9PiB7IHNldEZpbHRlckNhdGVnb3J5KGNhdCk7IHNldElzRmlsdGVyVmlzaWJsZShmYWxzZSk7IH19IG9uQ2xvc2U9eygpID0+IHNldElzRmlsdGVyVmlzaWJsZShmYWxzZSl9IC8+XG4gICAgICAgIDxNZW51U2hlZXQgaXNWaXNpYmxlPXtpc01lbnVWaXNpYmxlfSBvbkVkaXQ9eygpID0+IHNldFZpZXdNb2RlKCdlZGl0Jyl9IG9uRGVsZXRlPXsoKSA9PiBzZXREaWFsb2dTdGF0ZSh7IGlzVmlzaWJsZTogdHJ1ZSwgdHlwZTogJ3F1b3RlJywgaWQ6IHNlbGVjdGVkUXVvdGVJZCB9KX0gb25DbG9zZT17KCkgPT4gc2V0SXNNZW51VmlzaWJsZShmYWxzZSl9IC8+XG4gICAgICAgIHt2aWV3TW9kZSA9PT0gJ2xpc3QnICYmIDxGbG9hdGluZ1dyaXRlQnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdpbnB1dCcpfSAvPn1cbiAgICAgICAgPENvbmZpcm1EaWFsb2cgaXNWaXNpYmxlPXtkaWFsb2dTdGF0ZS5pc1Zpc2libGV9IHRpdGxlPXtkaWFsb2dTdGF0ZS50eXBlID09PSAnYWNjb3VudCcgPyBcIuWFqOODh+ODvOOCv+OCkuWJiumZpOOBl+OBvuOBmeOBi++8n1wiIDogZGlhbG9nU3RhdGUudHlwZSA9PT0gJ2Rpc2NhcmQnID8gXCLnt6jpm4blhoXlrrnjgpLnoLTmo4TjgZfjgb7jgZnjgYvvvJ9cIiA6IFwi6KiA6JGJ44KS5YmK6Zmk44GX44G+44GZ44GL77yfXCJ9IG1lc3NhZ2U9e2RpYWxvZ1N0YXRlLnR5cGUgPT09ICdhY2NvdW50JyA/IChsaW5rZWRVc2VySWQgPyBcIuWQjOacn+OCkuino+mZpOOBl+OBvuOBmeOBi++8n+ODh+ODvOOCv+OBr+WJiumZpOOBleOCjOOBvuOBm+OCk+OAglwiIDogXCLjgZnjgbnjgabjga7oqIDokYnjgIHoqK3lrprjgYzmtojljrvjgZXjgozjgb7jgZnjgILjgZPjga7mk43kvZzjga/miLvjgZvjgb7jgZvjgpPjgIJcIikgOiBkaWFsb2dTdGF0ZS50eXBlID09PSAnZGlzY2FyZCcgPyBcIuS/neWtmOOBleOCjOOBpuOBhOOBquOBhOWkieabtOOBr+WkseOCj+OCjOOBvuOBmeOAglwiIDogXCLkuIDluqbliYrpmaTjgZnjgovjgajlhYPjgavmiLvjgZvjgb7jgZvjgpPjgIJcIn0gYWN0aW9uTGFiZWw9e2RpYWxvZ1N0YXRlLnR5cGUgPT09ICdhY2NvdW50JyA/IChsaW5rZWRVc2VySWQgPyBcIuWQjOacn+ino+mZpFwiIDogXCLlhajliYrpmaTjgZfjgabliJ3mnJ/ljJZcIikgOiBkaWFsb2dTdGF0ZS50eXBlID09PSAnZGlzY2FyZCcgPyBcIuegtOajhOOBl+OBpuaIu+OCi1wiIDogXCLliYrpmaTjgZnjgotcIn0gb25Db25maXJtPXtoYW5kbGVDb25maXJtQWN0aW9ufSBvbkNhbmNlbD17KCkgPT4gc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IGZhbHNlLCB0eXBlOiBudWxsLCBpZDogbnVsbCB9KX0gLz5cbiAgICAgICAgPFRvYXN0IG1lc3NhZ2U9e3RvYXN0Lm1lc3NhZ2V9IGlzVmlzaWJsZT17dG9hc3Quc2hvd30gb25IaWRlPXsoKSA9PiBzZXRUb2FzdChwID0+ICh7IC4uLnAsIHNob3c6IGZhbHNlIH0pKX0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG4gIGNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSkucmVuZGVyKDxBcHAgLz4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0UsT0FBT0EsS0FBSyxJQUFJQyxRQUFRLEVBQUVDLFNBQVMsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFdBQVcsUUFBUSxPQUFPO0FBQ2hGLFNBQVNDLFVBQVUsUUFBUSxrQkFBa0I7QUFDN0MsT0FBTyxLQUFLQyxXQUFXLE1BQU0sY0FBYztBQUMzQyxTQUFTQyxhQUFhLFFBQVEsY0FBYztBQUM1QyxTQUFTQyxPQUFPLEVBQUVDLGlCQUFpQixFQUFFQyxrQkFBa0IsRUFBRUMsY0FBYyxFQUFFQyx1QkFBdUIsUUFBUSxlQUFlO0FBQ3ZILFNBQVNDLFlBQVksRUFBRUMsVUFBVSxFQUFFQyxHQUFHLEVBQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxTQUFTLEVBQUVDLFVBQVUsRUFBRUMsS0FBSyxRQUFRLG9CQUFvQjtBQUU1SSxJQUFNO0VBQUVDLE9BQU87RUFBRUMsUUFBUTtFQUFFQyxLQUFLO0VBQUVDLFlBQVk7RUFBRUMsV0FBVztFQUFFQyxTQUFTO0VBQUVDLEtBQUs7RUFBRUMsTUFBTTtFQUFFQyxJQUFJO0VBQUVDLElBQUk7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QUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBNEIsQ0FBQyxFQUNsRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBK0IsQ0FBQyxFQUNyRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBNEIsQ0FBQyxFQUNsRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUU7QUFBb0MsQ0FBQyxFQUN6RjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBbUMsQ0FBQyxFQUN4RjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBbUMsQ0FBQyxFQUMxRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBcUMsQ0FBQyxFQUMxRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUU7QUFBNEIsQ0FBQyxFQUNqRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUU7QUFBb0MsQ0FBQyxFQUN4RjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBNEIsQ0FBQyxFQUNuRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBb0MsQ0FBQyxFQUN6RjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUU7QUFBK0IsQ0FBQyxFQUNuRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBNkIsQ0FBQyxFQUNuRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBNkIsQ0FBQyxFQUNuRjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBZ0MsQ0FBQyxFQUN0RjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBc0IsQ0FBQyxFQUM1RTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUU7QUFBbUMsQ0FBQyxFQUN2RjtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBd0MsQ0FBQyxFQUMvRjtFQUFFSixLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUU7QUFBOEIsQ0FBQyxFQUNuRjtFQUFFSixLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBZ0MsQ0FBQyxFQUN2RjtFQUFFSixLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBNEIsQ0FBQyxFQUNsRjtFQUFFSixLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsT0FBTztFQUFFQyxJQUFJLEVBQUU7QUFBOEIsQ0FBQyxFQUN0RjtFQUFFSixLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUU7QUFBNEIsQ0FBQyxFQUNsRjtFQUFFSixLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsSUFBSTtFQUFFQyxJQUFJ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LEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsVUFBVTtFQUFFQyxJQUFJLEVBQUU7QUFBZ0IsQ0FBQyxFQUMzRTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsVUFBVTtFQUFFQyxJQUFJLEVBQUU7QUFBYyxDQUFDLEVBQ3hFO0VBQUVKLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRSxNQUFNO0VBQUVDLElBQUksRUFBRSxlQUFlO0VBQUVDLElBQUksRUFBRTtBQUFZLENBQUMsRUFDN0U7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFNBQVM7RUFBRUMsSUFBSSxFQUFFO0FBQWMsQ0FBQyxFQUN4RTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsV0FBVztFQUFFQyxJQUFJLEVBQUU7QUFBbUIsQ0FBQyxFQUMvRTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsU0FBUztFQUFFQyxJQUFJLEVBQUU7QUFBYSxDQUFDLEVBQ3ZFO0VBQUVKLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxTQUFTO0VBQUVDLElBQUksRUFBRTtBQUFhLENBQUMsRUFDdEU7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFNBQVM7RUFBRUMsSUFBSSxFQUFFO0FBQWUsQ0FBQyxFQUN4RTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsV0FBVztFQUFFQyxJQUFJLEVBQUU7QUFBYyxDQUFDLEVBQzFFO0VBQUVKLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRSxNQUFNO0VBQUVDLElBQUksRUFBRSxjQUFjO0VBQUVDLElBQUksRUFBRTtBQUFpQixDQUFDLEVBQ2pGO0VBQUVKLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRSxNQUFNO0VBQUVDLElBQUksRUFBRSxjQUFjO0VBQUVDLElBQUksRUFBRTtBQUFjLENBQUMsRUFDOUU7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLGNBQWM7RUFBRUMsSUFBSSxFQUFFO0FBQWdCLENBQUMsRUFDaEY7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLFdBQVc7RUFBRUMsSUFBSSxFQUFFO0FBQWMsQ0FBQyxFQUMxRTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsU0FBUztFQUFFQyxJQUFJLEVBQUU7QUFBZSxDQUFDLEVBQ3hFO0VBQUVKLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxRQUFRO0VBQUVDLElBQUksRUFBRTtBQUFlLENBQUMsRUFDeEU7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLFVBQVU7RUFBRUMsSUFBSSxFQUFFO0FBQWMsQ0FBQyxFQUMxRTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsWUFBWTtFQUFFQyxJQUFJLEVBQUU7QUFBYyxDQUFDLEVBQzNFO0VBQUVKLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRSxNQUFNO0VBQUVDLElBQUksRUFBRSxZQUFZO0VBQUVDLElBQUksRUFBRTtBQUFlLENBQUMsRUFDN0U7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLGFBQWE7RUFBRUMsSUFBSSxFQUFFO0FBQWdCLENBQUMsRUFDN0U7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFVBQVU7RUFBRUMsSUFBSSxFQUFFO0FBQWdCLENBQUMsRUFDMUU7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFFBQVE7RUFBRUMsSUFBSSxFQUFFO0FBQW1CLENBQUMsRUFDNUU7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLE9BQU87RUFBRUMsSUFBSSxFQUFFO0FBQWMsQ0FBQyxFQUN0RTtFQUFFSixLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUUsZ0JBQWdCO0VBQUVDLElBQUksRUFBRTtBQUFhLENBQUMsRUFDL0U7RUFBRUosS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxF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</script></head>
<body class="bg-stone-50 dark:bg-stone-900 transition-colors duration-300">
<div id="root"><div class="h-[100dvh] bg-stone-50 dark:bg-stone-900 text-stone-800 dark:text-stone-200 font-sans selection:bg-stone-200 dark:selection:bg-stone-700 overflow-hidden flex flex-col transition-colors duration-300"><header class="fixed top-0 left-0 right-0 z-50 h-16 bg-stone-50/90 dark:bg-stone-900/90 backdrop-blur-md border-b border-stone-200 dark:border-stone-800 px-6 flex items-center justify-between shadow-sm transition-colors duration-300"><div class="w-20 flex justify-start items-center"><button class="p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div><h1 class="text-xl font-serif font-bold tracking-tight text-stone-800 dark:text-stone-200 cursor-default select-none active:opacity-70 transition-opacity" title="">Kotobako</h1><div class="w-20 flex justify-end items-center gap-1"><button class="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></header><div class="flex-grow overflow-hidden relative pt-16"><main class="h-full relative overflow-hidden"><div class="h-full overflow-y-auto max-w-md mx-auto px-6 pt-4 pb-32 no-scrollbar"><div class="flex justify-between items-end mb-4 px-1 gap-2"><button class="flex items-center gap-2 text-xs text-stone-500 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200 transition-colors tracking-wide py-1 group"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-stone-400 dark:text-stone-500 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors -mt-0.5"><path d="M12 2v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="M20 12h2"></path><path d="m19.07 4.93-1.41 1.41"></path><path d="M15.947 12.65a4 4 0 0 0-5.925-4.128"></path><path d="M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"></path></svg><span class="border-b border-transparent group-hover:border-stone-300 dark:group-hover:border-stone-600 transition-all font-normal"> <span class="mx-1 text-stone-300 dark:text-stone-600">/</span> </span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-stone-300 dark:text-stone-600 group-hover:text-stone-50 dark:group-hover:text-stone-400 transition-colors -mt-0.5"><path d="m9 18 6-6-6-6"></path></svg></button><button class="flex items-center gap-1.5 text-[10px] font-bold text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-300 transition-colors tracking-wide bg-stone-100/80 dark:bg-stone-800/80 px-3 py-1.5 rounded-full border border-stone-200/50 dark:border-stone-700/50"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-filter"><path d="M3 6h18"></path><path d="M7 12h10"></path><path d="M10 18h4"></path></svg><span></span></button></div><div class="flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 p-6 text-center italic font-serif"><p></p><p class="mt-2"></p></div></div></main></div><div class="fixed bottom-6 left-0 right-0 flex justify-center z-40 px-6 pointer-events-none"><button class="bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 border border-stone-700 dark:border-stone-600 pointer-events-auto active:scale-95 transition-all duration-300 hover:bg-stone-800 dark:hover:bg-stone-600 animate-float-up"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pen-line"><path d="M12 20h9"></path><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"></path></svg><span class="text-sm font-bold tracking-widest"></span></button></div></div></div>
<script type="text/babel" data-type="module">
  import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';
  import { createRoot } from 'react-dom/client';
  import * as LucideIcons from 'lucide-react';
  import { initializeApp } from 'firebase/app';
  import { getAuth, signInAnonymously, onAuthStateChanged, setPersistence, browserLocalPersistence } from 'firebase/auth';
  import { getFirestore, collection, doc, setDoc, getDoc, getDocs, addDoc, updateDoc, deleteDoc, onSnapshot, query } from 'firebase/firestore';

  const { PenLine, Sparkles, Check, ChevronRight, ChevronLeft, ArrowLeft, Edit2, Trash2, Menu, Copy, RefreshCw, X, AlertCircle, Moon, Sun, ListFilter, CloudSun, MoreHorizontal, Link: LinkIcon } = LucideIcons;

  const firebaseConfig = {"apiKey":"AIzaSyBLw99hdYwzQKaWFacV3HdIAsa_adAna9k","authDomain":"kotobako-ec686.firebaseapp.com","projectId":"kotobako-ec686","storageBucket":"kotobako-ec686.firebasestorage.app","messagingSenderId":"836620257824","appId":"1:836620257824:web:5a76bf0e646e37f1fb4a45","measurementId":"G-9XDCCZ1BDM"};
  
  // --- Firebase Init ---
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const appId = 'koto-no-ha-app';

  // Auth Init Logic: 
  const initAuthPromise = new Promise((resolve) => {
    setPersistence(auth, browserLocalPersistence)
      .then(() => {
        const unsubscribe = onAuthStateChanged(auth, (user) => {
            if (user) {
                resolve(user);
                unsubscribe();
            } else {
                signInAnonymously(auth).catch((e) => console.error("SignIn Error:", e));
            }
        });
      })
      .catch((e) => {
        console.error("Persistence Init Error:", e);
        signInAnonymously(auth).then(cred => resolve(cred.user));
      });
  });

  const CATEGORIES = ["", "", "", ""];
  const LINKED_USER_KEY = 'kotobako_linked_user_id';

  // --- Constants & Helper Functions ---
  const generateShortCode = () => {
      const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
      let result = '';
      for (let i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
      result += '-';
      for (let i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
      return result;
  };

  const SOLAR_TERMS = [
    { month: 1, day: 6, name: '', yomi: '', desc: '' },
    { month: 1, day: 20, name: '', yomi: '', desc: '' },
    { month: 2, day: 4, name: '', yomi: '', desc: '' },
    { month: 2, day: 19, name: '', yomi: '', desc: '' },
    { month: 3, day: 6, name: '', yomi: '', desc: '' },
    { month: 3, day: 21, name: '', yomi: '', desc: '' },
    { month: 4, day: 5, name: '', yomi: '', desc: '' },
    { month: 4, day: 20, name: '', yomi: '', desc: '' },
    { month: 5, day: 6, name: '', yomi: '', desc: '' },
    { month: 5, day: 21, name: '', yomi: '', desc: '' },
    { month: 6, day: 6, name: '', yomi: '', desc: '' },
    { month: 6, day: 21, name: '', yomi: '', desc: '' },
    { month: 7, day: 7, name: '', yomi: '', desc: '' },
    { month: 7, day: 23, name: '', yomi: '', desc: '' },
    { month: 8, day: 8, name: '', yomi: '', desc: '' },
    { month: 8, day: 23, name: '', yomi: '', desc: '' },
    { month: 9, day: 8, name: '', yomi: '', desc: '' },
    { month: 9, day: 23, name: '', yomi: '', desc: '' },
    { month: 10, day: 8, name: '', yomi: '', desc: '' },
    { month: 10, day: 23, name: '', yomi: '', desc: '' },
    { month: 11, day: 7, name: '', yomi: '', desc: '' },
    { month: 11, day: 22, name: '', yomi: '', desc: '' },
    { month: 12, day: 7, name: '', yomi: '', desc: '' },
    { month: 12, day: 22, name: '', yomi: '', desc: '' },
  ];

  const MICRO_SEASONS = [
    { month: 1, day: 1, name: '', yomi: '', desc: '' },
    { month: 1, day: 6, name: '', yomi: '', desc: '' },
    { month: 1, day: 11, name: '', yomi: '', desc: '' },
    { month: 1, day: 16, name: '', yomi: '', desc: '' },
    { month: 1, day: 20, name: '', yomi: '', desc: '' },
    { month: 1, day: 25, name: '', yomi: '', desc: '' },
    { month: 1, day: 30, name: '', yomi: '', desc: '' },
    { month: 2, day: 4, name: '', yomi: '', desc: '' },
    { month: 2, day: 9, name: '', yomi: '', desc: '' },
    { month: 2, day: 14, name: '', yomi: '', desc: '' },
    { month: 2, day: 19, name: '', yomi: '', desc: '' },
    { month: 2, day: 24, name: '', yomi: '', desc: '' },
    { month: 3, day: 1, name: '', yomi: '', desc: '' },
    { month: 3, day: 6, name: '', yomi: '', desc: '' },
    { month: 3, day: 11, name: '', yomi: '', desc: '' },
    { month: 3, day: 16, name: '', yomi: '', desc: '' },
    { month: 3, day: 21, name: '', yomi: '', desc: '' },
    { month: 3, day: 26, name: '', yomi: '', desc: '' },
    { month: 3, day: 31, name: '', yomi: '', desc: '' },
    { month: 4, day: 5, name: '', yomi: '', desc: '' },
    { month: 4, day: 10, name: '', yomi: '', desc: '' },
    { month: 4, day: 15, name: '', yomi: '', desc: '' },
    { month: 4, day: 20, name: '', yomi: '', desc: '' },
    { month: 4, day: 25, name: '', yomi: '', desc: '' },
    { month: 4, day: 30, name: '', yomi: '', desc: '' },
    { month: 5, day: 6, name: '', yomi: '', desc: '' },
    { month: 5, day: 11, name: '', yomi: '', desc: '' },
    { month: 5, day: 16, name: '', yomi: '', desc: '' },
    { month: 5, day: 21, name: '', yomi: '', desc: '' },
    { month: 5, day: 26, name: '', yomi: '', desc: '' },
    { month: 5, day: 31, name: '', yomi: '', desc: '' },
    { month: 6, day: 6, name: '', yomi: '', desc: '' },
    { month: 6, day: 11, name: '', yomi: '', desc: '' },
    { month: 6, day: 16, name: '', yomi: '', desc: '' },
    { month: 6, day: 21, name: '', yomi: '', desc: '' },
    { month: 6, day: 26, name: '', yomi: '', desc: '' },
    { month: 7, day: 2, name: '', yomi: '', desc: '' },
    { month: 7, day: 7, name: '', yomi: '', desc: '' },
    { month: 7, day: 12, name: '', yomi: '', desc: '' },
    { month: 7, day: 17, name: '', yomi: '', desc: '' },
    { month: 7, day: 23, name: '', yomi: '', desc: '' },
    { month: 7, day: 28, name: '', yomi: '', desc: '' },
    { month: 8, day: 2, name: '', yomi: '', desc: '' },
    { month: 8, day: 8, name: '', yomi: '', desc: '' },
    { month: 8, day: 13, name: '', yomi: '', desc: '' },
    { month: 8, day: 18, name: '', yomi: '', desc: '' },
    { month: 8, day: 23, name: '', yomi: '', desc: '' },
    { month: 8, day: 28, name: '', yomi: '', desc: '' },
    { month: 9, day: 2, name: '', yomi: '', desc: '' },
    { month: 9, day: 8, name: '', yomi: '', desc: '' },
    { month: 9, day: 13, name: '', yomi: '', desc: '' },
    { month: 9, day: 18, name: '', yomi: '', desc: '' },
    { month: 9, day: 23, name: '', yomi: '', desc: '' },
    { month: 9, day: 28, name: '', yomi: '', desc: '' },
    { month: 10, day: 3, name: '', yomi: '', desc: '' },
    { month: 10, day: 8, name: '', yomi: '', desc: '' },
    { month: 10, day: 13, name: '', yomi: '', desc: '' },
    { month: 10, day: 18, name: '', yomi: '', desc: '' },
    { month: 10, day: 23, name: '', yomi: '', desc: '' },
    { month: 10, day: 28, name: '', yomi: '', desc: '' },
    { month: 11, day: 2, name: '', yomi: '', desc: '' },
    { month: 11, day: 7, name: '', yomi: '', desc: '' },
    { month: 11, day: 12, name: '', yomi: '', desc: '' },
    { month: 11, day: 17, name: '', yomi: '', desc: '' },
    { month: 11, day: 22, name: '', yomi: '', desc: '' },
    { month: 11, day: 27, name: '', yomi: '', desc: '' },
    { month: 12, day: 2, name: '', yomi: '', desc: '' },
    { month: 12, day: 7, name: '', yomi: '', desc: '' },
    { month: 12, day: 12, name: '', yomi: '', desc: '' },
    { month: 12, day: 17, name: '', yomi: '', desc: '' },
    { month: 12, day: 22, name: '', yomi: '', desc: '' },
    { month: 12, day: 27, name: '', yomi: '', desc: '' },
  ];

  const getSeasonInfo = (date) => {
    const m = date.getMonth() + 1;
    const d = date.getDate();
    const currentVal = m * 100 + d;
    let solarTerm = SOLAR_TERMS[SOLAR_TERMS.length - 1]; 
    for (let i = 0; i < SOLAR_TERMS.length; i++) {
        const sVal = SOLAR_TERMS[i].month * 100 + SOLAR_TERMS[i].day;
        if (currentVal >= sVal) solarTerm = SOLAR_TERMS[i]; else break;
    }
    if (currentVal < SOLAR_TERMS[0].month * 100 + SOLAR_TERMS[0].day) {
        solarTerm = SOLAR_TERMS[SOLAR_TERMS.length - 1];
    }
    let microSeason = MICRO_SEASONS[MICRO_SEASONS.length - 1];
    for (let i = 0; i < MICRO_SEASONS.length; i++) {
        const sVal = MICRO_SEASONS[i].month * 100 + MICRO_SEASONS[i].day;
        if (currentVal >= sVal) microSeason = MICRO_SEASONS[i]; else break;
    }
    if (currentVal < MICRO_SEASONS[0].month * 100 + MICRO_SEASONS[0].day) {
        microSeason = MICRO_SEASONS[MICRO_SEASONS.length - 1];
    }
    return { solarTerm, microSeason };
  };

  // --- Components ---

  const Header = ({ onTitleClick, leftActions, rightActions }) => (
      <header className="fixed top-0 left-0 right-0 z-50 h-16 bg-stone-50/90 dark:bg-stone-900/90 backdrop-blur-md border-b border-stone-200 dark:border-stone-800 px-6 flex items-center justify-between shadow-sm transition-colors duration-300">
          <div className="w-20 flex justify-start items-center">{leftActions}</div>
          <h1 onClick={onTitleClick} className="text-xl font-serif font-bold tracking-tight text-stone-800 dark:text-stone-200 cursor-default select-none active:opacity-70 transition-opacity" title="">Kotobako</h1>
          <div className="w-20 flex justify-end items-center gap-1">{rightActions}</div>
      </header>
  );

  const SyncSettingsView = ({ currentShortCode, isLoadingCode, errorMsg, onRetryCode, onSyncCode, onRequestReset, showToast, isSynced, onUnsync }) => {
      const [inputId, setInputId] = useState('');
      const handleCopy = () => { if (!currentShortCode || currentShortCode.length < 8) return; navigator.clipboard.writeText(currentShortCode); showToast(""); };
      return (
          <div className="flex flex-col h-full max-w-md mx-auto p-6 pt-6 pb-24 animate-fade-in overflow-y-auto no-scrollbar">
            <div className="space-y-8">
              <div className="space-y-3">
                <label className="text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1">{isSynced ? '' : ''}</label>
                <div className={`flex items-center gap-2 p-4 rounded-xl border shadow-sm transition-colors duration-300 ${isSynced ? 'bg-stone-100 dark:bg-stone-800 border-stone-300 dark:border-stone-600' : 'bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700'}`}>
                  <code className="flex-grow text-xl font-mono font-bold text-stone-800 dark:text-stone-200 tracking-tighter text-center">{isLoadingCode ? '...' : (errorMsg ? '' : currentShortCode)}</code>
                  <button onClick={handleCopy} disabled={!currentShortCode || currentShortCode.includes('...')} className="p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 bg-stone-50 dark:bg-stone-700 rounded-lg active:scale-95 transition-all disabled:opacity-30"><Copy size={20} /></button>
                </div>
                {errorMsg && <div className="flex items-center justify-center gap-2 text-red-400 text-xs mt-2"><AlertCircle size={14} /><span>{errorMsg}</span><button onClick={onRetryCode} className="underline"></button></div>}
                <p className="text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1">{isSynced ? '' : '8'}</p>
              </div>
              {isSynced ? (
                  <div className="pt-4 border-t border-stone-100 dark:border-stone-800">
                      <button onClick={onUnsync} className="w-full py-4 bg-stone-800 dark:bg-stone-700 text-stone-50 rounded-xl font-bold text-sm tracking-widest transition-all active:scale-[0.98] shadow-md flex items-center justify-center gap-2">
                          <LinkIcon size={16} />
                          <span></span>
                      </button>
                  </div>
              ) : (
                  <>
                    <div className="relative">
                        <div className="absolute inset-0 flex items-center"><div className="w-full border-t border-stone-100 dark:border-stone-800"></div></div>
                        <div className="relative flex justify-center text-[10px] uppercase"><span className="bg-stone-50 dark:bg-stone-900 px-3 text-stone-300 dark:text-stone-600 font-bold tracking-widest">or</span></div>
                    </div>
                    <div className="space-y-4">
                        <label className="text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1"></label>
                        <input type="text" value={inputId} onChange={(e) => setInputId(e.target.value.toUpperCase())} placeholder=": ABCD-1234" className="w-full bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 p-4 rounded-xl text-lg text-center focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-stone-800 dark:text-stone-200 font-mono font-bold shadow-sm transition-colors duration-300" />
                        <button onClick={() => onSyncCode(inputId)} disabled={!inputId.trim() || inputId.length < 9} className="w-full py-4 bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-200 rounded-xl font-bold text-sm tracking-widest disabled:opacity-30 transition-all active:scale-[0.98] shadow-md hover:bg-stone-800 dark:hover:bg-stone-600"></button>
                        <p className="text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1 text-center"></p>
                    </div>
                    <div className="pt-8 mt-8 border-t border-stone-100 dark:border-stone-800">
                        <button onClick={onRequestReset} className="w-full py-4 text-red-400 hover:text-red-600 dark:hover:text-red-300 text-xs font-bold tracking-widest transition-colors flex items-center justify-center gap-2"><Trash2 size={16} /><span></span></button>
                    </div>
                  </>
              )}
            </div>
          </div>
      );
  };

  const Toast = ({ message, isVisible, onHide }) => {
      useEffect(() => { if (isVisible) { const timer = setTimeout(onHide, 2000); return () => clearTimeout(timer); } }, [isVisible, onHide]);
      if (!isVisible) return null;
      return <div className="fixed top-20 left-1/2 transform -translate-x-1/2 z-[100] animate-fade-in pointer-events-none"><div className="bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-4 py-2 rounded-full shadow-lg text-sm font-medium flex items-center gap-2 border border-stone-700 dark:border-stone-600"><Check size={14} />{message}</div></div>;
  };

  const FilterSheet = ({ isVisible, currentCategory, onSelect, onClose }) => {
    if (!isVisible) return null;
    return (
      <div className="fixed inset-0 z-[60] flex items-end justify-center sm:items-center p-4 animate-fade-in">
         <div className="absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm" onClick={onClose}></div>
         <div className="relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2 max-h-[80vh] overflow-y-auto no-scrollbar">
           <h3 className="text-xs font-bold text-stone-400 dark:text-stone-500 uppercase tracking-widest mb-4 flex items-center gap-2"><ListFilter size={14} /></h3>
           <button onClick={() => onSelect(null)} className={`w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ${!currentCategory ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800'}`}><span></span>{!currentCategory && <Check size={16} />}</button>
           {CATEGORIES.map(cat => (<button key={cat} onClick={() => onSelect(cat)} className={`w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ${currentCategory === cat ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800'}`}><span>{cat}</span>{currentCategory === cat && <Check size={16} />}</button>))}
           <div className="pt-4 mt-2 border-t border-stone-50 dark:border-stone-800"><button onClick={onClose} className="w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest"></button></div>
         </div>
      </div>
    );
  };

  const MenuSheet = ({ isVisible, onEdit, onDelete, onClose }) => {
    if (!isVisible) return null;
    return (
      <div className="fixed inset-0 z-[70] flex items-end justify-center sm:items-center p-4 animate-fade-in">
         <div className="absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm" onClick={onClose}></div>
         <div className="relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2">
           <button onClick={() => { onClose(); onEdit(); }} className="w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-stone-600 dark:text-stone-300 hover:bg-stone-50 dark:hover:bg-stone-800"><Edit2 size={20} className="text-stone-400 dark:text-stone-500" /><span className="font-bold text-sm tracking-wide"></span></button>
           <button onClick={() => { onClose(); onDelete(); }} className="w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-red-400 hover:bg-red-50 dark:hover:bg-stone-800"><Trash2 size={20} /><span className="font-bold text-sm tracking-wide"></span></button>
           <div className="pt-4 mt-2 border-t border-stone-50 dark:border-stone-800"><button onClick={onClose} className="w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest"></button></div>
         </div>
      </div>
    );
  };

  const SeasonDetailView = ({ initialDate, onClose }) => {
    const [currentDate, setCurrentDate] = useState(initialDate || new Date());
    const { solarTerm, microSeason } = useMemo(() => getSeasonInfo(currentDate), [currentDate]);
    const handlePrev = () => { const d = new Date(currentDate); d.setDate(d.getDate() - 5); setCurrentDate(d); };
    const handleNext = () => { const d = new Date(currentDate); d.setDate(d.getDate() + 5); setCurrentDate(d); };
    const btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";

    return (
      <div className="flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300">
        <div className="flex-grow flex flex-col items-center justify-center pt-5 text-center space-y-12">
          <div className="space-y-3">
            <p className="text-xs text-stone-400 dark:text-stone-500 tracking-[0.2em] uppercase"></p>
            <h2 className="text-3xl font-serif text-stone-800 dark:text-stone-100 tracking-[0.1em]">{solarTerm.name}</h2>
            <p className="text-xs text-stone-400 dark:text-stone-500 font-serif tracking-[0.15em]">{solarTerm.yomi}</p>
            <p className="text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4 tracking-wider">{solarTerm.desc}</p>
          </div>
          <div className="w-12 h-px bg-stone-200 dark:bg-stone-700 mx-auto"></div>
          <div className="space-y-3">
            <p className="text-xs text-stone-400 dark:text-stone-500 tracking-[0.2em] uppercase"></p>
            <h3 className="text-xl font-serif text-stone-700 dark:text-stone-200 tracking-[0.1em]">{microSeason.name}</h3>
            <p className="text-xs text-stone-400 dark:text-stone-500 font-serif tracking-[0.15em]">{microSeason.yomi}</p>
            <p className="text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4 tracking-wider">{microSeason.desc}</p>
          </div>
          <p className="text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest pt-4">{currentDate.toLocaleDateString('ja-JP', { month: 'long', day: 'numeric' })}</p>
        </div>
        <div className="pt-12 pb-24 text-center flex items-center justify-between px-4 max-w-xs mx-auto">
          <button onClick={handlePrev} className="p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"><ChevronLeft size={24} /></button>
          <button onClick={onClose} className={btnStyle}></button>
          <button onClick={handleNext} className="p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"><ChevronRight size={24} /></button>
        </div>
      </div>
    );
  };

  const ConfirmDialog = ({ isVisible, title, message, actionLabel, onConfirm, onCancel }) => {
      if (!isVisible) return null;
      return <div className="fixed inset-0 z-[80] flex items-center justify-center p-6 bg-stone-900/40 dark:bg-black/60 backdrop-blur-sm animate-fade-in"><div className="bg-white dark:bg-stone-800 rounded-2xl p-8 max-w-xs w-full shadow-xl text-center"><h3 className="text-lg font-bold text-stone-800 dark:text-stone-200 mb-2 font-serif">{title}</h3><p className="text-sm text-stone-500 dark:text-stone-400 mb-8 leading-relaxed">{message}</p><div className="space-y-3"><button onClick={onConfirm} className="w-full py-3 bg-stone-900 dark:bg-stone-700 text-stone-50 rounded-lg font-bold text-sm hover:bg-stone-800 dark:hover:bg-stone-600 transition-colors">{actionLabel}</button><button onClick={onCancel} className="w-full py-3 bg-stone-100 dark:bg-stone-900 text-stone-600 dark:text-stone-400 rounded-lg font-bold text-sm hover:bg-stone-200 dark:hover:bg-stone-950 transition-colors"></button></div></div></div>;
  };

  const FloatingWriteButton = ({ onClick }) => (<div className="fixed bottom-6 left-0 right-0 flex justify-center z-40 px-6 pointer-events-none"><button onClick={onClick} className="bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 border border-stone-700 dark:border-stone-600 pointer-events-auto active:scale-95 transition-all duration-300 hover:bg-stone-800 dark:hover:bg-stone-600 animate-float-up"><PenLine size={20} strokeWidth={2.5} /><span className="text-sm font-bold tracking-widest"></span></button></div>);
  
  const InputView = ({ onSave, initialData = null, onDirtyChange }) => {
      const [text, setText] = useState(initialData ? initialData.text : '');
      const [source, setSource] = useState(initialData ? initialData.source : '');
      const [selectedCategory, setSelectedCategory] = useState(initialData ? initialData.category : CATEGORIES[0]);
      const textareaRef = useRef(null);
      useEffect(() => { if (initialData) { setText(initialData.text); setSource(initialData.source || ''); setSelectedCategory(initialData.category); } else { setText(''); setSource(''); setSelectedCategory(CATEGORIES[0]); } }, [initialData]);
      useEffect(() => { if (textareaRef.current) { textareaRef.current.style.height = 'auto'; textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`; } }, [text]);
      useEffect(() => {
        if (onDirtyChange) {
            const isDirty = initialData ? (text !== initialData.text || source !== (initialData.source || '') || selectedCategory !== initialData.category) : (text.trim().length > 0 || source.trim().length > 0);
            onDirtyChange(isDirty);
        }
      }, [text, source, selectedCategory, initialData, onDirtyChange]);
      const handleSave = () => { if (text.trim()) onSave(text, source, selectedCategory); };
      const isEditMode = !!initialData;
      return (
          <div className="flex flex-col h-full max-w-md mx-auto p-6 pt-8 pb-24 animate-fade-in overflow-y-auto no-scrollbar">
            <div className="flex-grow flex flex-col gap-6">
              <label className="text-stone-500 dark:text-stone-400 text-xs font-bold tracking-widest uppercase select-none cursor-default active:text-stone-800 dark:active:text-stone-200 transition-colors">{isEditMode ? '' : ''}</label>
              <textarea ref={textareaRef} value={text} onChange={(e) => setText(e.target.value)} placeholder="..." className="w-full min-h-[8rem] bg-transparent text-lg leading-relaxed text-stone-800 dark:text-stone-200 placeholder:text-stone-300 dark:placeholder:text-stone-600 resize-none focus:outline-none font-serif overflow-hidden transition-colors" autoFocus={!isEditMode} />
              <input type="text" value={source} onChange={(e) => setSource(e.target.value)} placeholder="" className="w-full bg-transparent border-b border-stone-200 dark:border-stone-700 py-2 mb-4 focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-sm font-serif text-stone-600 dark:text-stone-400 placeholder:text-stone-400 dark:placeholder:text-stone-600 transition-colors" />
              <div className="space-y-3">
                <div className="grid grid-cols-2 gap-2">
                  {CATEGORIES.map((cat) => (<button key={cat} onClick={() => setSelectedCategory(cat)} className={`py-3 px-2 text-sm rounded transition-all duration-200 border ${selectedCategory === cat ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 border-stone-800 dark:border-stone-700 shadow-md' : 'bg-white dark:bg-stone-800 text-stone-600 dark:text-stone-400 border-stone-200 dark:border-stone-700 hover:border-stone-400 dark:hover:border-stone-500'}`}>{cat}</button>))}
                </div>
              </div>
            </div>
            <div className="pt-6 pb-4"><button onClick={handleSave} disabled={!text.trim()} className={`w-full py-4 rounded-lg font-bold tracking-widest transition-all duration-200 ${text.trim() ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 shadow-lg hover:bg-stone-700 dark:hover:bg-stone-600 active:scale-[0.98]' : 'bg-stone-200 dark:bg-stone-800 text-stone-400 dark:text-stone-600 cursor-not-allowed'}`}>{isEditMode ? '' : ''}</button></div>
          </div>
      );
  };
  
  const SeasonBadge = ({ onClick }) => {
    const { solarTerm, microSeason } = useMemo(() => getSeasonInfo(new Date()), []);
    return (
      <button onClick={onClick} className="flex items-center gap-2 text-xs text-stone-500 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200 transition-colors tracking-wide py-1 group">
        <CloudSun size={18} className="text-stone-400 dark:text-stone-500 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors -mt-0.5" />
        <span className="border-b border-transparent group-hover:border-stone-300 dark:group-hover:border-stone-600 transition-all font-normal">{solarTerm.name} <span className="mx-1 text-stone-300 dark:text-stone-600">/</span> {microSeason.name}</span>
        <ChevronRight size={14} className="text-stone-300 dark:text-stone-600 group-hover:text-stone-50 dark:group-hover:text-stone-400 transition-colors -mt-0.5" />
      </button>
    );
  };

  const ListView = ({ quotes, onItemClick, onStartRandom, filterCategory, onOpenFilter, onOpenSeason }) => {
    const displayQuotes = filterCategory ? quotes.filter(q => q.category === filterCategory) : quotes;
    return (
      <div className="h-full overflow-y-auto max-w-md mx-auto px-6 pt-4 pb-32 no-scrollbar">
        <div className="flex justify-between items-end mb-4 px-1 gap-2">
          <SeasonBadge onClick={onOpenSeason} />
          <button onClick={onOpenFilter} className="flex items-center gap-1.5 text-[10px] font-bold text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-300 transition-colors tracking-wide bg-stone-100/80 dark:bg-stone-800/80 px-3 py-1.5 rounded-full border border-stone-200/50 dark:border-stone-700/50">
            <ListFilter size={12} /><span>{filterCategory || ''}</span>
          </button>
        </div>
        {displayQuotes.length === 0 ? (
          <div className="flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 p-6 text-center italic font-serif">
            {quotes.length === 0 ? <><p></p><p className="mt-2"></p></> : <p></p>}
          </div>
        ) : (
          <div className="space-y-6">
            <button onClick={onStartRandom} className="w-full flex items-center justify-between py-4 px-5 bg-stone-100 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-2xl hover:bg-stone-200 transition-all group active:scale-[0.98]">
              <div className="flex items-center gap-3"><div className="bg-white dark:bg-stone-700 p-2.5 rounded-xl text-stone-800 dark:text-stone-200 group-hover:rotate-12 transition-transform"><Sparkles size={20} /></div><div className="text-left"><p className="text-sm font-bold text-stone-800 dark:text-stone-200 tracking-wider"></p><p className="text-[10px] text-stone-400 dark:text-stone-500 font-serif"></p></div></div>
              <ChevronRight className="text-stone-300 dark:text-stone-600" size={18} />
            </button>
            {displayQuotes.map((quote) => (
              <div key={quote.id} onClick={() => onItemClick(quote.id)} className="group bg-white dark:bg-stone-850 p-6 rounded-2xl border border-stone-100 dark:border-stone-800 hover:border-stone-300 transition-all cursor-pointer active:bg-stone-50 shadow-sm text-left">
                <p className="text-base leading-relaxed text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-1 font-serif line-clamp-3">{quote.text}</p>
                {quote.source && <p className="text-[10px] text-stone-400 dark:text-stone-500 font-serif mb-3"> {quote.source}</p>}
                <div className="flex justify-between items-end border-t border-stone-50 dark:border-stone-800 pt-3"><span className="text-xs text-stone-500 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 px-2 py-1 rounded-lg font-medium">{quote.category}</span><span className="text-[10px] text-stone-400 dark:text-stone-600 font-mono">{new Date(quote.timestamp).toLocaleDateString('ja-JP')}</span></div>
              </div>
            ))}
          </div>
        )}
      </div>
    );
  };

  const SingleQuoteView = ({ quote, onNext, onPrev, hasNext, hasPrev, nextIcon: NextIcon, onClose, isRandomMode = false }) => {
    const btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";
    return (
      <div className="flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300">
        <div className="flex-grow flex flex-col items-center pt-5 text-center">
          <span className="inline-block px-3 py-1 rounded-full border border-stone-200 dark:border-stone-700 text-xs text-stone-500 dark:text-stone-400 tracking-wide mb-8">{quote.category}</span>
          <div className="px-2">
            <p className="text-xl md:text-2xl font-serif text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-4 select-text leading-relaxed" style={{ lineHeight: '1.8' }}>{quote.text}</p>
            {quote.source && <p className="text-sm text-stone-500 dark:text-stone-400 font-serif mb-8"> {quote.source}</p>}
            <div className="mt-8 flex justify-center text-stone-300 dark:text-stone-700"><div className="h-px w-12 bg-stone-300 dark:bg-stone-700"></div></div>
            <p className="mt-4 text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest">{new Date(quote.timestamp).toLocaleDateString('ja-JP')}</p>
          </div>
        </div>
        <div className="pt-12 pb-24 text-center">
          {isRandomMode ? (
            <div className="flex flex-col items-center gap-8 max-w-xs mx-auto">
              <button onClick={onNext} className="group flex flex-col items-center gap-3 text-stone-400 dark:text-stone-500 hover:text-stone-800 dark:hover:text-stone-200 transition-colors active:scale-95">
                <div className="p-4 rounded-full bg-stone-100 dark:bg-stone-800 group-hover:bg-stone-200 dark:group-hover:bg-stone-700 transition-colors"><NextIcon size={24} strokeWidth={1.5} /></div>
              </button>
              <button onClick={onClose} className={btnStyle}></button>
            </div>
          ) : (
            <div className="flex items-center justify-between px-4 max-w-xs mx-auto">
              <button onClick={onPrev} disabled={!hasPrev} className="p-3 text-stone-400 dark:text-stone-600 enabled:hover:text-stone-600 dark:enabled:hover:text-stone-300 transition-colors disabled:opacity-0 active:scale-95"><ChevronLeft size={24} /></button>
              <button onClick={onClose} className={btnStyle}></button>
              <button onClick={onNext} disabled={!hasNext} className="p-3 text-stone-400 dark:text-stone-500 enabled:hover:text-stone-800 dark:enabled:hover:text-stone-200 transition-colors disabled:opacity-0 active:scale-95"><NextIcon size={24} /></button>
            </div>
          )}
        </div>
      </div>
    );
  };

  // --- Main App ---

  const App = () => {
    const [user, setUser] = useState(null);
    const [shortCode, setShortCode] = useState('');
    const [isLoadingCode, setIsLoadingCode] = useState(false);
    const [codeError, setCodeError] = useState(null);
    const [syncUserId, setSyncUserId] = useState(null);
    const [linkedUserId, setLinkedUserId] = useState(localStorage.getItem(LINKED_USER_KEY));
    const [viewMode, setViewMode] = useState('list');
    const [selectedQuoteId, setSelectedQuoteId] = useState(null);
    const [randomHistory, setRandomHistory] = useState([]);
    const [quotes, setQuotes] = useState([]);
    const [toast, setToast] = useState({ show: false, message: '' });
    const [dialogState, setDialogState] = useState({ isVisible: false, type: null, id: null });
    const [isDarkMode, setIsDarkMode] = useState(false);
    const [filterCategory, setFilterCategory] = useState(null);
    const [isFilterVisible, setIsFilterVisible] = useState(false);
    const [isInputDirty, setIsInputDirty] = useState(false);
    const [isMenuVisible, setIsMenuVisible] = useState(false);
    const [isInitialLoading, setIsInitialLoading] = useState(true);
    const authInitiatedRef = useRef(false);

    useEffect(() => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') { setIsDarkMode(true); document.documentElement.classList.add('dark'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09'); }
      else { setIsDarkMode(false); document.documentElement.classList.remove('dark'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9'); }
    }, []);

    const toggleTheme = () => {
      const next = !isDarkMode; setIsDarkMode(next);
      if (next) { document.documentElement.classList.add('dark'); localStorage.setItem('theme', 'dark'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09'); }
      else { document.documentElement.classList.remove('dark'); localStorage.setItem('theme', 'light'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9'); }
    };

    const fetchUserData = useCallback(async (targetUid) => {
      if (!targetUid) return;
      setIsLoadingCode(true); setCodeError(null);
      try {
        const userCodeRef = doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', targetUid);
        const codeSnap = await getDoc(userCodeRef);
        if (codeSnap.exists()) { 
            setShortCode(codeSnap.data().code); 
        } else { 
            if (user && user.uid === targetUid) {
                const newCode = generateShortCode(); 
                await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', newCode), { uid: targetUid }); 
                await setDoc(userCodeRef, { code: newCode }); 
                setShortCode(newCode); 
            } else {
                setShortCode('-----');
            }
        }
      } catch (e) { console.error(e); setCodeError(""); } finally { setIsLoadingCode(false); }
    }, [user]);

    useEffect(() => {
        initAuthPromise.then(u => { if(u) setUser(u); });
    }, []);

    const activeUserId = linkedUserId || (user ? user.uid : null);

    useEffect(() => {
      if (!activeUserId) { if (!user && !isInitialLoading === false) setIsInitialLoading(false); return; }
      fetchUserData(activeUserId);
      const q = query(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'));
      return onSnapshot(q, (snap) => {
        setQuotes(snap.docs.map(d => ({ id: d.id, ...d.data() })).sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0)));
        setIsInitialLoading(false);
      }, () => setIsInitialLoading(false));
    }, [activeUserId, fetchUserData]);

    const showToast = (message) => setToast({ show: true, message });
    
    const handleSyncByCode = async (code) => { 
        if (!user) return; 
        try { 
            const snap = await getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', code.trim().toUpperCase())); 
            if (snap.exists()) { 
                const targetUid = snap.data().uid;
                setSyncUserId(targetUid);
                setLinkedUserId(targetUid);
                localStorage.setItem(LINKED_USER_KEY, targetUid);
                setViewMode('list'); 
                showToast(""); 
            } else { showToast(""); }
        } catch (e) { showToast(""); } 
    };

    const handleUnsync = () => {
        localStorage.removeItem(LINKED_USER_KEY);
        setLinkedUserId(null);
        setSyncUserId(null);
        showToast("");
        setDialogState({ isVisible: false, type: null, id: null });
    };

    const addQuote = async (text, source, category) => { if (!activeUserId) return; await addDoc(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'), { text, source, category, timestamp: Date.now() }); setIsInputDirty(false); setViewMode('list'); showToast(""); };
    const updateQuote = async (text, source, category) => { if (!activeUserId || !selectedQuoteId) return; await updateDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', selectedQuoteId), { text, source, category }); setIsInputDirty(false); setViewMode(randomHistory.length > 0 ? 'random' : 'detail'); showToast(""); };
    const handleConfirmAction = async () => { if (dialogState.type === 'quote') await confirmDeleteQuote(); else if (dialogState.type === 'account') await confirmResetAccount(); else if (dialogState.type === 'discard') { setIsInputDirty(false); setDialogState({ isVisible: false, type: null, id: null }); setViewMode(randomHistory.length > 0 && viewMode === 'edit' ? 'random' : selectedQuoteId && viewMode === 'edit' ? 'detail' : 'list'); } };
    const confirmDeleteQuote = async () => { if (!activeUserId || !dialogState.id) return; await deleteDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', dialogState.id)); setDialogState({ isVisible: false, type: null, id: null }); setViewMode('list'); setSelectedQuoteId(null); showToast(""); };
    
    const confirmResetAccount = async () => { 
        if (!user) return; 
        try { 
            if (linkedUserId) { handleUnsync(); return; }
            if (shortCode) {
                 const snap = await getDocs(collection(db, 'artifacts', appId, 'users', user.uid, 'quotes')); 
                 await Promise.all(snap.docs.map(d => deleteDoc(d.ref))); 
                 await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', shortCode)); 
                 await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', user.uid)); 
            }
            localStorage.removeItem(LINKED_USER_KEY);
            showToast("..."); 
            setTimeout(() => window.location.reload(), 1500); 
        } catch (e) { console.error(e); showToast(""); setDialogState({ isInitialLoading: false, isVisible: false, type: null, id: null }); } 
    };

    const handleTitleClick = (e) => {
      if (e.detail === 3) {
        const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([document.documentElement.outerHTML], { type: 'text/html' })); a.download = 'index.html'; document.body.appendChild(a); a.click(); document.body.removeChild(a); showToast("HTML");
      }
    };

    const currentQuote = quotes.find(q => q.id === selectedQuoteId);
    let leftActions = null, rightActions = null;
    switch (viewMode) {
      case 'list': leftActions = <button onClick={toggleTheme} className="p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors">{isDarkMode ? <Sun size={24} /> : <Moon size={24} />}</button>; rightActions = <button onClick={() => setViewMode('settings')} className="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><Menu size={24} /></button>; break;
      case 'input': case 'settings': case 'edit': rightActions = <button onClick={() => isInputDirty ? setDialogState({ isVisible: true, type: 'discard', id: null }) : setViewMode('list')} className="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><X size={24} /></button>; break;
      case 'detail': case 'random': leftActions = <button onClick={() => { setViewMode('list'); setRandomHistory([]); setSelectedQuoteId(null); }} className="p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><ArrowLeft size={24} /></button>; rightActions = <button onClick={() => setIsMenuVisible(true)} className="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><MoreHorizontal size={24} /></button>; break;
      case 'season-detail': leftActions = <button onClick={() => setViewMode('list')} className="p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><ArrowLeft size={24} /></button>; break;
    }

    if (!user || isInitialLoading) return <div className="h-screen flex items-center justify-center font-serif text-stone-400 dark:text-stone-500 italic bg-stone-50 dark:bg-stone-900">...</div>;

    return (
      <div className="h-[100dvh] bg-stone-50 dark:bg-stone-900 text-stone-800 dark:text-stone-200 font-sans selection:bg-stone-200 dark:selection:bg-stone-700 overflow-hidden flex flex-col transition-colors duration-300">
        <Header onTitleClick={handleTitleClick} leftActions={leftActions} rightActions={rightActions} />
        <div className="flex-grow overflow-hidden relative pt-16">
          <main className="h-full relative overflow-hidden">
            {viewMode === 'input' && <InputView onSave={addQuote} onDirtyChange={setIsInputDirty} />}
            {viewMode === 'list' && <ListView quotes={quotes} onItemClick={(id) => { setSelectedQuoteId(id); setViewMode('detail'); }} onStartRandom={() => { if (quotes.length > 0) { const f = quotes[Math.floor(Math.random() * quotes.length)]; setSelectedQuoteId(f.id); setRandomHistory([f.id]); setViewMode('random'); } }} filterCategory={filterCategory} onOpenFilter={() => setIsFilterVisible(true)} onOpenSeason={() => setViewMode('season-detail')} />}
            {viewMode === 'detail' && currentQuote && <SingleQuoteView quote={currentQuote} onNext={() => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) + 1) % quotes.length].id)} onPrev={() => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) - 1 + quotes.length) % quotes.length].id)} hasNext={quotes.length > 1} hasPrev={quotes.length > 1} nextIcon={ChevronRight} onClose={() => setViewMode('list')} />}
            {viewMode === 'random' && currentQuote && <SingleQuoteView quote={currentQuote} onNext={() => { let n; do { n = quotes[Math.floor(Math.random() * quotes.length)].id; } while (n === selectedQuoteId && quotes.length > 1); setSelectedQuoteId(n); }} nextIcon={Sparkles} onClose={() => setViewMode('list')} isRandomMode={true} />}
            {viewMode === 'edit' && currentQuote && <InputView initialData={currentQuote} onSave={updateQuote} onDirtyChange={setIsInputDirty} />}
            {viewMode === 'settings' && <SyncSettingsView currentShortCode={shortCode} isLoadingCode={isLoadingCode} errorMsg={codeError} onRetryCode={() => fetchUserData(user.uid)} onSyncCode={handleSyncByCode} onRequestReset={() => setDialogState({ isVisible: true, type: 'account', id: null })} showToast={showToast} isSynced={!!linkedUserId} onUnsync={() => setDialogState({ isVisible: true, type: 'account', id: null })} />}
            {viewMode === 'season-detail' && <SeasonDetailView onClose={() => setViewMode('list')} />}
          </main>
        </div>
        <FilterSheet isVisible={isFilterVisible} currentCategory={filterCategory} onSelect={(cat) => { setFilterCategory(cat); setIsFilterVisible(false); }} onClose={() => setIsFilterVisible(false)} />
        <MenuSheet isVisible={isMenuVisible} onEdit={() => setViewMode('edit')} onDelete={() => setDialogState({ isVisible: true, type: 'quote', id: selectedQuoteId })} onClose={() => setIsMenuVisible(false)} />
        {viewMode === 'list' && <FloatingWriteButton onClick={() => setViewMode('input')} />}
        <ConfirmDialog isVisible={dialogState.isVisible} title={dialogState.type === 'account' ? "" : dialogState.type === 'discard' ? "" : ""} message={dialogState.type === 'account' ? (linkedUserId ? "" : "") : dialogState.type === 'discard' ? "" : ""} actionLabel={dialogState.type === 'account' ? (linkedUserId ? "" : "") : dialogState.type === 'discard' ? "" : ""} onConfirm={handleConfirmAction} onCancel={() => setDialogState({ isVisible: false, type: null, id: null })} />
        <Toast message={toast.message} isVisible={toast.show} onHide={() => setToast(p => ({ ...p, show: false }))} />
      </div>
    );
  };
  createRoot(document.getElementById('root')).render(<App />);
</script>

</body></html>