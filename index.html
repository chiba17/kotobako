<html lang="ja"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImE3ZTI3MWMzMmJkMTBkY2EwNTExOThmNjkwNjc3MGEzN2Q0MmRhM2IiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwNzE1ODkwNzg2MDAyMzE4NTExOCIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2ZiNWZjMjU5YTkwZjg4ZWVfaW5kZXguaHRtbC0xOTAifSwiZXhwIjoxNzY4NTU5MzQ5LCJpYXQiOjE3Njg1NTU3NDksImFsZyI6IlJTMjU2In0.bQOESm5GlY1kxVpqZoBlvBdGHfkgsaC-J-nLr7eA2wkFg7lZomaLxNH8gGU2JecVWK_5-Q8pWFVBQgfSZmnLfxTD4qAbs8IsnW0eYi3YOPzX-5VeyKFS4x_03RVva8aepnxbT2wSn-7qhDjOGxA8DWClYR1d4bBRd1MppRtsgTeV4aRcISJdQiPoafHnyPwY3KOBOutkSP8JRvUyZWJg9JLgXc5Sy41FQiY8LMwR_8eXfvHDhpjAYCjPU_zVcwXXi3dZ4vSxc9b-DIV5DSM2shvPPZqoI7UKV_QY9E78adyvtk6-BJI0MV61JE6zl3gXeLinQNXtBncmf8dtbF-b6g","c_fb5fc259a90f88ee_index.html-190")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#fafaf9">
<title>Kotobako</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    darkMode: 'class',
    theme: {
      extend: {
        colors: {
          stone: {
            850: '#1f1c1a',
            950: '#0c0a09',
          }
        },
        fontFamily: {
          serif: ['"Noto Serif JP"', 'serif'],
        },
        animation: {
          'fade-in': 'fadeIn 0.3s ease-out',
          'float-up': 'floatUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards',
        },
        keyframes: {
          fadeIn: {
            'from': { opacity: '0' },
            'to': { opacity: '1' },
          },
          floatUp: {
            'from': { transform: 'translateY(100px)', opacity: '0' },
            'to': { transform: 'translateY(0)', opacity: '1' },
          }
        }
      }
    }
  }
</script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&amp;display=swap" rel="stylesheet">
<!-- Import Map: 安定性の高い v9.22.0 に戻しました -->
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "lucide-react": "https://esm.sh/lucide-react@0.263.1",
    "firebase/app": "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js",
    "firebase/auth": "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js",
    "firebase/firestore": "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"
  }
}
</script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin="anonymous"></script>
<style>
  body { font-family: 'Noto Serif JP', serif; -webkit-tap-highlight-color: transparent; }
  .pb-safe-area { padding-bottom: env(safe-area-inset-bottom); }
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  textarea::placeholder, input::placeholder { color: #d6d3d1; }
  .dark textarea::placeholder, .dark input::placeholder { color: #57534e; }
</style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.fixed{position:fixed}.relative{position:relative}.bottom-6{bottom:1.5rem}.left-0{left:0px}.right-0{right:0px}.top-0{top:0px}.z-40{z-index:40}.z-50{z-index:50}.mx-1{margin-left:0.25rem;margin-right:0.25rem}.mx-auto{margin-left:auto;margin-right:auto}.-mr-2{margin-right:-0.5rem}.mb-4{margin-bottom:1rem}.mt-2{margin-top:0.5rem}.flex{display:flex}.h-screen{height:100vh}.h-16{height:4rem}.h-\[100dvh\]{height:100dvh}.h-full{height:100%}.w-20{width:5rem}.max-w-md{max-width:28rem}.flex-grow{flex-grow:1}@keyframes floatUp{from{transform:translateY(100px);opacity:0}to{transform:translateY(0);opacity:1}}.animate-float-up{animation:floatUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards}.cursor-default{cursor:default}.select-none{-webkit-user-select:none;user-select:none}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-1\.5{gap:0.375rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded-full{border-radius:9999px}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-stone-200{--tw-border-opacity:1;border-color:rgb(231 229 228 / var(--tw-border-opacity, 1))}.border-stone-200\/50{border-color:rgb(231 229 228 / 0.5)}.border-stone-700{--tw-border-opacity:1;border-color:rgb(68 64 60 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.bg-stone-50{--tw-bg-opacity:1;background-color:rgb(250 250 249 / var(--tw-bg-opacity, 1))}.bg-stone-100\/80{background-color:rgb(245 245 244 / 0.8)}.bg-stone-50\/90{background-color:rgb(250 250 249 / 0.9)}.bg-stone-900{--tw-bg-opacity:1;background-color:rgb(28 25 23 / var(--tw-bg-opacity, 1))}.p-2{padding:0.5rem}.p-6{padding:1.5rem}.px-1{padding-left:0.25rem;padding-right:0.25rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pb-32{padding-bottom:8rem}.pt-16{padding-top:4rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.font-serif{font-family:"Noto Serif JP", serif}.font-sans{font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"}.text-\[10px\]{font-size:10px}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.italic{font-style:italic}.tracking-tight{letter-spacing:-0.025em}.tracking-wide{letter-spacing:0.025em}.tracking-widest{letter-spacing:0.1em}.text-stone-400{--tw-text-opacity:1;color:rgb(168 162 158 / var(--tw-text-opacity, 1))}.text-stone-300{--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.text-stone-50{--tw-text-opacity:1;color:rgb(250 250 249 / var(--tw-text-opacity, 1))}.text-stone-500{--tw-text-opacity:1;color:rgb(120 113 108 / var(--tw-text-opacity, 1))}.text-stone-800{--tw-text-opacity:1;color:rgb(41 37 36 / var(--tw-text-opacity, 1))}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.selection\:bg-stone-200 *::selection{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity, 1))}.selection\:bg-stone-200::selection{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity, 1))}.hover\:bg-stone-800:hover{--tw-bg-opacity:1;background-color:rgb(41 37 36 / var(--tw-bg-opacity, 1))}.hover\:text-stone-600:hover{--tw-text-opacity:1;color:rgb(87 83 78 / var(--tw-text-opacity, 1))}.hover\:text-stone-800:hover{--tw-text-opacity:1;color:rgb(41 37 36 / var(--tw-text-opacity, 1))}.active\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:opacity-70:active{opacity:0.7}.group:hover .group-hover\:border-stone-300{--tw-border-opacity:1;border-color:rgb(214 211 209 / var(--tw-border-opacity, 1))}.group:hover .group-hover\:text-stone-500{--tw-text-opacity:1;color:rgb(120 113 108 / var(--tw-text-opacity, 1))}.group:hover .group-hover\:text-stone-600{--tw-text-opacity:1;color:rgb(87 83 78 / var(--tw-text-opacity, 1))}.dark\:border-stone-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(87 83 78 / var(--tw-border-opacity, 1))}.dark\:border-stone-700\/50:is(.dark *){border-color:rgb(68 64 60 / 0.5)}.dark\:border-stone-800:is(.dark *){--tw-border-opacity:1;border-color:rgb(41 37 36 / var(--tw-border-opacity, 1))}.dark\:bg-stone-900:is(.dark *){--tw-bg-opacity:1;background-color:rgb(28 25 23 / var(--tw-bg-opacity, 1))}.dark\:bg-stone-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(68 64 60 / var(--tw-bg-opacity, 1))}.dark\:bg-stone-800\/80:is(.dark *){background-color:rgb(41 37 36 / 0.8)}.dark\:bg-stone-900\/90:is(.dark *){background-color:rgb(28 25 23 / 0.9)}.dark\:text-stone-500:is(.dark *){--tw-text-opacity:1;color:rgb(120 113 108 / var(--tw-text-opacity, 1))}.dark\:text-stone-100:is(.dark *){--tw-text-opacity:1;color:rgb(245 245 244 / var(--tw-text-opacity, 1))}.dark\:text-stone-200:is(.dark *){--tw-text-opacity:1;color:rgb(231 229 228 / var(--tw-text-opacity, 1))}.dark\:text-stone-400:is(.dark *){--tw-text-opacity:1;color:rgb(168 162 158 / var(--tw-text-opacity, 1))}.dark\:text-stone-600:is(.dark *){--tw-text-opacity:1;color:rgb(87 83 78 / var(--tw-text-opacity, 1))}.dark\:selection\:bg-stone-700 *:is(.dark *)::selection{--tw-bg-opacity:1;background-color:rgb(68 64 60 / var(--tw-bg-opacity, 1))}.dark\:selection\:bg-stone-700:is(.dark *)::selection{--tw-bg-opacity:1;background-color:rgb(68 64 60 / var(--tw-bg-opacity, 1))}.dark\:hover\:bg-stone-600:hover:is(.dark *){--tw-bg-opacity:1;background-color:rgb(87 83 78 / var(--tw-bg-opacity, 1))}.dark\:hover\:text-stone-200:hover:is(.dark *){--tw-text-opacity:1;color:rgb(231 229 228 / var(--tw-text-opacity, 1))}.dark\:hover\:text-stone-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.group:hover .dark\:group-hover\:border-stone-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(87 83 78 / var(--tw-border-opacity, 1))}.group:hover .dark\:group-hover\:text-stone-300:is(.dark *){--tw-text-opacity:1;color:rgb(214 211 209 / var(--tw-text-opacity, 1))}.group:hover .dark\:group-hover\:text-stone-400:is(.dark *){--tw-text-opacity:1;color:rgb(168 162 158 / var(--tw-text-opacity, 1))}</style><script type="module">function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
import React, { useState, useEffect, useRef, useMemo } from 'react';
import { createRoot } from 'react-dom/client';
import * as LucideIcons from 'lucide-react';
import { initializeApp } from 'firebase/app';
import { getAuth, signInAnonymously, onAuthStateChanged, setPersistence, browserLocalPersistence } from 'firebase/auth';
import { getFirestore, collection, doc, setDoc, getDoc, getDocs, addDoc, updateDoc, deleteDoc, onSnapshot, query } from 'firebase/firestore';
var {
  PenLine,
  Sparkles,
  Check,
  ChevronRight,
  ChevronLeft,
  ArrowLeft,
  Edit2,
  Trash2,
  Menu,
  Copy,
  RefreshCw,
  X,
  AlertCircle,
  Moon,
  Sun,
  ListFilter,
  CloudSun,
  MoreHorizontal
} = LucideIcons;
var firebaseConfig = {
  "apiKey": "AIzaSyBLw99hdYwzQKaWFacV3HdIAsa_adAna9k",
  "authDomain": "kotobako-ec686.firebaseapp.com",
  "projectId": "kotobako-ec686",
  "storageBucket": "kotobako-ec686.firebasestorage.app",
  "messagingSenderId": "836620257824",
  "appId": "1:836620257824:web:5a76bf0e646e37f1fb4a45",
  "measurementId": "G-9XDCCZ1BDM"
};

// --- Firebase Init (Global Scope) ---
var app = initializeApp(firebaseConfig);
var auth = getAuth(app);
var db = getFirestore(app);
var appId = 'koto-no-ha-app';

// --- Auth Logic: ID永続化の徹底検証済みロジック ---
var initAuthPromise = new Promise(resolve => {
  // 1. まず永続化設定を適用
  setPersistence(auth, browserLocalPersistence).then(() => {
    // 2. 認証状態の監視を開始
    var unsubscribe = onAuthStateChanged(auth, user => {
      if (user) {
        // A. 既存ユーザーがいる（または新規作成が完了した）場合
        // ここで確実にIDが確定する
        console.log("Auth State: User detected", user.uid);
        resolve(user);
        unsubscribe(); // 確定したのでリスナー解除
      } else {
        // B. ユーザーがいない（null）場合
        // ここに来るのは「本当に初回」か「データが消えた」時のみ
        console.log("Auth State: No user, creating new...");
        signInAnonymously(auth).catch(e => {
          console.error("SignIn Error:", e);
          // エラー時もresolveしないとアプリが止まる可能性があるが、
          // ここではリトライを促すUIがないためログのみ
        });
        // 【重要】ここで unsubscribe() しない！
        // signInAnonymously が成功すると、再度 onAuthStateChanged が発火し、
        // 上記 A のブロックに入って resolve されるのを待つ。
      }
    });
  }).catch(e => {
    console.error("Persistence Init Error:", e);
    // 万が一設定に失敗してもログインを試みる
    signInAnonymously(auth).then(cred => resolve(cred.user));
  });
});
var CATEGORIES = ["心に残った", "新たな気づき", "おもしろい", "役立ちそう"];

// --- Utility Functions ---
var generateShortCode = () => {
  var chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  var result = '';
  for (var i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
  result += '-';
  for (var _i = 0; _i < 4; _i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
  return result;
};

// --- Constants for Seasons ---
var SOLAR_TERMS = [{
  name: '立春',
  yomi: 'りっしゅん',
  month: 2,
  day: 4,
  desc: '寒さも峠を越え、春の気配を感じ始める頃'
}, {
  name: '雨水',
  yomi: 'うすい',
  month: 2,
  day: 19,
  desc: '雪が雨に変わり、氷が解け始める頃'
}, {
  name: '啓蟄',
  yomi: 'けいちつ',
  month: 3,
  day: 6,
  desc: '冬ごもりしていた虫たちが土から出てくる頃'
}, {
  name: '春分',
  yomi: 'しゅんぶん',
  month: 3,
  day: 21,
  desc: '昼と夜の長さがほぼ同じになる日'
}, {
  name: '清明',
  yomi: 'せいめい',
  month: 4,
  day: 5,
  desc: '万物が清らかで生き生きとしてくる頃'
}, {
  name: '穀雨',
  yomi: 'こくう',
  month: 4,
  day: 20,
  desc: '穀物を潤す春雨が降る頃'
}, {
  name: '立夏',
  yomi: 'りっか',
  month: 5,
  day: 6,
  desc: '夏の気配が感じられ始める頃'
}, {
  name: '小満',
  yomi: 'しょうまん',
  month: 5,
  day: 21,
  desc: '陽気が良くなり、草木が成長して茂る頃'
}, {
  name: '芒種',
  yomi: 'ぼうしゅ',
  month: 6,
  day: 6,
  desc: '稲や麦など、穂の出る穀物の種をまく頃'
}, {
  name: '夏至',
  yomi: 'げし',
  month: 6,
  day: 21,
  desc: '一年で最も昼が長い日'
}, {
  name: '小暑',
  yomi: 'しょうしょ',
  month: 7,
  day: 7,
  desc: '梅雨明けが近づき、暑さが本格的になる頃'
}, {
  name: '大暑',
  yomi: 'たいしょ',
  month: 7,
  day: 23,
  desc: '一年で最も暑さが厳しい頃'
}, {
  name: '立秋',
  yomi: 'りっしゅう',
  month: 8,
  day: 8,
  desc: '秋の気配が立ち始める頃'
}, {
  name: '処暑',
  yomi: 'しょしょ',
  month: 8,
  day: 23,
  desc: '暑さが峠を越え、朝夕に涼気を感じる頃'
}, {
  name: '白露',
  yomi: 'はくろ',
  month: 9,
  day: 8,
  desc: '草花に朝露が宿り始める頃'
}, {
  name: '秋分',
  yomi: 'しゅうぶん',
  month: 9,
  day: 23,
  desc: '昼と夜の長さが再びほぼ同じになる日'
}, {
  name: '寒露',
  yomi: 'かんろ',
  month: 10,
  day: 8,
  desc: '冷たい露が降り、秋も深まる頃'
}, {
  name: '霜降',
  yomi: 'そうこう',
  month: 10,
  day: 23,
  desc: '霜が降り始め、冬の近づきを感じる頃'
}, {
  name: '立冬',
  yomi: 'りっとう',
  month: 11,
  day: 7,
  desc: '冬の気配が立ち始める頃'
}, {
  name: '小雪',
  yomi: 'しょうせつ',
  month: 11,
  day: 22,
  desc: 'わずかながら雪が降り始める頃'
}, {
  name: '大雪',
  yomi: 'たいせつ',
  month: 12,
  day: 7,
  desc: '雪が激しく降り始める頃'
}, {
  name: '冬至',
  yomi: 'とうじ',
  month: 12,
  day: 22,
  desc: '一年で最も昼が短い日'
}, {
  name: '小寒',
  yomi: 'しょうかん',
  month: 1,
  day: 6,
  desc: '寒さが厳しくなり始める頃（寒の入り）'
}, {
  name: '大寒',
  yomi: 'だいかん',
  month: 1,
  day: 20,
  desc: '一年で最も寒さが厳しい頃'
}];
var MICRO_SEASONS = [{
  name: '東風解凍',
  yomi: 'はるかぜこおりをとく',
  month: 2,
  day: 4,
  desc: '春の風が氷を解かす'
}, {
  name: '黄鶯睍睆',
  yomi: 'うぐいすなく',
  month: 2,
  day: 9,
  desc: '鶯が鳴き始める'
}, {
  name: '魚上氷',
  yomi: 'うおこおりをいずる',
  month: 2,
  day: 14,
  desc: '割れた氷の間から魚が飛び出る'
}, {
  name: '土脉潤起',
  yomi: 'つちのしょううるおいおこる',
  month: 2,
  day: 19,
  desc: '雨が降り、土が湿り気を含む'
}, {
  name: '霞始靆',
  yomi: 'かすみはじめてたなびく',
  month: 2,
  day: 24,
  desc: '春霞がたなびき始める'
}, {
  name: '草木萌動',
  yomi: 'そうもくめばえいずる',
  month: 3,
  day: 1,
  desc: '草木が芽吹き始める'
}, {
  name: '蟄虫啓戸',
  yomi: 'すごもりのむしとをひらく',
  month: 3,
  day: 6,
  desc: '冬籠りの虫が出て来る'
}, {
  name: '桃始笑',
  yomi: 'ももはじめてさく',
  month: 3,
  day: 11,
  desc: '桃の花が咲き始める'
}, {
  name: '菜虫化蝶',
  yomi: 'なむしちょうとなる',
  month: 3,
  day: 16,
  desc: '青虫が羽化して紋白蝶になる'
}, {
  name: '雀始巣',
  yomi: 'すずめはじめてすくう',
  month: 3,
  day: 21,
  desc: '雀が巣を作り始める'
}, {
  name: '桜始開',
  yomi: 'さくらはじめてひらく',
  month: 3,
  day: 26,
  desc: '桜の花が咲き始める'
}, {
  name: '雷乃発声',
  yomi: 'かみなりすなわちこえをはっす',
  month: 3,
  day: 31,
  desc: '遠くで雷の音がし始める'
}, {
  name: '玄鳥至',
  yomi: 'つばめきたる',
  month: 4,
  day: 5,
  desc: '燕が南からやって来る'
}, {
  name: '鴻雁北',
  yomi: 'こうがんかえる',
  month: 4,
  day: 10,
  desc: '雁が北へ帰っていく'
}, {
  name: '虹始見',
  yomi: 'にじはじめてあらわる',
  month: 4,
  day: 15,
  desc: '雨上がりに虹が見え始める'
}, {
  name: '葭始生',
  yomi: 'あしはじめてしょうず',
  month: 4,
  day: 20,
  desc: '葦が芽を吹き始める'
}, {
  name: '霜止出苗',
  yomi: 'しもやみてなえいずる',
  month: 4,
  day: 25,
  desc: '霜が降りなくなり苗が育つ'
}, {
  name: '牡丹華',
  yomi: 'ぼたんはなさく',
  month: 4,
  day: 30,
  desc: '牡丹の花が咲く'
}, {
  name: '蛙始鳴',
  yomi: 'かわずはじめてなく',
  month: 5,
  day: 6,
  desc: '蛙が鳴き始める'
}, {
  name: '蚯蚓出',
  yomi: 'みみずいずる',
  month: 5,
  day: 11,
  desc: '蚯蚓が地上に出てくる'
}, {
  name: '竹笋生',
  yomi: 'たけのこしょうず',
  month: 5,
  day: 16,
  desc: '筍が生えてくる'
}, {
  name: '蚕起食桑',
  yomi: 'かいこおきてくわをはむ',
  month: 5,
  day: 21,
  desc: '蚕が桑を盛んに食べ始める'
}, {
  name: '紅花栄',
  yomi: 'べにばなさかう',
  month: 5,
  day: 26,
  desc: '紅花が盛んに咲く'
}, {
  name: '麦秋至',
  yomi: 'むぎのときいたる',
  month: 5,
  day: 31,
  desc: '麦が熟し麦秋となる'
}, {
  name: '蟷螂生',
  yomi: 'かまきりしょうず',
  month: 6,
  day: 6,
  desc: 'カマキリが生まれる'
}, {
  name: '腐草為蛍',
  yomi: 'くされたるくさほたるとなる',
  month: 6,
  day: 11,
  desc: '蛍が飛び始める'
}, {
  name: '梅子黄',
  yomi: 'うめのみきばむ',
  month: 6,
  day: 16,
  desc: '梅の実が黄ばんで熟す'
}, {
  name: '乃東枯',
  yomi: 'なつかれくさかるる',
  month: 6,
  day: 21,
  desc: '夏枯草が枯れる'
}, {
  name: '菖蒲華',
  yomi: 'あやめはなさく',
  month: 6,
  day: 26,
  desc: 'あやめの花が咲く'
}, {
  name: '半夏生',
  yomi: 'はんげしょうず',
  month: 7,
  day: 2,
  desc: '半夏（カラスビシャク）が生える'
}, {
  name: '温風至',
  yomi: 'あつかぜいたる',
  month: 7,
  day: 7,
  desc: '暖かい風が吹いて来る'
}, {
  name: '蓮始開',
  yomi: 'はすはじめてひらく',
  month: 7,
  day: 12,
  desc: '蓮の花が開き始める'
}, {
  name: '鷹乃学習',
  yomi: 'たかすなわちわざをならう',
  month: 7,
  day: 17,
  desc: '鷹の幼鳥が飛ぶことを覚える'
}, {
  name: '桐始結花',
  yomi: 'きりはじめてはなをむすぶ',
  month: 7,
  day: 23,
  desc: '桐の実がなり始める'
}, {
  name: '土潤溽暑',
  yomi: 'つちうるおうてむしあつし',
  month: 7,
  day: 28,
  desc: '土が湿って蒸し暑くなる'
}, {
  name: '大雨時行',
  yomi: 'たいうときどきふる',
  month: 8,
  day: 2,
  desc: '時として大雨が降る'
}, {
  name: '涼風至',
  yomi: 'すずかぜいたる',
  month: 8,
  day: 8,
  desc: '涼しい風が立ち始める'
}, {
  name: '寒蝉鳴',
  yomi: 'ひぐらしなく',
  month: 8,
  day: 13,
  desc: 'ヒグラシが鳴き始める'
}, {
  name: '蒙霧升降',
  yomi: 'ふかききりまとう',
  month: 8,
  day: 18,
  desc: '深い霧が立ち込める'
}, {
  name: '綿柎開',
  yomi: 'わたのはなしべひらく',
  month: 8,
  day: 23,
  desc: '綿を包むガクが開く'
}, {
  name: '天地始粛',
  yomi: 'てんちはじめてさむし',
  month: 8,
  day: 28,
  desc: 'ようやく暑さが鎮まる'
}, {
  name: '禾乃登',
  yomi: 'こくものすなわちみのる',
  month: 9,
  day: 2,
  desc: '稲が実る'
}, {
  name: '草露白',
  yomi: 'くさのつゆしろし',
  month: 9,
  day: 8,
  desc: '草に降りた露が白く光る'
}, {
  name: '鶺鴒鳴',
  yomi: 'せきれいなく',
  month: 9,
  day: 13,
  desc: '鶺鴒（せきれい）が鳴き始める'
}, {
  name: '玄鳥去',
  yomi: 'つばめさる',
  month: 9,
  day: 18,
  desc: '燕が南へ帰って行く'
}, {
  name: '雷乃収声',
  yomi: 'かみなりすなわちこえをおさむ',
  month: 9,
  day: 23,
  desc: '雷が鳴らなくなる'
}, {
  name: '蟄虫坏戸',
  yomi: 'むしかくれてとをふさぐ',
  month: 9,
  day: 28,
  desc: '虫が土中に掘ってこもる'
}, {
  name: '水始涸',
  yomi: 'みずはじめてかる',
  month: 10,
  day: 3,
  desc: '田畑の水を抜いて干す'
}, {
  name: '鴻雁来',
  yomi: 'こうがんきたる',
  month: 10,
  day: 8,
  desc: '雁が北から渡って来る'
}, {
  name: '菊花開',
  yomi: 'きくのはなひらく',
  month: 10,
  day: 13,
  desc: '菊の花が咲く'
}, {
  name: '蟋蟀在戸',
  yomi: 'きりぎりすとにあり',
  month: 10,
  day: 18,
  desc: 'キリギリスが戸口で鳴く'
}, {
  name: '霜始降',
  yomi: 'しもはじめてふる',
  month: 10,
  day: 23,
  desc: '霜が降り始める'
}, {
  name: '霎時施',
  yomi: 'こさめときどきふる',
  month: 10,
  day: 28,
  desc: '小雨がしとしと降る'
}, {
  name: '楓蔦黄',
  yomi: 'もみじつたきばむ',
  month: 11,
  day: 2,
  desc: '紅葉や蔦が色づく'
}, {
  name: '山茶始開',
  yomi: 'つばきはじめてひらく',
  month: 11,
  day: 7,
  desc: '山茶花が咲き始める'
}, {
  name: '地始凍',
  yomi: 'ちはじめてこおる',
  month: 11,
  day: 12,
  desc: '大地が凍り始める'
}, {
  name: '金盞香',
  yomi: 'きんせんかさく',
  month: 11,
  day: 17,
  desc: '水仙の花が咲き香る'
}, {
  name: '虹蔵不見',
  yomi: 'にじかくれてみえず',
  month: 11,
  day: 22,
  desc: '虹を見かけなくなる'
}, {
  name: '朔風払葉',
  yomi: 'きたかぜこのはをはらう',
  month: 11,
  day: 27,
  desc: '北風が木の葉を払い落とす'
}, {
  name: '橘始黄',
  yomi: 'たちばなはじめてきばむ',
  month: 12,
  day: 2,
  desc: '橘の実が黄色く色づく'
}, {
  name: '閉塞成冬',
  yomi: 'そらさむくふゆとなる',
  month: 12,
  day: 7,
  desc: '天地の気が塞がり冬となる'
}, {
  name: '熊蟄穴',
  yomi: 'くまあなにこもる',
  month: 12,
  day: 12,
  desc: '熊が穴に入って冬眠する'
}, {
  name: '鱖魚群',
  yomi: 'さけのうおむらがる',
  month: 12,
  day: 17,
  desc: '鮭が群がって川を上る'
}, {
  name: '乃東生',
  yomi: 'なつかれくさしょうず',
  month: 12,
  day: 22,
  desc: '夏枯草が芽を出す'
}, {
  name: '麋角解',
  yomi: 'おおしかのつのおつる',
  month: 12,
  day: 27,
  desc: '大鹿の角が落ちる'
}, {
  name: '雪下出麦',
  yomi: 'ゆきわたりてむぎのびる',
  month: 1,
  day: 1,
  desc: '雪の下で麦が伸びる'
}, {
  name: '芹乃栄',
  yomi: 'せりすなわちさかう',
  month: 1,
  day: 6,
  desc: '芹が盛んに育つ'
}, {
  name: '水泉動',
  yomi: 'しみずあたたかをふくむ',
  month: 1,
  day: 11,
  desc: '地中の凍った水が溶け動き始める'
}, {
  name: '雉始雊',
  yomi: 'きじはじめてなく',
  month: 1,
  day: 16,
  desc: '雄の雉が鳴き始める'
}, {
  name: '款冬華',
  yomi: 'ふきのはなさく',
  month: 1,
  day: 20,
  desc: '蕗の薹（ふきのとう）が顔を出す'
}, {
  name: '水沢腹堅',
  yomi: 'さわみずこおりつめる',
  month: 1,
  day: 25,
  desc: '沢の水が厚く凍りつめる'
}, {
  name: '鶏始乳',
  yomi: 'にわとりはじめてとやにつく',
  month: 1,
  day: 30,
  desc: '鶏が卵を産み始める'
}];
var getSeasonInfo = date => {
  var m = date.getMonth() + 1;
  var d = date.getDate();
  var currentVal = m * 100 + d;
  var solarTerm = SOLAR_TERMS[SOLAR_TERMS.length - 1];
  for (var i = 0; i < SOLAR_TERMS.length; i++) {
    var sVal = SOLAR_TERMS[i].month * 100 + SOLAR_TERMS[i].day;
    if (currentVal >= sVal) {
      solarTerm = SOLAR_TERMS[i];
    } else {
      break;
    }
  }
  if (currentVal < SOLAR_TERMS[0].month * 100 + SOLAR_TERMS[0].day) {
    // 年始の調整（大寒など）
  }
  var microSeason = MICRO_SEASONS[MICRO_SEASONS.length - 1];
  for (var _i2 = 0; _i2 < MICRO_SEASONS.length; _i2++) {
    var _sVal = MICRO_SEASONS[_i2].month * 100 + MICRO_SEASONS[_i2].day;
    if (currentVal >= _sVal) {
      microSeason = MICRO_SEASONS[_i2];
    } else {
      break;
    }
  }
  return {
    solarTerm,
    microSeason
  };
};
var Header = _ref => {
  var {
    onTitleClick,
    leftActions,
    rightActions
  } = _ref;
  return /*#__PURE__*/React.createElement("header", {
    className: "fixed top-0 left-0 right-0 z-50 h-16 bg-stone-50/90 dark:bg-stone-900/90 backdrop-blur-md border-b border-stone-200 dark:border-stone-800 px-6 flex items-center justify-between shadow-sm transition-colors duration-300"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-20 flex justify-start items-center"
  }, leftActions), /*#__PURE__*/React.createElement("h1", {
    onClick: onTitleClick,
    className: "text-xl font-serif font-bold tracking-tight text-stone-800 dark:text-stone-200 cursor-default select-none active:opacity-70 transition-opacity",
    title: "\u30C8\u30EA\u30D7\u30EB\u30AF\u30EA\u30C3\u30AF\u3067\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9"
  }, "Kotobako"), /*#__PURE__*/React.createElement("div", {
    className: "w-20 flex justify-end items-center gap-1"
  }, rightActions));
};
var SyncSettingsView = _ref2 => {
  var {
    currentShortCode,
    isLoadingCode,
    errorMsg,
    onRetryCode,
    onSyncCode,
    onRequestReset,
    showToast
  } = _ref2;
  var [inputId, setInputId] = useState('');
  var handleCopy = () => {
    if (!currentShortCode || currentShortCode.length < 8) return;
    navigator.clipboard.writeText(currentShortCode);
    showToast("同期コードをコピーしました");
  };
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-6 pt-6 pb-24 animate-fade-in overflow-y-auto no-scrollbar"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1"
  }, "\u3042\u306A\u305F\u306E\u540C\u671F\u30B3\u30FC\u30C9"), /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2 bg-white dark:bg-stone-800 p-4 rounded-xl border border-stone-200 dark:border-stone-700 shadow-sm"
  }, /*#__PURE__*/React.createElement("code", {
    className: "flex-grow text-xl font-mono font-bold text-stone-800 dark:text-stone-200 tracking-tighter text-center"
  }, isLoadingCode ? '...' : errorMsg ? 'エラー' : currentShortCode), /*#__PURE__*/React.createElement("button", {
    onClick: handleCopy,
    disabled: !currentShortCode || currentShortCode.includes('...'),
    className: "p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 bg-stone-50 dark:bg-stone-700 rounded-lg active:scale-95 transition-all disabled:opacity-30"
  }, /*#__PURE__*/React.createElement(Copy, {
    size: 20
  }))), errorMsg && /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-center gap-2 text-red-400 text-xs mt-2"
  }, /*#__PURE__*/React.createElement(AlertCircle, {
    size: 14
  }), /*#__PURE__*/React.createElement("span", null, errorMsg), /*#__PURE__*/React.createElement("button", {
    onClick: onRetryCode,
    className: "underline"
  }, "\u518D\u8A66\u884C")), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1"
  }, "\u3053\u306E8\u6587\u5B57\u3092\u5225\u306E\u7AEF\u672B\u3067\u5165\u529B\u3059\u308B\u3068\u3001\u8A00\u8449\u3092\u540C\u671F\u3067\u304D\u307E\u3059\u3002")), /*#__PURE__*/React.createElement("div", {
    className: "relative"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 flex items-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-full border-t border-stone-100 dark:border-stone-800"
  })), /*#__PURE__*/React.createElement("div", {
    className: "relative flex justify-center text-[10px] uppercase"
  }, /*#__PURE__*/React.createElement("span", {
    className: "bg-stone-50 dark:bg-stone-900 px-3 text-stone-300 dark:text-stone-600 font-bold tracking-widest"
  }, "or"))), /*#__PURE__*/React.createElement("div", {
    className: "space-y-4"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1"
  }, "\u5225\u306E\u30B3\u30FC\u30C9\u3068\u540C\u671F\u3059\u308B"), /*#__PURE__*/React.createElement("input", {
    type: "text",
    value: inputId,
    onChange: e => setInputId(e.target.value.toUpperCase()),
    placeholder: "\u4F8B: ABCD-1234",
    className: "w-full bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 p-4 rounded-xl text-lg text-center focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-stone-800 dark:text-stone-200 font-mono font-bold shadow-sm"
  }), /*#__PURE__*/React.createElement("button", {
    onClick: () => onSyncCode(inputId),
    disabled: !inputId.trim() || inputId.length < 9,
    className: "w-full py-4 bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-200 rounded-xl font-bold text-sm tracking-widest disabled:opacity-30 transition-all active:scale-[0.98] shadow-md hover:bg-stone-800 dark:hover:bg-stone-600"
  }, "\u540C\u671F\u3092\u958B\u59CB\u3059\u308B"), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1 text-center"
  }, "\u203B\u5165\u529B\u3057\u305F\u30B3\u30FC\u30C9\u306E\u30C7\u30FC\u30BF\u306B\u5207\u308A\u66FF\u308F\u308A\u307E\u3059\u3002")), /*#__PURE__*/React.createElement("div", {
    className: "pt-8 mt-8 border-t border-stone-100 dark:border-stone-800"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onRequestReset,
    className: "w-full py-4 text-red-400 hover:text-red-600 dark:hover:text-red-300 text-xs font-bold tracking-widest transition-colors flex items-center justify-center gap-2"
  }, /*#__PURE__*/React.createElement(Trash2, {
    size: 16
  }), /*#__PURE__*/React.createElement("span", null, "\u5168\u30C7\u30FC\u30BF\u3092\u524A\u9664\u3057\u3066\u521D\u671F\u5316")))));
};
var Toast = _ref3 => {
  var {
    message,
    isVisible,
    onHide
  } = _ref3;
  useEffect(() => {
    if (isVisible) {
      var timer = setTimeout(onHide, 2000);
      return () => clearTimeout(timer);
    }
  }, [isVisible, onHide]);
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed top-20 left-1/2 transform -translate-x-1/2 z-[100] animate-fade-in pointer-events-none"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-4 py-2 rounded-full shadow-lg text-sm font-medium flex items-center gap-2 border border-stone-700 dark:border-stone-600"
  }, /*#__PURE__*/React.createElement(Check, {
    size: 14
  }), message));
};
var FilterSheet = _ref4 => {
  var {
    isVisible,
    currentCategory,
    onSelect,
    onClose
  } = _ref4;
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[60] flex items-end justify-center sm:items-center p-4 animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm",
    onClick: onClose
  }), /*#__PURE__*/React.createElement("div", {
    className: "relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2 max-h-[80vh] overflow-y-auto no-scrollbar"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-xs font-bold text-stone-400 dark:text-stone-500 uppercase tracking-widest mb-4 flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(ListFilter, {
    size: 14
  }), "\u8868\u793A\u3059\u308B\u8A00\u8449\u3092\u9078\u3076"), /*#__PURE__*/React.createElement("button", {
    onClick: () => onSelect(null),
    className: "w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ".concat(!currentCategory ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800')
  }, /*#__PURE__*/React.createElement("span", null, "\u3059\u3079\u3066\u306E\u8A00\u8449"), !currentCategory && /*#__PURE__*/React.createElement(Check, {
    size: 16
  })), CATEGORIES.map(cat => /*#__PURE__*/React.createElement("button", {
    key: cat,
    onClick: () => onSelect(cat),
    className: "w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ".concat(currentCategory === cat ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800')
  }, /*#__PURE__*/React.createElement("span", null, cat), currentCategory === cat && /*#__PURE__*/React.createElement(Check, {
    size: 16
  }))), /*#__PURE__*/React.createElement("div", {
    className: "pt-4 mt-2 border-t border-stone-50 dark:border-stone-800"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: "w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest"
  }, "\u9589\u3058\u308B"))));
};
var MenuSheet = _ref5 => {
  var {
    isVisible,
    onEdit,
    onDelete,
    onClose
  } = _ref5;
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[70] flex items-end justify-center sm:items-center p-4 animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm",
    onClick: onClose
  }), /*#__PURE__*/React.createElement("div", {
    className: "relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      onClose();
      onEdit();
    },
    className: "w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-stone-600 dark:text-stone-300 hover:bg-stone-50 dark:hover:bg-stone-800"
  }, /*#__PURE__*/React.createElement(Edit2, {
    size: 20,
    className: "text-stone-400 dark:text-stone-500"
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-sm tracking-wide"
  }, "\u8A00\u8449\u3092\u7DE8\u96C6\u3059\u308B")), /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      onClose();
      onDelete();
    },
    className: "w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-red-400 hover:bg-red-50 dark:hover:bg-stone-800"
  }, /*#__PURE__*/React.createElement(Trash2, {
    size: 20
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-sm tracking-wide"
  }, "\u524A\u9664\u3059\u308B")), /*#__PURE__*/React.createElement("div", {
    className: "pt-4 mt-2 border-t border-stone-50 dark:border-stone-800"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: "w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest"
  }, "\u9589\u3058\u308B"))));
};
var SeasonDetailView = _ref6 => {
  var {
    initialDate,
    onClose
  } = _ref6;
  var [currentDate, setCurrentDate] = useState(initialDate || new Date());
  var {
    solarTerm,
    microSeason
  } = useMemo(() => getSeasonInfo(currentDate), [currentDate]);
  var handlePrev = () => {
    var d = new Date(currentDate);
    d.setDate(d.getDate() - 5);
    setCurrentDate(d);
  };
  var handleNext = () => {
    var d = new Date(currentDate);
    d.setDate(d.getDate() + 5);
    setCurrentDate(d);
  };
  var btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-grow flex flex-col items-center justify-center pt-5 text-center space-y-10"
  }, /*#__PURE__*/React.createElement("div", {
    className: "space-y-2"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 font-bold tracking-widest uppercase"
  }, "\u4E8C\u5341\u56DB\u7BC0\u6C17"), /*#__PURE__*/React.createElement("h2", {
    className: "text-3xl font-serif font-bold text-stone-800 dark:text-stone-100"
  }, solarTerm.name), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 font-serif"
  }, solarTerm.yomi), /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4"
  }, solarTerm.desc)), /*#__PURE__*/React.createElement("div", {
    className: "w-12 h-px bg-stone-200 dark:bg-stone-700 mx-auto"
  }), /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 font-bold tracking-widest uppercase"
  }, "\u4E03\u5341\u4E8C\u5019"), /*#__PURE__*/React.createElement("h3", {
    className: "text-xl font-serif font-bold text-stone-700 dark:text-stone-200"
  }, microSeason.name), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-500 font-serif"
  }, microSeason.yomi), /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4"
  }, microSeason.desc)), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest pt-4"
  }, currentDate.toLocaleDateString('ja-JP', {
    month: 'long',
    day: 'numeric'
  }))), /*#__PURE__*/React.createElement("div", {
    className: "pt-12 pb-24 text-center flex items-center justify-between px-4 max-w-xs mx-auto"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: handlePrev,
    className: "p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"
  }, /*#__PURE__*/React.createElement(ChevronLeft, {
    size: 24
  })), /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: btnStyle
  }, "\u9589\u3058\u308B"), /*#__PURE__*/React.createElement("button", {
    onClick: handleNext,
    className: "p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"
  }, /*#__PURE__*/React.createElement(ChevronRight, {
    size: 24
  }))));
};
var ConfirmDialog = _ref7 => {
  var {
    isVisible,
    title,
    message,
    actionLabel,
    onConfirm,
    onCancel
  } = _ref7;
  if (!isVisible) return null;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[80] flex items-center justify-center p-6 bg-stone-900/40 dark:bg-black/60 backdrop-blur-sm animate-fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white dark:bg-stone-800 rounded-2xl p-8 max-w-xs w-full shadow-xl text-center"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-lg font-bold text-stone-800 dark:text-stone-200 mb-2 font-serif"
  }, title), /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-500 dark:text-stone-400 mb-8 leading-relaxed"
  }, message), /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onConfirm,
    className: "w-full py-3 bg-stone-900 dark:bg-stone-700 text-stone-50 rounded-lg font-bold text-sm hover:bg-stone-800 dark:hover:bg-stone-600 transition-colors"
  }, actionLabel), /*#__PURE__*/React.createElement("button", {
    onClick: onCancel,
    className: "w-full py-3 bg-stone-100 dark:bg-stone-900 text-stone-600 dark:text-stone-400 rounded-lg font-bold text-sm hover:bg-stone-200 dark:hover:bg-stone-950 transition-colors"
  }, "\u30AD\u30E3\u30F3\u30BB\u30EB"))));
};
var FloatingWriteButton = _ref8 => {
  var {
    onClick
  } = _ref8;
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed bottom-6 left-0 right-0 flex justify-center z-40 px-6 pointer-events-none"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onClick,
    className: "bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 border border-stone-700 dark:border-stone-600 pointer-events-auto active:scale-95 transition-all duration-300 hover:bg-stone-800 dark:hover:bg-stone-600 animate-float-up"
  }, /*#__PURE__*/React.createElement(PenLine, {
    size: 20,
    strokeWidth: 2.5
  }), /*#__PURE__*/React.createElement("span", {
    className: "text-sm font-bold tracking-widest"
  }, "\u8A18\u3059")));
};
var InputView = _ref9 => {
  var {
    onSave,
    initialData = null,
    onDirtyChange
  } = _ref9;
  var [text, setText] = useState(initialData ? initialData.text : '');
  var [source, setSource] = useState(initialData ? initialData.source : '');
  var [selectedCategory, setSelectedCategory] = useState(initialData ? initialData.category : CATEGORIES[0]);
  var textareaRef = useRef(null);
  useEffect(() => {
    if (initialData) {
      setText(initialData.text);
      setSource(initialData.source || '');
      setSelectedCategory(initialData.category);
    } else {
      setText('');
      setSource('');
      setSelectedCategory(CATEGORIES[0]);
    }
  }, [initialData]);
  useEffect(() => {
    if (textareaRef.current) {
      textareaRef.current.style.height = 'auto';
      textareaRef.current.style.height = "".concat(textareaRef.current.scrollHeight, "px");
    }
  }, [text]);
  useEffect(() => {
    if (onDirtyChange) {
      var isDirty = initialData ? text !== initialData.text || source !== (initialData.source || '') || selectedCategory !== initialData.category : text.trim().length > 0 || source.trim().length > 0;
      onDirtyChange(isDirty);
    }
  }, [text, source, selectedCategory, initialData, onDirtyChange]);
  var handleSave = () => {
    if (text.trim()) onSave(text, source, selectedCategory);
  };
  var isEditMode = !!initialData;
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-6 pt-8 pb-24 animate-fade-in overflow-y-auto no-scrollbar"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-grow flex flex-col gap-6"
  }, /*#__PURE__*/React.createElement("label", {
    className: "text-stone-500 dark:text-stone-400 text-xs font-bold tracking-widest uppercase select-none cursor-default active:text-stone-800 dark:active:text-stone-200 transition-colors"
  }, isEditMode ? '言葉を編集する' : '言葉を記す'), /*#__PURE__*/React.createElement("textarea", {
    ref: textareaRef,
    value: text,
    onChange: e => setText(e.target.value),
    placeholder: "\u5FC3\u306B\u6B8B\u3063\u305F\u8A00\u8449\u3092\u5165\u529B...",
    className: "w-full min-h-[8rem] bg-transparent text-lg leading-relaxed text-stone-800 dark:text-stone-200 placeholder:text-stone-300 dark:placeholder:text-stone-600 resize-none focus:outline-none font-serif overflow-hidden transition-colors",
    autoFocus: !isEditMode
  }), /*#__PURE__*/React.createElement("input", {
    type: "text",
    value: source,
    onChange: e => setSource(e.target.value),
    placeholder: "\u51FA\u5178\uFF08\u4EFB\u610F\uFF09",
    className: "w-full bg-transparent border-b border-stone-200 dark:border-stone-700 py-2 mb-4 focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-sm font-serif text-stone-600 dark:text-stone-400 placeholder:text-stone-200 dark:placeholder:text-stone-700 transition-colors"
  }), /*#__PURE__*/React.createElement("div", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-2 gap-2"
  }, CATEGORIES.map(cat => /*#__PURE__*/React.createElement("button", {
    key: cat,
    onClick: () => setSelectedCategory(cat),
    className: "py-3 px-2 text-sm rounded transition-all duration-200 border ".concat(selectedCategory === cat ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 border-stone-800 dark:border-stone-700 shadow-md' : 'bg-white dark:bg-stone-800 text-stone-600 dark:text-stone-400 border-stone-200 dark:border-stone-700 hover:border-stone-400 dark:hover:border-stone-500')
  }, cat))))), /*#__PURE__*/React.createElement("div", {
    className: "pt-6 pb-4"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: handleSave,
    disabled: !text.trim(),
    className: "w-full py-4 rounded-lg font-bold tracking-widest transition-all duration-200 ".concat(text.trim() ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 shadow-lg hover:bg-stone-700 dark:hover:bg-stone-600 active:scale-[0.98]' : 'bg-stone-200 dark:bg-stone-800 text-stone-400 dark:text-stone-600 cursor-not-allowed')
  }, isEditMode ? '更新する' : '保存する')));
};
var SeasonBadge = _ref0 => {
  var {
    onClick
  } = _ref0;
  var {
    solarTerm,
    microSeason
  } = useMemo(() => getSeasonInfo(new Date()), []);
  return /*#__PURE__*/React.createElement("button", {
    onClick: onClick,
    className: "flex items-center gap-1.5 text-sm font-bold text-stone-500 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200 transition-colors tracking-wide py-1 group"
  }, /*#__PURE__*/React.createElement(CloudSun, {
    size: 18,
    className: "text-stone-400 dark:text-stone-500 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors"
  }), /*#__PURE__*/React.createElement("span", {
    className: "border-b border-transparent group-hover:border-stone-300 dark:group-hover:border-stone-600 transition-all"
  }, solarTerm.name, " ", /*#__PURE__*/React.createElement("span", {
    className: "mx-1 text-stone-300 dark:text-stone-600"
  }, "/"), " ", microSeason.name), /*#__PURE__*/React.createElement(ChevronRight, {
    size: 14,
    className: "text-stone-300 dark:text-stone-600 group-hover:text-stone-500 dark:group-hover:text-stone-400 transition-colors"
  }));
};
var ListView = _ref1 => {
  var {
    quotes,
    onItemClick,
    onStartRandom,
    filterCategory,
    onOpenFilter,
    onOpenSeason
  } = _ref1;
  var displayQuotes = filterCategory ? quotes.filter(q => q.category === filterCategory) : quotes;
  return /*#__PURE__*/React.createElement("div", {
    className: "h-full overflow-y-auto max-w-md mx-auto px-6 pt-4 pb-32 no-scrollbar"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-end mb-4 px-1 gap-2"
  }, /*#__PURE__*/React.createElement(SeasonBadge, {
    onClick: onOpenSeason
  }), /*#__PURE__*/React.createElement("button", {
    onClick: onOpenFilter,
    className: "flex items-center gap-1.5 text-[10px] font-bold text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-300 transition-colors tracking-wide bg-stone-100/80 dark:bg-stone-800/80 px-3 py-1.5 rounded-full border border-stone-200/50 dark:border-stone-700/50"
  }, /*#__PURE__*/React.createElement(ListFilter, {
    size: 12
  }), /*#__PURE__*/React.createElement("span", null, filterCategory || 'すべての言葉'))), displayQuotes.length === 0 ? /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 p-6 text-center italic font-serif"
  }, quotes.length === 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("p", null, "\u307E\u3060\u8A00\u8449\u304C\u3042\u308A\u307E\u305B\u3093\u3002"), /*#__PURE__*/React.createElement("p", {
    className: "mt-2"
  }, "\u4E0B\u306E\u300C\u8A18\u3059\u300D\u304B\u3089\u59CB\u3081\u307E\u3057\u3087\u3046\u3002")) : /*#__PURE__*/React.createElement("p", null, "\u3053\u306E\u30AB\u30C6\u30B4\u30EA\u306E\u8A00\u8449\u306F\u3042\u308A\u307E\u305B\u3093\u3002")) : /*#__PURE__*/React.createElement("div", {
    className: "space-y-6"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onStartRandom,
    className: "w-full flex items-center justify-between py-4 px-5 bg-stone-100 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-2xl hover:bg-stone-200 transition-all group active:scale-[0.98]"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white dark:bg-stone-700 p-2.5 rounded-xl text-stone-800 dark:text-stone-200 group-hover:rotate-12 transition-transform"
  }, /*#__PURE__*/React.createElement(Sparkles, {
    size: 20
  })), /*#__PURE__*/React.createElement("div", {
    className: "text-left"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-sm font-bold text-stone-800 dark:text-stone-200 tracking-wider"
  }, "\u8A00\u8449\u3068\u306E\u518D\u4F1A"), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 font-serif"
  }, "\u3044\u3064\u304B\u306E\u8A00\u8449\u306B\u3001\u307E\u305F\u51FA\u4F1A\u3046"))), /*#__PURE__*/React.createElement(ChevronRight, {
    className: "text-stone-300 dark:text-stone-600",
    size: 18
  })), displayQuotes.map(quote => /*#__PURE__*/React.createElement("div", {
    key: quote.id,
    onClick: () => onItemClick(quote.id),
    className: "group bg-white dark:bg-stone-850 p-6 rounded-2xl border border-stone-100 dark:border-stone-800 hover:border-stone-300 transition-all cursor-pointer active:bg-stone-50 shadow-sm text-left"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-base leading-relaxed text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-1 font-serif line-clamp-3"
  }, quote.text), quote.source && /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-stone-400 dark:text-stone-500 font-serif mb-3"
  }, "\u2014 ", quote.source), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-end border-t border-stone-50 dark:border-stone-800 pt-3"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-xs text-stone-500 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 px-2 py-1 rounded-lg font-medium"
  }, quote.category), /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] text-stone-400 dark:text-stone-600 font-mono"
  }, new Date(quote.timestamp).toLocaleDateString('ja-JP')))))));
};
var SingleQuoteView = _ref10 => {
  var {
    quote,
    onNext,
    onPrev,
    hasNext,
    hasPrev,
    nextIcon: NextIcon,
    onClose,
    isRandomMode = false
  } = _ref10;
  var btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-grow flex flex-col items-center pt-5 text-center"
  }, /*#__PURE__*/React.createElement("span", {
    className: "inline-block px-3 py-1 rounded-full border border-stone-200 dark:border-stone-700 text-xs text-stone-500 dark:text-stone-400 tracking-wide mb-8"
  }, quote.category), /*#__PURE__*/React.createElement("div", {
    className: "px-2"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-xl md:text-2xl font-serif text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-4 select-text leading-relaxed",
    style: {
      lineHeight: '1.8'
    }
  }, quote.text), quote.source && /*#__PURE__*/React.createElement("p", {
    className: "text-sm text-stone-500 dark:text-stone-400 font-serif mb-8"
  }, "\u2014 ", quote.source), /*#__PURE__*/React.createElement("div", {
    className: "mt-8 flex justify-center text-stone-300 dark:text-stone-700"
  }, /*#__PURE__*/React.createElement("div", {
    className: "h-px w-12 bg-stone-300 dark:bg-stone-700"
  })), /*#__PURE__*/React.createElement("p", {
    className: "mt-4 text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest"
  }, new Date(quote.timestamp).toLocaleDateString('ja-JP')))), /*#__PURE__*/React.createElement("div", {
    className: "pt-12 pb-24 text-center"
  }, isRandomMode ? /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center gap-8 max-w-xs mx-auto"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onNext,
    className: "group flex flex-col items-center gap-3 text-stone-400 dark:text-stone-500 hover:text-stone-800 dark:hover:text-stone-200 transition-colors active:scale-95"
  }, /*#__PURE__*/React.createElement("div", {
    className: "p-4 rounded-full bg-stone-100 dark:bg-stone-800 group-hover:bg-stone-200 dark:group-hover:bg-stone-700 transition-colors"
  }, /*#__PURE__*/React.createElement(NextIcon, {
    size: 24,
    strokeWidth: 1.5
  }))), /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: btnStyle
  }, "\u9589\u3058\u308B")) : /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between px-4 max-w-xs mx-auto"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onPrev,
    disabled: !hasPrev,
    className: "p-3 text-stone-400 dark:text-stone-600 enabled:hover:text-stone-600 dark:enabled:hover:text-stone-300 transition-colors disabled:opacity-0 active:scale-95"
  }, /*#__PURE__*/React.createElement(ChevronLeft, {
    size: 24
  })), /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: btnStyle
  }, "\u4E00\u89A7\u3078"), /*#__PURE__*/React.createElement("button", {
    onClick: onNext,
    disabled: !hasNext,
    className: "p-3 text-stone-400 dark:text-stone-500 enabled:hover:text-stone-800 dark:enabled:hover:text-stone-200 transition-colors disabled:opacity-0 active:scale-95"
  }, /*#__PURE__*/React.createElement(NextIcon, {
    size: 24
  })))));
};
var App = () => {
  var [user, setUser] = useState(null);
  var [shortCode, setShortCode] = useState('');
  var [isLoadingCode, setIsLoadingCode] = useState(false);
  var [codeError, setCodeError] = useState(null);
  var [syncUserId, setSyncUserId] = useState(null);
  var [viewMode, setViewMode] = useState('list');
  var [selectedQuoteId, setSelectedQuoteId] = useState(null);
  var [randomHistory, setRandomHistory] = useState([]);
  var [quotes, setQuotes] = useState([]);
  var [toast, setToast] = useState({
    show: false,
    message: ''
  });
  var [dialogState, setDialogState] = useState({
    isVisible: false,
    type: null,
    id: null
  });
  var [isDarkMode, setIsDarkMode] = useState(false);
  var [filterCategory, setFilterCategory] = useState(null);
  var [isFilterVisible, setIsFilterVisible] = useState(false);
  var [isInputDirty, setIsInputDirty] = useState(false);
  var [isMenuVisible, setIsMenuVisible] = useState(false);
  var [isInitialLoading, setIsInitialLoading] = useState(true);
  var authInitiatedRef = useRef(false);
  useEffect(() => {
    var savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      setIsDarkMode(true);
      document.documentElement.classList.add('dark');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09');
    } else {
      setIsDarkMode(false);
      document.documentElement.classList.remove('dark');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9');
    }
  }, []);
  var toggleTheme = () => {
    var next = !isDarkMode;
    setIsDarkMode(next);
    if (next) {
      document.documentElement.classList.add('dark');
      localStorage.setItem('theme', 'dark');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09');
    } else {
      document.documentElement.classList.remove('dark');
      localStorage.setItem('theme', 'light');
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9');
    }
  };
  var fetchUserData = /*#__PURE__*/function () {
    var _ref11 = _asyncToGenerator(function* (currentUser) {
      if (!currentUser) return;
      setIsLoadingCode(true);
      setCodeError(null);
      try {
        var userCodeRef = doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', currentUser.uid);
        var codeSnap = yield getDoc(userCodeRef);
        if (codeSnap.exists()) {
          setShortCode(codeSnap.data().code);
        } else {
          var newCode = generateShortCode();
          yield setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', newCode), {
            uid: currentUser.uid
          });
          yield setDoc(userCodeRef, {
            code: newCode
          });
          setShortCode(newCode);
        }
      } catch (e) {
        console.error(e);
        setCodeError("接続エラー");
      } finally {
        setIsLoadingCode(false);
      }
    });
    return function fetchUserData(_x) {
      return _ref11.apply(this, arguments);
    };
  }();

  // 認証の監視: 以前のバージョンとの整合性も考慮し、
  // ここでは initAuthPromise の完了を待つ (グローバルで永続化設定済み)
  useEffect(() => {
    if (authInitiatedRef.current) return;
    authInitiatedRef.current = true;
    var unsubscribe = null;
    var setupAuth = /*#__PURE__*/function () {
      var _ref12 = _asyncToGenerator(function* () {
        unsubscribe = onAuthStateChanged(auth, u => {
          if (u) {
            // 既存ユーザーがいればそれを使う (v9系なので永続化情報は localStorage にあるはず)
            setUser(u);
            fetchUserData(u);
          } else {
            // ユーザーがいない場合のみ新規作成
            // 【重要】永続化設定(setPersistence)はスクリプト読み込み直後に走っているため、
            // ここで user が null なら本当にいないと判断して良い
            signInAnonymously(auth).catch(e => setCodeError("認証エラー"));
          }
        });
      });
      return function setupAuth() {
        return _ref12.apply(this, arguments);
      };
    }();
    setupAuth();
  }, []);
  var activeUserId = syncUserId || (user ? user.uid : null);
  useEffect(() => {
    if (!activeUserId) {
      if (!user && !isInitialLoading === false) setIsInitialLoading(false);
      return;
    }
    var q = query(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'));
    return onSnapshot(q, snap => {
      setQuotes(snap.docs.map(d => _objectSpread({
        id: d.id
      }, d.data())).sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0)));
      setIsInitialLoading(false);
    }, () => setIsInitialLoading(false));
  }, [activeUserId]);
  var showToast = message => setToast({
    show: true,
    message
  });
  var handleSyncByCode = /*#__PURE__*/function () {
    var _ref13 = _asyncToGenerator(function* (code) {
      if (!user) return;
      try {
        var snap = yield getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', code.trim().toUpperCase()));
        if (snap.exists()) {
          setSyncUserId(snap.data().uid);
          setViewMode('list');
          showToast("同期を開始しました");
        } else showToast("コードが見つかりません");
      } catch (e) {
        showToast("同期エラー");
      }
    });
    return function handleSyncByCode(_x2) {
      return _ref13.apply(this, arguments);
    };
  }();
  var addQuote = /*#__PURE__*/function () {
    var _ref14 = _asyncToGenerator(function* (text, source, category) {
      if (!activeUserId) return;
      yield addDoc(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'), {
        text,
        source,
        category,
        timestamp: Date.now()
      });
      setIsInputDirty(false);
      setViewMode('list');
      showToast("言葉を保存しました");
    });
    return function addQuote(_x3, _x4, _x5) {
      return _ref14.apply(this, arguments);
    };
  }();
  var updateQuote = /*#__PURE__*/function () {
    var _ref15 = _asyncToGenerator(function* (text, source, category) {
      if (!activeUserId || !selectedQuoteId) return;
      yield updateDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', selectedQuoteId), {
        text,
        source,
        category
      });
      setIsInputDirty(false);
      setViewMode(randomHistory.length > 0 ? 'random' : 'detail');
      showToast("言葉を更新しました");
    });
    return function updateQuote(_x6, _x7, _x8) {
      return _ref15.apply(this, arguments);
    };
  }();
  var handleConfirmAction = /*#__PURE__*/function () {
    var _ref16 = _asyncToGenerator(function* () {
      if (dialogState.type === 'quote') yield confirmDeleteQuote();else if (dialogState.type === 'account') yield confirmResetAccount();else if (dialogState.type === 'discard') {
        setIsInputDirty(false);
        setDialogState({
          isVisible: false,
          type: null,
          id: null
        });
        setViewMode(randomHistory.length > 0 && viewMode === 'edit' ? 'random' : selectedQuoteId && viewMode === 'edit' ? 'detail' : 'list');
      }
    });
    return function handleConfirmAction() {
      return _ref16.apply(this, arguments);
    };
  }();
  var confirmDeleteQuote = /*#__PURE__*/function () {
    var _ref17 = _asyncToGenerator(function* () {
      if (!activeUserId || !dialogState.id) return;
      yield deleteDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', dialogState.id));
      setDialogState({
        isVisible: false,
        type: null,
        id: null
      });
      setViewMode('list');
      setSelectedQuoteId(null);
      showToast("削除しました");
    });
    return function confirmDeleteQuote() {
      return _ref17.apply(this, arguments);
    };
  }();
  var confirmResetAccount = /*#__PURE__*/function () {
    var _ref18 = _asyncToGenerator(function* () {
      if (!user || !shortCode) return;
      try {
        var snap = yield getDocs(collection(db, 'artifacts', appId, 'users', user.uid, 'quotes'));
        yield Promise.all(snap.docs.map(d => deleteDoc(d.ref)));
        yield deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', shortCode));
        yield deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', user.uid));
        showToast("初期化しました。リロードします...");
        setTimeout(() => window.location.reload(), 1500);
      } catch (e) {
        showToast("初期化失敗");
        setDialogState({
          isVisible: false,
          type: null,
          id: null
        });
      }
    });
    return function confirmResetAccount() {
      return _ref18.apply(this, arguments);
    };
  }();
  var handleTitleClick = e => {
    if (e.detail === 3) {
      var a = document.createElement('a');
      a.href = URL.createObjectURL(new Blob([document.documentElement.outerHTML], {
        type: 'text/html'
      }));
      a.download = 'index.html';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      showToast("HTMLファイルをダウンロードしました");
    }
  };
  var currentQuote = quotes.find(q => q.id === selectedQuoteId);
  var leftActions = null,
    rightActions = null;
  switch (viewMode) {
    case 'list':
      leftActions = /*#__PURE__*/React.createElement("button", {
        onClick: toggleTheme,
        className: "p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, isDarkMode ? /*#__PURE__*/React.createElement(Sun, {
        size: 24
      }) : /*#__PURE__*/React.createElement(Moon, {
        size: 24
      }));
      rightActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => setViewMode('settings'),
        className: "p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(Menu, {
        size: 24
      }));
      break;
    case 'input':
    case 'settings':
    case 'edit':
      rightActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => isInputDirty ? setDialogState({
          isVisible: true,
          type: 'discard',
          id: null
        }) : setViewMode('list'),
        className: "p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(X, {
        size: 24
      }));
      break;
    case 'detail':
    case 'random':
      leftActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => {
          setViewMode('list');
          setRandomHistory([]);
          setSelectedQuoteId(null);
        },
        className: "p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(ArrowLeft, {
        size: 24
      }));
      rightActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => setIsMenuVisible(true),
        className: "p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(MoreHorizontal, {
        size: 24
      }));
      break;
    case 'season-detail':
      leftActions = /*#__PURE__*/React.createElement("button", {
        onClick: () => setViewMode('list'),
        className: "p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"
      }, /*#__PURE__*/React.createElement(ArrowLeft, {
        size: 24
      }));
      break;
  }
  if (!user || isInitialLoading) return /*#__PURE__*/React.createElement("div", {
    className: "h-screen flex items-center justify-center font-serif text-stone-400 dark:text-stone-500 italic bg-stone-50 dark:bg-stone-900"
  }, "\u8AAD\u307F\u8FBC\u307F\u4E2D...");
  return /*#__PURE__*/React.createElement("div", {
    className: "h-[100dvh] bg-stone-50 dark:bg-stone-900 text-stone-800 dark:text-stone-200 font-sans selection:bg-stone-200 dark:selection:bg-stone-700 overflow-hidden flex flex-col transition-colors duration-300"
  }, /*#__PURE__*/React.createElement(Header, {
    onTitleClick: handleTitleClick,
    leftActions: leftActions,
    rightActions: rightActions
  }), /*#__PURE__*/React.createElement("div", {
    className: "flex-grow overflow-hidden relative pt-16"
  }, /*#__PURE__*/React.createElement("main", {
    className: "h-full relative overflow-hidden"
  }, viewMode === 'input' && /*#__PURE__*/React.createElement(InputView, {
    onSave: addQuote,
    onDirtyChange: setIsInputDirty
  }), viewMode === 'list' && /*#__PURE__*/React.createElement(ListView, {
    quotes: quotes,
    onItemClick: id => {
      setSelectedQuoteId(id);
      setViewMode('detail');
    },
    onStartRandom: () => {
      if (quotes.length > 0) {
        var f = quotes[Math.floor(Math.random() * quotes.length)];
        setSelectedQuoteId(f.id);
        setRandomHistory([f.id]);
        setViewMode('random');
      }
    },
    filterCategory: filterCategory,
    onOpenFilter: () => setIsFilterVisible(true),
    onOpenSeason: () => setViewMode('season-detail')
  }), viewMode === 'detail' && currentQuote && /*#__PURE__*/React.createElement(SingleQuoteView, {
    quote: currentQuote,
    onNext: () => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) + 1) % quotes.length].id),
    onPrev: () => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) - 1 + quotes.length) % quotes.length].id),
    hasNext: quotes.length > 1,
    hasPrev: quotes.length > 1,
    nextIcon: ChevronRight,
    onClose: () => setViewMode('list')
  }), viewMode === 'random' && currentQuote && /*#__PURE__*/React.createElement(SingleQuoteView, {
    quote: currentQuote,
    onNext: () => {
      var n;
      do {
        n = quotes[Math.floor(Math.random() * quotes.length)].id;
      } while (n === selectedQuoteId && quotes.length > 1);
      setSelectedQuoteId(n);
    },
    nextIcon: Sparkles,
    onClose: () => setViewMode('list'),
    isRandomMode: true
  }), viewMode === 'edit' && currentQuote && /*#__PURE__*/React.createElement(InputView, {
    initialData: currentQuote,
    onSave: updateQuote,
    onDirtyChange: setIsInputDirty
  }), viewMode === 'settings' && /*#__PURE__*/React.createElement(SyncSettingsView, {
    currentShortCode: shortCode,
    isLoadingCode: isLoadingCode,
    errorMsg: codeError,
    onRetryCode: () => fetchUserData(user),
    onSyncCode: handleSyncByCode,
    onRequestReset: () => setDialogState({
      isVisible: true,
      type: 'account',
      id: null
    }),
    showToast: showToast
  }), viewMode === 'season-detail' && /*#__PURE__*/React.createElement(SeasonDetailView, {
    onClose: () => setViewMode('list')
  }))), /*#__PURE__*/React.createElement(FilterSheet, {
    isVisible: isFilterVisible,
    currentCategory: filterCategory,
    onSelect: cat => {
      setFilterCategory(cat);
      setIsFilterVisible(false);
    },
    onClose: () => setIsFilterVisible(false)
  }), /*#__PURE__*/React.createElement(MenuSheet, {
    isVisible: isMenuVisible,
    onEdit: () => setViewMode('edit'),
    onDelete: () => setDialogState({
      isVisible: true,
      type: 'quote',
      id: selectedQuoteId
    }),
    onClose: () => setIsMenuVisible(false)
  }), viewMode === 'list' && /*#__PURE__*/React.createElement(FloatingWriteButton, {
    onClick: () => setViewMode('input')
  }), /*#__PURE__*/React.createElement(ConfirmDialog, {
    isVisible: dialogState.isVisible,
    title: dialogState.type === 'account' ? "全データを削除しますか？" : dialogState.type === 'discard' ? "編集内容を破棄しますか？" : "言葉を削除しますか？",
    message: dialogState.type === 'account' ? "すべての言葉、設定が消去されます。この操作は戻せません。" : dialogState.type === 'discard' ? "保存されていない変更は失われます。" : "一度削除すると元に戻せません。",
    actionLabel: dialogState.type === 'account' ? "全削除して初期化" : dialogState.type === 'discard' ? "破棄して戻る" : "削除する",
    onConfirm: handleConfirmAction,
    onCancel: () => setDialogState({
      isVisible: false,
      type: null,
      id: null
    })
  }), /*#__PURE__*/React.createElement(Toast, {
    message: toast.message,
    isVisible: toast.show,
    onHide: () => setToast(p => _objectSpread(_objectSpread({}, p), {}, {
      show: false
    }))
  }));
};
createRoot(document.getElementById('root')).render(/*#__PURE__*/React.createElement(App, null));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlTWVtbyIsImNyZWF0ZVJvb3QiLCJMdWNpZGVJY29ucyIsImluaXRpYWxpemVBcHAiLCJnZXRBdXRoIiwic2lnbkluQW5vbnltb3VzbHkiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJzZXRQZXJzaXN0ZW5jZSIsImJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwiZ2V0RmlyZXN0b3JlIiwiY29sbGVjdGlvbiIsImRvYyIsInNldERvYyIsImdldERvYyIsImdldERvY3MiLCJhZGREb2MiLCJ1cGRhdGVEb2MiLCJkZWxldGVEb2MiLCJvblNuYXBzaG90IiwicXVlcnkiLCJQZW5MaW5lIiwiU3BhcmtsZXMiLCJDaGVjayIsIkNoZXZyb25SaWdodCIsIkNoZXZyb25MZWZ0IiwiQXJyb3dMZWZ0IiwiRWRpdDIiLCJUcmFzaDIiLCJNZW51IiwiQ29weSIsIlJlZnJlc2hDdyIsIlgiLCJBbGVydENpcmNsZSIsIk1vb24iLCJTdW4iLCJMaXN0RmlsdGVyIiwiQ2xvdWRTdW4iLCJNb3JlSG9yaXpvbnRhbCIsImZpcmViYXNlQ29uZmlnIiwiYXBwIiwiYXV0aCIsImRiIiwiYXBwSWQiLCJpbml0QXV0aFByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJ1bnN1YnNjcmliZSIsInVzZXIiLCJjb25zb2xlIiwibG9nIiwidWlkIiwiY2F0Y2giLCJlIiwiZXJyb3IiLCJjcmVkIiwiQ0FURUdPUklFUyIsImdlbmVyYXRlU2hvcnRDb2RlIiwiY2hhcnMiLCJyZXN1bHQiLCJpIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwiU09MQVJfVEVSTVMiLCJuYW1lIiwieW9taSIsIm1vbnRoIiwiZGF5IiwiZGVzYyIsIk1JQ1JPX1NFQVNPTlMiLCJnZXRTZWFzb25JbmZvIiwiZGF0ZSIsIm0iLCJnZXRNb250aCIsImQiLCJnZXREYXRlIiwiY3VycmVudFZhbCIsInNvbGFyVGVybSIsInNWYWwiLCJtaWNyb1NlYXNvbiIsIkhlYWRlciIsIl9yZWYiLCJvblRpdGxlQ2xpY2siLCJsZWZ0QWN0aW9ucyIsInJpZ2h0QWN0aW9ucyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwidGl0bGUiLCJTeW5jU2V0dGluZ3NWaWV3IiwiX3JlZjIiLCJjdXJyZW50U2hvcnRDb2RlIiwiaXNMb2FkaW5nQ29kZSIsImVycm9yTXNnIiwib25SZXRyeUNvZGUiLCJvblN5bmNDb2RlIiwib25SZXF1ZXN0UmVzZXQiLCJzaG93VG9hc3QiLCJpbnB1dElkIiwic2V0SW5wdXRJZCIsImhhbmRsZUNvcHkiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJkaXNhYmxlZCIsImluY2x1ZGVzIiwic2l6ZSIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwidG9VcHBlckNhc2UiLCJwbGFjZWhvbGRlciIsInRyaW0iLCJUb2FzdCIsIl9yZWYzIiwibWVzc2FnZSIsImlzVmlzaWJsZSIsIm9uSGlkZSIsInRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsIkZpbHRlclNoZWV0IiwiX3JlZjQiLCJjdXJyZW50Q2F0ZWdvcnkiLCJvblNlbGVjdCIsIm9uQ2xvc2UiLCJjb25jYXQiLCJtYXAiLCJjYXQiLCJrZXkiLCJNZW51U2hlZXQiLCJfcmVmNSIsIm9uRWRpdCIsIm9uRGVsZXRlIiwiU2Vhc29uRGV0YWlsVmlldyIsIl9yZWY2IiwiaW5pdGlhbERhdGUiLCJjdXJyZW50RGF0ZSIsInNldEN1cnJlbnREYXRlIiwiRGF0ZSIsImhhbmRsZVByZXYiLCJzZXREYXRlIiwiaGFuZGxlTmV4dCIsImJ0blN0eWxlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiQ29uZmlybURpYWxvZyIsIl9yZWY3IiwiYWN0aW9uTGFiZWwiLCJvbkNvbmZpcm0iLCJvbkNhbmNlbCIsIkZsb2F0aW5nV3JpdGVCdXR0b24iLCJfcmVmOCIsInN0cm9rZVdpZHRoIiwiSW5wdXRWaWV3IiwiX3JlZjkiLCJvblNhdmUiLCJpbml0aWFsRGF0YSIsIm9uRGlydHlDaGFuZ2UiLCJ0ZXh0Iiwic2V0VGV4dCIsInNvdXJjZSIsInNldFNvdXJjZSIsInNlbGVjdGVkQ2F0ZWdvcnkiLCJzZXRTZWxlY3RlZENhdGVnb3J5IiwiY2F0ZWdvcnkiLCJ0ZXh0YXJlYVJlZiIsImN1cnJlbnQiLCJzdHlsZSIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImlzRGlydHkiLCJoYW5kbGVTYXZlIiwiaXNFZGl0TW9kZSIsInJlZiIsImF1dG9Gb2N1cyIsIlNlYXNvbkJhZGdlIiwiX3JlZjAiLCJMaXN0VmlldyIsIl9yZWYxIiwicXVvdGVzIiwib25JdGVtQ2xpY2siLCJvblN0YXJ0UmFuZG9tIiwiZmlsdGVyQ2F0ZWdvcnkiLCJvbk9wZW5GaWx0ZXIiLCJvbk9wZW5TZWFzb24iLCJkaXNwbGF5UXVvdGVzIiwiZmlsdGVyIiwicSIsIkZyYWdtZW50IiwicXVvdGUiLCJpZCIsInRpbWVzdGFtcCIsIlNpbmdsZVF1b3RlVmlldyIsIl9yZWYxMCIsIm9uTmV4dCIsIm9uUHJldiIsImhhc05leHQiLCJoYXNQcmV2IiwibmV4dEljb24iLCJOZXh0SWNvbiIsImlzUmFuZG9tTW9kZSIsImxpbmVIZWlnaHQiLCJBcHAiLCJzZXRVc2VyIiwic2hvcnRDb2RlIiwic2V0U2hvcnRDb2RlIiwic2V0SXNMb2FkaW5nQ29kZSIsImNvZGVFcnJvciIsInNldENvZGVFcnJvciIsInN5bmNVc2VySWQiLCJzZXRTeW5jVXNlcklkIiwidmlld01vZGUiLCJzZXRWaWV3TW9kZSIsInNlbGVjdGVkUXVvdGVJZCIsInNldFNlbGVjdGVkUXVvdGVJZCIsInJhbmRvbUhpc3RvcnkiLCJzZXRSYW5kb21IaXN0b3J5Iiwic2V0UXVvdGVzIiwidG9hc3QiLCJzZXRUb2FzdCIsInNob3ciLCJkaWFsb2dTdGF0ZSIsInNldERpYWxvZ1N0YXRlIiwiaXNEYXJrTW9kZSIsInNldElzRGFya01vZGUiLCJzZXRGaWx0ZXJDYXRlZ29yeSIsImlzRmlsdGVyVmlzaWJsZSIsInNldElzRmlsdGVyVmlzaWJsZSIsImlzSW5wdXREaXJ0eSIsInNldElzSW5wdXREaXJ0eSIsImlzTWVudVZpc2libGUiLCJzZXRJc01lbnVWaXNpYmxlIiwiaXNJbml0aWFsTG9hZGluZyIsInNldElzSW5pdGlhbExvYWRpbmciLCJhdXRoSW5pdGlhdGVkUmVmIiwic2F2ZWRUaGVtZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJ0b2dnbGVUaGVtZSIsIm5leHQiLCJzZXRJdGVtIiwiZmV0Y2hVc2VyRGF0YSIsIl9yZWYxMSIsIl9hc3luY1RvR2VuZXJhdG9yIiwiY3VycmVudFVzZXIiLCJ1c2VyQ29kZVJlZiIsImNvZGVTbmFwIiwiZXhpc3RzIiwiZGF0YSIsImNvZGUiLCJuZXdDb2RlIiwiX3giLCJhcHBseSIsImFyZ3VtZW50cyIsInNldHVwQXV0aCIsIl9yZWYxMiIsInUiLCJhY3RpdmVVc2VySWQiLCJzbmFwIiwiZG9jcyIsIl9vYmplY3RTcHJlYWQiLCJzb3J0IiwiYSIsImIiLCJoYW5kbGVTeW5jQnlDb2RlIiwiX3JlZjEzIiwiX3gyIiwiYWRkUXVvdGUiLCJfcmVmMTQiLCJub3ciLCJfeDMiLCJfeDQiLCJfeDUiLCJ1cGRhdGVRdW90ZSIsIl9yZWYxNSIsIl94NiIsIl94NyIsIl94OCIsImhhbmRsZUNvbmZpcm1BY3Rpb24iLCJfcmVmMTYiLCJjb25maXJtRGVsZXRlUXVvdGUiLCJjb25maXJtUmVzZXRBY2NvdW50IiwiX3JlZjE3IiwiX3JlZjE4IiwiYWxsIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJoYW5kbGVUaXRsZUNsaWNrIiwiZGV0YWlsIiwiaHJlZiIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIkJsb2IiLCJvdXRlckhUTUwiLCJkb3dubG9hZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJjdXJyZW50UXVvdGUiLCJmaW5kIiwiZiIsImZpbmRJbmRleCIsIm4iLCJwIiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW5kZXIiXSwic291cmNlcyI6WyJJbmxpbmUgQmFiZWwgc2NyaXB0Il0sInNvdXJjZXNDb250ZW50IjpbIlxuICBpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuICBpbXBvcnQgeyBjcmVhdGVSb290IH0gZnJvbSAncmVhY3QtZG9tL2NsaWVudCc7XG4gIGltcG9ydCAqIGFzIEx1Y2lkZUljb25zIGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG4gIGltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuICBpbXBvcnQgeyBnZXRBdXRoLCBzaWduSW5Bbm9ueW1vdXNseSwgb25BdXRoU3RhdGVDaGFuZ2VkLCBzZXRQZXJzaXN0ZW5jZSwgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbiAgaW1wb3J0IHsgZ2V0RmlyZXN0b3JlLCBjb2xsZWN0aW9uLCBkb2MsIHNldERvYywgZ2V0RG9jLCBnZXREb2NzLCBhZGREb2MsIHVwZGF0ZURvYywgZGVsZXRlRG9jLCBvblNuYXBzaG90LCBxdWVyeSB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5cbiAgY29uc3QgeyBQZW5MaW5lLCBTcGFya2xlcywgQ2hlY2ssIENoZXZyb25SaWdodCwgQ2hldnJvbkxlZnQsIEFycm93TGVmdCwgRWRpdDIsIFRyYXNoMiwgTWVudSwgQ29weSwgUmVmcmVzaEN3LCBYLCBBbGVydENpcmNsZSwgTW9vbiwgU3VuLCBMaXN0RmlsdGVyLCBDbG91ZFN1biwgTW9yZUhvcml6b250YWwgfSA9IEx1Y2lkZUljb25zO1xuXG4gIGNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1wiYXBpS2V5XCI6XCJBSXphU3lCTHc5OWhkWXd6UUthV0ZhY1YzSGRJQXNhX2FkQW5hOWtcIixcImF1dGhEb21haW5cIjpcImtvdG9iYWtvLWVjNjg2LmZpcmViYXNlYXBwLmNvbVwiLFwicHJvamVjdElkXCI6XCJrb3RvYmFrby1lYzY4NlwiLFwic3RvcmFnZUJ1Y2tldFwiOlwia290b2Jha28tZWM2ODYuZmlyZWJhc2VzdG9yYWdlLmFwcFwiLFwibWVzc2FnaW5nU2VuZGVySWRcIjpcIjgzNjYyMDI1NzgyNFwiLFwiYXBwSWRcIjpcIjE6ODM2NjIwMjU3ODI0OndlYjo1YTc2YmYwZTY0NmUzN2YxZmI0YTQ1XCIsXCJtZWFzdXJlbWVudElkXCI6XCJHLTlYRENDWjFCRE1cIn07XG4gIFxuICAvLyAtLS0gRmlyZWJhc2UgSW5pdCAoR2xvYmFsIFNjb3BlKSAtLS1cbiAgY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG4gIGNvbnN0IGF1dGggPSBnZXRBdXRoKGFwcCk7XG4gIGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7XG4gIGNvbnN0IGFwcElkID0gJ2tvdG8tbm8taGEtYXBwJztcblxuICAvLyAtLS0gQXV0aCBMb2dpYzogSUTmsLjntprljJbjga7lvrnlupXmpJzoqLzmuIjjgb/jg63jgrjjg4Pjgq8gLS0tXG4gIGNvbnN0IGluaXRBdXRoUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgLy8gMS4g44G+44Ga5rC457aa5YyW6Kit5a6a44KS6YGp55SoXG4gICAgc2V0UGVyc2lzdGVuY2UoYXV0aCwgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIDIuIOiqjeiovOeKtuaFi+OBruebo+imluOCkumWi+Wni1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCAodXNlcikgPT4ge1xuICAgICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBBLiDml6LlrZjjg6bjg7zjgrbjg7zjgYzjgYTjgovvvIjjgb7jgZ/jga/mlrDopo/kvZzmiJDjgYzlrozkuobjgZfjgZ/vvInloLTlkIhcbiAgICAgICAgICAgICAgICAvLyDjgZPjgZPjgafnorrlrp/jgatJROOBjOeiuuWumuOBmeOCi1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXV0aCBTdGF0ZTogVXNlciBkZXRlY3RlZFwiLCB1c2VyLnVpZCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh1c2VyKTtcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpOyAvLyDnorrlrprjgZfjgZ/jga7jgafjg6rjgrnjg4rjg7zop6PpmaRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQi4g44Om44O844K244O844GM44GE44Gq44GE77yIbnVsbO+8ieWgtOWQiFxuICAgICAgICAgICAgICAgIC8vIOOBk+OBk+OBq+adpeOCi+OBruOBr+OAjOacrOW9k+OBq+WIneWbnuOAjeOBi+OAjOODh+ODvOOCv+OBjOa2iOOBiOOBn+OAjeaZguOBruOBv1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXV0aCBTdGF0ZTogTm8gdXNlciwgY3JlYXRpbmcgbmV3Li4uXCIpO1xuICAgICAgICAgICAgICAgIHNpZ25JbkFub255bW91c2x5KGF1dGgpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJTaWduSW4gRXJyb3I6XCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAvLyDjgqjjg6njg7zmmYLjgoJyZXNvbHZl44GX44Gq44GE44Go44Ki44OX44Oq44GM5q2i44G+44KL5Y+v6IO95oCn44GM44GC44KL44GM44CBXG4gICAgICAgICAgICAgICAgICAgIC8vIOOBk+OBk+OBp+OBr+ODquODiOODqeOCpOOCkuS/g+OBmVVJ44GM44Gq44GE44Gf44KB44Ot44Kw44Gu44G/XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8g44CQ6YeN6KaB44CR44GT44GT44GnIHVuc3Vic2NyaWJlKCkg44GX44Gq44GE77yBXG4gICAgICAgICAgICAgICAgLy8gc2lnbkluQW5vbnltb3VzbHkg44GM5oiQ5Yqf44GZ44KL44Go44CB5YaN5bqmIG9uQXV0aFN0YXRlQ2hhbmdlZCDjgYznmbrngavjgZfjgIFcbiAgICAgICAgICAgICAgICAvLyDkuIroqJggQSDjga7jg5bjg63jg4Pjgq/jgavlhaXjgaPjgaYgcmVzb2x2ZSDjgZXjgozjgovjga7jgpLlvoXjgaTjgIJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQZXJzaXN0ZW5jZSBJbml0IEVycm9yOlwiLCBlKTtcbiAgICAgICAgLy8g5LiH44GM5LiA6Kit5a6a44Gr5aSx5pWX44GX44Gm44KC44Ot44Kw44Kk44Oz44KS6Kmm44G/44KLXG4gICAgICAgIHNpZ25JbkFub255bW91c2x5KGF1dGgpLnRoZW4oY3JlZCA9PiByZXNvbHZlKGNyZWQudXNlcikpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IENBVEVHT1JJRVMgPSBbXCLlv4PjgavmrovjgaPjgZ9cIiwgXCLmlrDjgZ/jgarmsJfjgaXjgY1cIiwgXCLjgYrjgoLjgZfjgo3jgYRcIiwgXCLlvbnnq4vjgaHjgZ3jgYZcIl07XG5cbiAgLy8gLS0tIFV0aWxpdHkgRnVuY3Rpb25zIC0tLVxuICBjb25zdCBnZW5lcmF0ZVNob3J0Q29kZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISktMTU5QUVJTVFVWV1hZWjIzNDU2Nzg5JztcbiAgICAgIGxldCByZXN1bHQgPSAnJztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSByZXN1bHQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xuICAgICAgcmVzdWx0ICs9ICctJztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSByZXN1bHQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyAtLS0gQ29uc3RhbnRzIGZvciBTZWFzb25zIC0tLVxuICBjb25zdCBTT0xBUl9URVJNUyA9IFtcbiAgICB7IG5hbWU6ICfnq4vmmKUnLCB5b21pOiAn44KK44Gj44GX44KF44KTJywgbW9udGg6IDIsIGRheTogNCwgZGVzYzogJ+WvkuOBleOCguWzoOOCkui2iuOBiOOAgeaYpeOBruawl+mFjeOCkuaEn+OBmOWni+OCgeOCi+mggycgfSxcbiAgICB7IG5hbWU6ICfpm6jmsLQnLCB5b21pOiAn44GG44GZ44GEJywgbW9udGg6IDIsIGRheTogMTksIGRlc2M6ICfpm6rjgYzpm6jjgavlpInjgo/jgorjgIHmsLfjgYzop6PjgZHlp4vjgoHjgovpoIMnIH0sXG4gICAgeyBuYW1lOiAn5ZWT6J+EJywgeW9taTogJ+OBkeOBhOOBoeOBpCcsIG1vbnRoOiAzLCBkYXk6IDYsIGRlc2M6ICflhqzjgZTjgoLjgorjgZfjgabjgYTjgZ/omavjgZ/jgaHjgYzlnJ/jgYvjgonlh7rjgabjgY/jgovpoIMnIH0sXG4gICAgeyBuYW1lOiAn5pil5YiGJywgeW9taTogJ+OBl+OCheOCk+OBtuOCkycsIG1vbnRoOiAzLCBkYXk6IDIxLCBkZXNjOiAn5pi844Go5aSc44Gu6ZW344GV44GM44G744G85ZCM44GY44Gr44Gq44KL5pelJyB9LFxuICAgIHsgbmFtZTogJ+a4heaYjicsIHlvbWk6ICfjgZvjgYTjgoHjgYQnLCBtb250aDogNCwgZGF5OiA1LCBkZXNjOiAn5LiH54mp44GM5riF44KJ44GL44Gn55Sf44GN55Sf44GN44Go44GX44Gm44GP44KL6aCDJyB9LFxuICAgIHsgbmFtZTogJ+epgOmbqCcsIHlvbWk6ICfjgZPjgY/jgYYnLCBtb250aDogNCwgZGF5OiAyMCwgZGVzYzogJ+epgOeJqeOCkua9pOOBmeaYpembqOOBjOmZjeOCi+mggycgfSxcbiAgICB7IG5hbWU6ICfnq4vlpI8nLCB5b21pOiAn44KK44Gj44GLJywgbW9udGg6IDUsIGRheTogNiwgZGVzYzogJ+Wkj+OBruawl+mFjeOBjOaEn+OBmOOCieOCjOWni+OCgeOCi+mggycgfSxcbiAgICB7IG5hbWU6ICflsI/muoAnLCB5b21pOiAn44GX44KH44GG44G+44KTJywgbW9udGg6IDUsIGRheTogMjEsIGRlc2M6ICfpmb3msJfjgYzoia/jgY/jgarjgorjgIHojYnmnKjjgYzmiJDplbfjgZfjgabojILjgovpoIMnIH0sXG4gICAgeyBuYW1lOiAn6IqS56iuJywgeW9taTogJ+OBvOOBhuOBl+OChScsIG1vbnRoOiA2LCBkYXk6IDYsIGRlc2M6ICfnqLLjgoTpuqbjgarjganjgIHnqYLjga7lh7rjgovnqYDnianjga7nqK7jgpLjgb7jgY/poIMnIH0sXG4gICAgeyBuYW1lOiAn5aSP6IezJywgeW9taTogJ+OBkuOBlycsIG1vbnRoOiA2LCBkYXk6IDIxLCBkZXNjOiAn5LiA5bm044Gn5pyA44KC5pi844GM6ZW344GE5pelJyB9LFxuICAgIHsgbmFtZTogJ+Wwj+aakScsIHlvbWk6ICfjgZfjgofjgYbjgZfjgocnLCBtb250aDogNywgZGF5OiA3LCBkZXNjOiAn5qKF6Zuo5piO44GR44GM6L+R44Gl44GN44CB5pqR44GV44GM5pys5qC855qE44Gr44Gq44KL6aCDJyB9LFxuICAgIHsgbmFtZTogJ+Wkp+aakScsIHlvbWk6ICfjgZ/jgYTjgZfjgocnLCBtb250aDogNywgZGF5OiAyMywgZGVzYzogJ+S4gOW5tOOBp+acgOOCguaakeOBleOBjOWOs+OBl+OBhOmggycgfSxcbiAgICB7IG5hbWU6ICfnq4vnp4snLCB5b21pOiAn44KK44Gj44GX44KF44GGJywgbW9udGg6IDgsIGRheTogOCwgZGVzYzogJ+eni+OBruawl+mFjeOBjOeri+OBoeWni+OCgeOCi+mggycgfSxcbiAgICB7IG5hbWU6ICflh6bmmpEnLCB5b21pOiAn44GX44KH44GX44KHJywgbW9udGg6IDgsIGRheTogMjMsIGRlc2M6ICfmmpHjgZXjgYzls6DjgpLotorjgYjjgIHmnJ3lpJXjgavmtrzmsJfjgpLmhJ/jgZjjgovpoIMnIH0sXG4gICAgeyBuYW1lOiAn55m96ZyyJywgeW9taTogJ+OBr+OBj+OCjScsIG1vbnRoOiA5LCBkYXk6IDgsIGRlc2M6ICfojYnoirHjgavmnJ3pnLLjgYzlrr/jgorlp4vjgoHjgovpoIMnIH0sXG4gICAgeyBuYW1lOiAn56eL5YiGJywgeW9taTogJ+OBl+OCheOBhuOBtuOCkycsIG1vbnRoOiA5LCBkYXk6IDIzLCBkZXNjOiAn5pi844Go5aSc44Gu6ZW344GV44GM5YaN44Gz44G744G85ZCM44GY44Gr44Gq44KL5pelJyB9LFxuICAgIHsgbmFtZTogJ+WvkumcsicsIHlvbWk6ICfjgYvjgpPjgo0nLCBtb250aDogMTAsIGRheTogOCwgZGVzYzogJ+WGt+OBn+OBhOmcsuOBjOmZjeOCiuOAgeeni+OCgua3seOBvuOCi+mggycgfSxcbiAgICB7IG5hbWU6ICfpnJzpmY0nLCB5b21pOiAn44Gd44GG44GT44GGJywgbW9udGg6IDEwLCBkYXk6IDIzLCBkZXNjOiAn6Zyc44GM6ZmN44KK5aeL44KB44CB5Yas44Gu6L+R44Gl44GN44KS5oSf44GY44KL6aCDJyB9LFxuICAgIHsgbmFtZTogJ+eri+WGrCcsIHlvbWk6ICfjgorjgaPjgajjgYYnLCBtb250aDogMTEsIGRheTogNywgZGVzYzogJ+WGrOOBruawl+mFjeOBjOeri+OBoeWni+OCgeOCi+mggycgfSxcbiAgICB7IG5hbWU6ICflsI/pm6onLCB5b21pOiAn44GX44KH44GG44Gb44GkJywgbW9udGg6IDExLCBkYXk6IDIyLCBkZXNjOiAn44KP44Ga44GL44Gq44GM44KJ6Zuq44GM6ZmN44KK5aeL44KB44KL6aCDJyB9LFxuICAgIHsgbmFtZTogJ+Wkp+mbqicsIHlvbWk6ICfjgZ/jgYTjgZvjgaQnLCBtb250aDogMTIsIGRheTogNywgZGVzYzogJ+mbquOBjOa/gOOBl+OBj+mZjeOCiuWni+OCgeOCi+mggycgfSxcbiAgICB7IG5hbWU6ICflhqzoh7MnLCB5b21pOiAn44Go44GG44GYJywgbW9udGg6IDEyLCBkYXk6IDIyLCBkZXNjOiAn5LiA5bm044Gn5pyA44KC5pi844GM55+t44GE5pelJyB9LFxuICAgIHsgbmFtZTogJ+Wwj+WvkicsIHlvbWk6ICfjgZfjgofjgYbjgYvjgpMnLCBtb250aDogMSwgZGF5OiA2LCBkZXNjOiAn5a+S44GV44GM5Y6z44GX44GP44Gq44KK5aeL44KB44KL6aCD77yI5a+S44Gu5YWl44KK77yJJyB9LFxuICAgIHsgbmFtZTogJ+Wkp+WvkicsIHlvbWk6ICfjgaDjgYTjgYvjgpMnLCBtb250aDogMSwgZGF5OiAyMCwgZGVzYzogJ+S4gOW5tOOBp+acgOOCguWvkuOBleOBjOWOs+OBl+OBhOmggycgfSxcbiAgXTtcblxuICBjb25zdCBNSUNST19TRUFTT05TID0gW1xuICAgIHsgbmFtZTogJ+adsemiqOino+WHjScsIHlvbWk6ICfjga/jgovjgYvjgZzjgZPjgYrjgorjgpLjgajjgY8nLCBtb250aDogMiwgZGF5OiA0LCBkZXNjOiAn5pil44Gu6aKo44GM5rC344KS6Kej44GL44GZJyB9LFxuICAgIHsgbmFtZTogJ+m7hOm2r+edjeedhicsIHlvbWk6ICfjgYbjgZDjgYTjgZnjgarjgY8nLCBtb250aDogMiwgZGF5OiA5LCBkZXNjOiAn6bav44GM6bO044GN5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+mtmuS4iuawtycsIHlvbWk6ICfjgYbjgYrjgZPjgYrjgorjgpLjgYTjgZrjgosnLCBtb250aDogMiwgZGF5OiAxNCwgZGVzYzogJ+WJsuOCjOOBn+awt+OBrumWk+OBi+OCiemtmuOBjOmjm+OBs+WHuuOCiycgfSxcbiAgICB7IG5hbWU6ICflnJ/ohInmvaTotbcnLCB5b21pOiAn44Gk44Gh44Gu44GX44KH44GG44GG44KL44GK44GE44GK44GT44KLJywgbW9udGg6IDIsIGRheTogMTksIGRlc2M6ICfpm6jjgYzpmY3jgorjgIHlnJ/jgYzmub/jgormsJfjgpLlkKvjgoAnIH0sXG4gICAgeyBuYW1lOiAn6Zye5aeL6Z2GJywgeW9taTogJ+OBi+OBmeOBv+OBr+OBmOOCgeOBpuOBn+OBquOBs+OBjycsIG1vbnRoOiAyLCBkYXk6IDI0LCBkZXNjOiAn5pil6Zye44GM44Gf44Gq44Gz44GN5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+iNieacqOiQjOWLlScsIHlvbWk6ICfjgZ3jgYbjgoLjgY/jgoHjgbDjgYjjgYTjgZrjgosnLCBtb250aDogMywgZGF5OiAxLCBkZXNjOiAn6I2J5pyo44GM6Iq95ZC544GN5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+ifhOiZq+WVk+aIuCcsIHlvbWk6ICfjgZnjgZTjgoLjgorjga7jgoDjgZfjgajjgpLjgbLjgonjgY8nLCBtb250aDogMywgZGF5OiA2LCBkZXNjOiAn5Yas57Gg44KK44Gu6Jmr44GM5Ye644Gm5p2l44KLJyB9LFxuICAgIHsgbmFtZTogJ+ahg+Wni+eskScsIHlvbWk6ICfjgoLjgoLjga/jgZjjgoHjgabjgZXjgY8nLCBtb250aDogMywgZGF5OiAxMSwgZGVzYzogJ+ahg+OBruiKseOBjOWSsuOBjeWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfoj5zomavljJbonbYnLCB5b21pOiAn44Gq44KA44GX44Gh44KH44GG44Go44Gq44KLJywgbW9udGg6IDMsIGRheTogMTYsIGRlc2M6ICfpnZLomavjgYznvr3ljJbjgZfjgabntIvnmb3onbbjgavjgarjgosnIH0sXG4gICAgeyBuYW1lOiAn6ZuA5aeL5bejJywgeW9taTogJ+OBmeOBmuOCgeOBr+OBmOOCgeOBpuOBmeOBj+OBhicsIG1vbnRoOiAzLCBkYXk6IDIxLCBkZXNjOiAn6ZuA44GM5bej44KS5L2c44KK5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+ahnOWni+mWiycsIHlvbWk6ICfjgZXjgY/jgonjga/jgZjjgoHjgabjgbLjgonjgY8nLCBtb250aDogMywgZGF5OiAyNiwgZGVzYzogJ+ahnOOBruiKseOBjOWSsuOBjeWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfpm7fkuYPnmbrlo7AnLCB5b21pOiAn44GL44G/44Gq44KK44GZ44Gq44KP44Gh44GT44GI44KS44Gv44Gj44GZJywgbW9udGg6IDMsIGRheTogMzEsIGRlc2M6ICfpgaDjgY/jgafpm7fjga7pn7PjgYzjgZflp4vjgoHjgosnIH0sXG4gICAgeyBuYW1lOiAn546E6bOl6IezJywgeW9taTogJ+OBpOOBsOOCgeOBjeOBn+OCiycsIG1vbnRoOiA0LCBkYXk6IDUsIGRlc2M6ICfnh5XjgYzljZfjgYvjgonjgoTjgaPjgabmnaXjgosnIH0sXG4gICAgeyBuYW1lOiAn6bS76ZuB5YyXJywgeW9taTogJ+OBk+OBhuOBjOOCk+OBi+OBiOOCiycsIG1vbnRoOiA0LCBkYXk6IDEwLCBkZXNjOiAn6ZuB44GM5YyX44G45biw44Gj44Gm44GE44GPJyB9LFxuICAgIHsgbmFtZTogJ+iZueWni+imiycsIHlvbWk6ICfjgavjgZjjga/jgZjjgoHjgabjgYLjgonjgo/jgosnLCBtb250aDogNCwgZGF5OiAxNSwgZGVzYzogJ+mbqOS4iuOBjOOCiuOBq+iZueOBjOimi+OBiOWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfoka3lp4vnlJ8nLCB5b21pOiAn44GC44GX44Gv44GY44KB44Gm44GX44KH44GG44GaJywgbW9udGg6IDQsIGRheTogMjAsIGRlc2M6ICfokabjgYzoir3jgpLlkLnjgY3lp4vjgoHjgosnIH0sXG4gICAgeyBuYW1lOiAn6Zyc5q2i5Ye66IuXJywgeW9taTogJ+OBl+OCguOChOOBv+OBpuOBquOBiOOBhOOBmuOCiycsIG1vbnRoOiA0LCBkYXk6IDI1LCBkZXNjOiAn6Zyc44GM6ZmN44KK44Gq44GP44Gq44KK6IuX44GM6IKy44GkJyB9LFxuICAgIHsgbmFtZTogJ+eJoeS4ueiPrycsIHlvbWk6ICfjgbzjgZ/jgpPjga/jgarjgZXjgY8nLCBtb250aDogNCwgZGF5OiAzMCwgZGVzYzogJ+eJoeS4ueOBruiKseOBjOWSsuOBjycgfSxcbiAgICB7IG5hbWU6ICfom5nlp4vps7QnLCB5b21pOiAn44GL44KP44Ga44Gv44GY44KB44Gm44Gq44GPJywgbW9udGg6IDUsIGRheTogNiwgZGVzYzogJ+ibmeOBjOmztOOBjeWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfomq/ompPlh7onLCB5b21pOiAn44G/44G/44Ga44GE44Ga44KLJywgbW9udGg6IDUsIGRheTogMTEsIGRlc2M6ICfomq/ompPjgYzlnLDkuIrjgavlh7rjgabjgY/jgosnIH0sXG4gICAgeyBuYW1lOiAn56u556yL55SfJywgeW9taTogJ+OBn+OBkeOBruOBk+OBl+OCh+OBhuOBmicsIG1vbnRoOiA1LCBkYXk6IDE2LCBkZXNjOiAn562N44GM55Sf44GI44Gm44GP44KLJyB9LFxuICAgIHsgbmFtZTogJ+ialei1t+mjn+ahkScsIHlvbWk6ICfjgYvjgYTjgZPjgYrjgY3jgabjgY/jgo/jgpLjga/jgoAnLCBtb250aDogNSwgZGF5OiAyMSwgZGVzYzogJ+ialeOBjOahkeOCkuebm+OCk+OBq+mjn+OBueWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfntIXoirHmoIQnLCB5b21pOiAn44G544Gr44Gw44Gq44GV44GL44GGJywgbW9udGg6IDUsIGRheTogMjYsIGRlc2M6ICfntIXoirHjgYznm5vjgpPjgavlkrLjgY8nIH0sXG4gICAgeyBuYW1lOiAn6bqm56eL6IezJywgeW9taTogJ+OCgOOBjuOBruOBqOOBjeOBhOOBn+OCiycsIG1vbnRoOiA1LCBkYXk6IDMxLCBkZXNjOiAn6bqm44GM54af44GX6bqm56eL44Go44Gq44KLJyB9LFxuICAgIHsgbmFtZTogJ+ift+iegueUnycsIHlvbWk6ICfjgYvjgb7jgY3jgorjgZfjgofjgYbjgZonLCBtb250aDogNiwgZGF5OiA2LCBkZXNjOiAn44Kr44Oe44Kt44Oq44GM55Sf44G+44KM44KLJyB9LFxuICAgIHsgbmFtZTogJ+iFkOiNieeCuuibjScsIHlvbWk6ICfjgY/jgZXjgozjgZ/jgovjgY/jgZXjgbvjgZ/jgovjgajjgarjgosnLCBtb250aDogNiwgZGF5OiAxMSwgZGVzYzogJ+ibjeOBjOmjm+OBs+Wni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfmooXlrZDpu4QnLCB5b21pOiAn44GG44KB44Gu44G/44GN44Gw44KAJywgbW9udGg6IDYsIGRheTogMTYsIGRlc2M6ICfmooXjga7lrp/jgYzpu4TjgbDjgpPjgafnhp/jgZknIH0sXG4gICAgeyBuYW1lOiAn5LmD5p2x5p6vJywgeW9taTogJ+OBquOBpOOBi+OCjOOBj+OBleOBi+OCi+OCiycsIG1vbnRoOiA2LCBkYXk6IDIxLCBkZXNjOiAn5aSP5p6v6I2J44GM5p6v44KM44KLJyB9LFxuICAgIHsgbmFtZTogJ+iPluiSsuiPrycsIHlvbWk6ICfjgYLjgoTjgoHjga/jgarjgZXjgY8nLCBtb250aDogNiwgZGF5OiAyNiwgZGVzYzogJ+OBguOChOOCgeOBruiKseOBjOWSsuOBjycgfSxcbiAgICB7IG5hbWU6ICfljYrlpI/nlJ8nLCB5b21pOiAn44Gv44KT44GS44GX44KH44GG44GaJywgbW9udGg6IDcsIGRheTogMiwgZGVzYzogJ+WNiuWkj++8iOOCq+ODqeOCueODk+OCt+ODo+OCr++8ieOBjOeUn+OBiOOCiycgfSxcbiAgICB7IG5hbWU6ICfmuKnpoqjoh7MnLCB5b21pOiAn44GC44Gk44GL44Gc44GE44Gf44KLJywgbW9udGg6IDcsIGRheTogNywgZGVzYzogJ+aaluOBi+OBhOmiqOOBjOWQueOBhOOBpuadpeOCiycgfSxcbiAgICB7IG5hbWU6ICfok67lp4vplosnLCB5b21pOiAn44Gv44GZ44Gv44GY44KB44Gm44Gy44KJ44GPJywgbW9udGg6IDcsIGRheTogMTIsIGRlc2M6ICfok67jga7oirHjgYzplovjgY3lp4vjgoHjgosnIH0sXG4gICAgeyBuYW1lOiAn6be55LmD5a2m57+SJywgeW9taTogJ+OBn+OBi+OBmeOBquOCj+OBoeOCj+OBluOCkuOBquOCieOBhicsIG1vbnRoOiA3LCBkYXk6IDE3LCBkZXNjOiAn6be544Gu5bm86bOl44GM6aOb44G244GT44Go44KS6Kaa44GI44KLJyB9LFxuICAgIHsgbmFtZTogJ+ahkOWni+e1kOiKsScsIHlvbWk6ICfjgY3jgorjga/jgZjjgoHjgabjga/jgarjgpLjgoDjgZnjgbYnLCBtb250aDogNywgZGF5OiAyMywgZGVzYzogJ+ahkOOBruWun+OBjOOBquOCiuWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICflnJ/mvaTmur3mmpEnLCB5b21pOiAn44Gk44Gh44GG44KL44GK44GG44Gm44KA44GX44GC44Gk44GXJywgbW9udGg6IDcsIGRheTogMjgsIGRlc2M6ICflnJ/jgYzmub/jgaPjgabokrjjgZfmmpHjgY/jgarjgosnIH0sXG4gICAgeyBuYW1lOiAn5aSn6Zuo5pmC6KGMJywgeW9taTogJ+OBn+OBhOOBhuOBqOOBjeOBqeOBjeOBteOCiycsIG1vbnRoOiA4LCBkYXk6IDIsIGRlc2M6ICfmmYLjgajjgZfjgablpKfpm6jjgYzpmY3jgosnIH0sXG4gICAgeyBuYW1lOiAn5ra86aKo6IezJywgeW9taTogJ+OBmeOBmuOBi+OBnOOBhOOBn+OCiycsIG1vbnRoOiA4LCBkYXk6IDgsIGRlc2M6ICfmtrzjgZfjgYTpoqjjgYznq4vjgaHlp4vjgoHjgosnIH0sXG4gICAgeyBuYW1lOiAn5a+S6J2J6bO0JywgeW9taTogJ+OBsuOBkOOCieOBl+OBquOBjycsIG1vbnRoOiA4LCBkYXk6IDEzLCBkZXNjOiAn44OS44Kw44Op44K344GM6bO044GN5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+iSmemcp+WNh+mZjScsIHlvbWk6ICfjgbXjgYvjgY3jgY3jgorjgb7jgajjgYYnLCBtb250aDogOCwgZGF5OiAxOCwgZGVzYzogJ+a3seOBhOmcp+OBjOeri+OBoei+vOOCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfntr/mn47plosnLCB5b21pOiAn44KP44Gf44Gu44Gv44Gq44GX44G544Gy44KJ44GPJywgbW9udGg6IDgsIGRheTogMjMsIGRlc2M6ICfntr/jgpLljIXjgoDjgqzjgq/jgYzplovjgY8nIH0sXG4gICAgeyBuYW1lOiAn5aSp5Zyw5aeL57KbJywgeW9taTogJ+OBpuOCk+OBoeOBr+OBmOOCgeOBpuOBleOCgOOBlycsIG1vbnRoOiA4LCBkYXk6IDI4LCBkZXNjOiAn44KI44GG44KE44GP5pqR44GV44GM6Y6u44G+44KLJyB9LFxuICAgIHsgbmFtZTogJ+emvuS5g+eZuycsIHlvbWk6ICfjgZPjgY/jgoLjga7jgZnjgarjgo/jgaHjgb/jga7jgosnLCBtb250aDogOSwgZGF5OiAyLCBkZXNjOiAn56iy44GM5a6f44KLJyB9LFxuICAgIHsgbmFtZTogJ+iNiemcsueZvScsIHlvbWk6ICfjgY/jgZXjga7jgaTjgobjgZfjgo3jgZcnLCBtb250aDogOSwgZGF5OiA4LCBkZXNjOiAn6I2J44Gr6ZmN44KK44Gf6Zyy44GM55m944GP5YWJ44KLJyB9LFxuICAgIHsgbmFtZTogJ+m2uum0kumztCcsIHlvbWk6ICfjgZvjgY3jgozjgYTjgarjgY8nLCBtb250aDogOSwgZGF5OiAxMywgZGVzYzogJ+m2uum0ku+8iOOBm+OBjeOCjOOBhO+8ieOBjOmztOOBjeWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICfnjoTps6XljrsnLCB5b21pOiAn44Gk44Gw44KB44GV44KLJywgbW9udGg6IDksIGRheTogMTgsIGRlc2M6ICfnh5XjgYzljZfjgbjluLDjgaPjgabooYzjgY8nIH0sXG4gICAgeyBuYW1lOiAn6Zu35LmD5Y+O5aOwJywgeW9taTogJ+OBi+OBv+OBquOCiuOBmeOBquOCj+OBoeOBk+OBiOOCkuOBiuOBleOCgCcsIG1vbnRoOiA5LCBkYXk6IDIzLCBkZXNjOiAn6Zu344GM6bO044KJ44Gq44GP44Gq44KLJyB9LFxuICAgIHsgbmFtZTogJ+ifhOiZq+Wdj+aIuCcsIHlvbWk6ICfjgoDjgZfjgYvjgY/jgozjgabjgajjgpLjgbXjgZXjgZAnLCBtb250aDogOSwgZGF5OiAyOCwgZGVzYzogJ+iZq+OBjOWcn+S4reOBq+aOmOOBo+OBpuOBk+OCguOCiycgfSxcbiAgICB7IG5hbWU6ICfmsLTlp4vmtrgnLCB5b21pOiAn44G/44Ga44Gv44GY44KB44Gm44GL44KLJywgbW9udGg6IDEwLCBkYXk6IDMsIGRlc2M6ICfnlLDnlZHjga7msLTjgpLmipzjgYTjgablubLjgZknIH0sXG4gICAgeyBuYW1lOiAn6bS76ZuB5p2lJywgeW9taTogJ+OBk+OBhuOBjOOCk+OBjeOBn+OCiycsIG1vbnRoOiAxMCwgZGF5OiA4LCBkZXNjOiAn6ZuB44GM5YyX44GL44KJ5rih44Gj44Gm5p2l44KLJyB9LFxuICAgIHsgbmFtZTogJ+iPiuiKsemWiycsIHlvbWk6ICfjgY3jgY/jga7jga/jgarjgbLjgonjgY8nLCBtb250aDogMTAsIGRheTogMTMsIGRlc2M6ICfoj4rjga7oirHjgYzlkrLjgY8nIH0sXG4gICAgeyBuYW1lOiAn6J+L6J+A5Zyo5oi4JywgeW9taTogJ+OBjeOCiuOBjuOCiuOBmeOBqOOBq+OBguOCiicsIG1vbnRoOiAxMCwgZGF5OiAxOCwgZGVzYzogJ+OCreODquOCruODquOCueOBjOaIuOWPo+OBp+mztOOBjycgfSxcbiAgICB7IG5hbWU6ICfpnJzlp4vpmY0nLCB5b21pOiAn44GX44KC44Gv44GY44KB44Gm44G144KLJywgbW9udGg6IDEwLCBkYXk6IDIzLCBkZXNjOiAn6Zyc44GM6ZmN44KK5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+mcjuaZguaWvScsIHlvbWk6ICfjgZPjgZXjgoHjgajjgY3jganjgY3jgbXjgosnLCBtb250aDogMTAsIGRheTogMjgsIGRlc2M6ICflsI/pm6jjgYzjgZfjgajjgZfjgajpmY3jgosnIH0sXG4gICAgeyBuYW1lOiAn5qWT6JSm6buEJywgeW9taTogJ+OCguOBv+OBmOOBpOOBn+OBjeOBsOOCgCcsIG1vbnRoOiAxMSwgZGF5OiAyLCBkZXNjOiAn57SF6JGJ44KE6JSm44GM6Imy44Gl44GPJyB9LFxuICAgIHsgbmFtZTogJ+WxseiMtuWni+mWiycsIHlvbWk6ICfjgaTjgbDjgY3jga/jgZjjgoHjgabjgbLjgonjgY8nLCBtb250aDogMTEsIGRheTogNywgZGVzYzogJ+WxseiMtuiKseOBjOWSsuOBjeWni+OCgeOCiycgfSxcbiAgICB7IG5hbWU6ICflnLDlp4vlh40nLCB5b21pOiAn44Gh44Gv44GY44KB44Gm44GT44GK44KLJywgbW9udGg6IDExLCBkYXk6IDEyLCBkZXNjOiAn5aSn5Zyw44GM5YeN44KK5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+mHkeebnummmScsIHlvbWk6ICfjgY3jgpPjgZvjgpPjgYvjgZXjgY8nLCBtb250aDogMTEsIGRheTogMTcsIGRlc2M6ICfmsLTku5njga7oirHjgYzlkrLjgY3pppnjgosnIH0sXG4gICAgeyBuYW1lOiAn6Jm56JS15LiN6KaLJywgeW9taTogJ+OBq+OBmOOBi+OBj+OCjOOBpuOBv+OBiOOBmicsIG1vbnRoOiAxMSwgZGF5OiAyMiwgZGVzYzogJ+iZueOCkuimi+OBi+OBkeOBquOBj+OBquOCiycgfSxcbiAgICB7IG5hbWU6ICfmnJTpoqjmiZXokYknLCB5b21pOiAn44GN44Gf44GL44Gc44GT44Gu44Gv44KS44Gv44KJ44GGJywgbW9udGg6IDExLCBkYXk6IDI3LCBkZXNjOiAn5YyX6aKo44GM5pyo44Gu6JGJ44KS5omV44GE6JC944Go44GZJyB9LFxuICAgIHsgbmFtZTogJ+apmOWni+m7hCcsIHlvbWk6ICfjgZ/jgaHjgbDjgarjga/jgZjjgoHjgabjgY3jgbDjgoAnLCBtb250aDogMTIsIGRheTogMiwgZGVzYzogJ+apmOOBruWun+OBjOm7hOiJsuOBj+iJsuOBpeOBjycgfSxcbiAgICB7IG5hbWU6ICfplonloZ7miJDlhqwnLCB5b21pOiAn44Gd44KJ44GV44KA44GP44G144KG44Go44Gq44KLJywgbW9udGg6IDEyLCBkYXk6IDcsIGRlc2M6ICflpKnlnLDjga7msJfjgYzloZ7jgYzjgorlhqzjgajjgarjgosnIH0sXG4gICAgeyBuYW1lOiAn54aK6J+E56m0JywgeW9taTogJ+OBj+OBvuOBguOBquOBq+OBk+OCguOCiycsIG1vbnRoOiAxMiwgZGF5OiAxMiwgZGVzYzogJ+eGiuOBjOeptOOBq+WFpeOBo+OBpuWGrOecoOOBmeOCiycgfSxcbiAgICB7IG5hbWU6ICfpsZbprZrnvqQnLCB5b21pOiAn44GV44GR44Gu44GG44GK44KA44KJ44GM44KLJywgbW9udGg6IDEyLCBkYXk6IDE3LCBkZXNjOiAn6a6t44GM576k44GM44Gj44Gm5bed44KS5LiK44KLJyB9LFxuICAgIHsgbmFtZTogJ+S5g+adseeUnycsIHlvbWk6ICfjgarjgaTjgYvjgozjgY/jgZXjgZfjgofjgYbjgZonLCBtb250aDogMTIsIGRheTogMjIsIGRlc2M6ICflpI/mnq/ojYnjgYzoir3jgpLlh7rjgZknIH0sXG4gICAgeyBuYW1lOiAn6bqL6KeS6KejJywgeW9taTogJ+OBiuOBiuOBl+OBi+OBruOBpOOBruOBiuOBpOOCiycsIG1vbnRoOiAxMiwgZGF5OiAyNywgZGVzYzogJ+Wkp+m5v+OBruinkuOBjOiQveOBoeOCiycgfSxcbiAgICB7IG5hbWU6ICfpm6rkuIvlh7rpuqYnLCB5b21pOiAn44KG44GN44KP44Gf44KK44Gm44KA44GO44Gu44Gz44KLJywgbW9udGg6IDEsIGRheTogMSwgZGVzYzogJ+mbquOBruS4i+OBp+m6puOBjOS8uOOBs+OCiycgfSxcbiAgICB7IG5hbWU6ICfoirnkuYPmoIQnLCB5b21pOiAn44Gb44KK44GZ44Gq44KP44Gh44GV44GL44GGJywgbW9udGg6IDEsIGRheTogNiwgZGVzYzogJ+iKueOBjOebm+OCk+OBq+iCsuOBpCcgfSxcbiAgICB7IG5hbWU6ICfmsLTms4nli5UnLCB5b21pOiAn44GX44G/44Ga44GC44Gf44Gf44GL44KS44G144GP44KAJywgbW9udGg6IDEsIGRheTogMTEsIGRlc2M6ICflnLDkuK3jga7lh43jgaPjgZ/msLTjgYzmurbjgZHli5XjgY3lp4vjgoHjgosnIH0sXG4gICAgeyBuYW1lOiAn6ZuJ5aeL6ZuKJywgeW9taTogJ+OBjeOBmOOBr+OBmOOCgeOBpuOBquOBjycsIG1vbnRoOiAxLCBkYXk6IDE2LCBkZXNjOiAn6ZuE44Gu6ZuJ44GM6bO044GN5aeL44KB44KLJyB9LFxuICAgIHsgbmFtZTogJ+asvuWGrOiPrycsIHlvbWk6ICfjgbXjgY3jga7jga/jgarjgZXjgY8nLCBtb250aDogMSwgZGF5OiAyMCwgZGVzYzogJ+iVl+OBruiWue+8iOOBteOBjeOBruOBqOOBhu+8ieOBjOmhlOOCkuWHuuOBmScgfSxcbiAgICB7IG5hbWU6ICfmsLTmsqLohbnloIUnLCB5b21pOiAn44GV44KP44G/44Ga44GT44GK44KK44Gk44KB44KLJywgbW9udGg6IDEsIGRheTogMjUsIGRlc2M6ICfmsqLjga7msLTjgYzljprjgY/lh43jgorjgaTjgoHjgosnIH0sXG4gICAgeyBuYW1lOiAn6baP5aeL5LmzJywgeW9taTogJ+OBq+OCj+OBqOOCiuOBr+OBmOOCgeOBpuOBqOOChOOBq+OBpOOBjycsIG1vbnRoOiAxLCBkYXk6IDMwLCBkZXNjOiAn6baP44GM5Y2144KS55Sj44G/5aeL44KB44KLJyB9LFxuICBdO1xuXG4gIGNvbnN0IGdldFNlYXNvbkluZm8gPSAoZGF0ZSkgPT4ge1xuICAgIGNvbnN0IG0gPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIGNvbnN0IGQgPSBkYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBjdXJyZW50VmFsID0gbSAqIDEwMCArIGQ7XG5cbiAgICBsZXQgc29sYXJUZXJtID0gU09MQVJfVEVSTVNbU09MQVJfVEVSTVMubGVuZ3RoIC0gMV07IFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgU09MQVJfVEVSTVMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc1ZhbCA9IFNPTEFSX1RFUk1TW2ldLm1vbnRoICogMTAwICsgU09MQVJfVEVSTVNbaV0uZGF5O1xuICAgICAgICBpZiAoY3VycmVudFZhbCA+PSBzVmFsKSB7XG4gICAgICAgICAgICBzb2xhclRlcm0gPSBTT0xBUl9URVJNU1tpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChjdXJyZW50VmFsIDwgU09MQVJfVEVSTVNbMF0ubW9udGggKiAxMDAgKyBTT0xBUl9URVJNU1swXS5kYXkpIHtcbiAgICAgICAgLy8g5bm05aeL44Gu6Kq/5pW077yI5aSn5a+S44Gq44Gp77yJXG4gICAgfVxuXG4gICAgbGV0IG1pY3JvU2Vhc29uID0gTUlDUk9fU0VBU09OU1tNSUNST19TRUFTT05TLmxlbmd0aCAtIDFdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTUlDUk9fU0VBU09OUy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzVmFsID0gTUlDUk9fU0VBU09OU1tpXS5tb250aCAqIDEwMCArIE1JQ1JPX1NFQVNPTlNbaV0uZGF5O1xuICAgICAgICBpZiAoY3VycmVudFZhbCA+PSBzVmFsKSB7XG4gICAgICAgICAgICBtaWNyb1NlYXNvbiA9IE1JQ1JPX1NFQVNPTlNbaV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHNvbGFyVGVybSwgbWljcm9TZWFzb24gfTtcbiAgfTtcblxuICBjb25zdCBIZWFkZXIgPSAoeyBvblRpdGxlQ2xpY2ssIGxlZnRBY3Rpb25zLCByaWdodEFjdGlvbnMgfSkgPT4gKFxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJmaXhlZCB0b3AtMCBsZWZ0LTAgcmlnaHQtMCB6LTUwIGgtMTYgYmctc3RvbmUtNTAvOTAgZGFyazpiZy1zdG9uZS05MDAvOTAgYmFja2Ryb3AtYmx1ci1tZCBib3JkZXItYiBib3JkZXItc3RvbmUtMjAwIGRhcms6Ym9yZGVyLXN0b25lLTgwMCBweC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBzaGFkb3ctc20gdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMzAwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIwIGZsZXgganVzdGlmeS1zdGFydCBpdGVtcy1jZW50ZXJcIj57bGVmdEFjdGlvbnN9PC9kaXY+XG4gICAgICAgICAgPGgxIG9uQ2xpY2s9e29uVGl0bGVDbGlja30gY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlcmlmIGZvbnQtYm9sZCB0cmFja2luZy10aWdodCB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMjAwIGN1cnNvci1kZWZhdWx0IHNlbGVjdC1ub25lIGFjdGl2ZTpvcGFjaXR5LTcwIHRyYW5zaXRpb24tb3BhY2l0eVwiIHRpdGxlPVwi44OI44Oq44OX44Or44Kv44Oq44OD44Kv44Gn44OA44Km44Oz44Ot44O844OJXCI+S290b2Jha288L2gxPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yMCBmbGV4IGp1c3RpZnktZW5kIGl0ZW1zLWNlbnRlciBnYXAtMVwiPntyaWdodEFjdGlvbnN9PC9kaXY+XG4gICAgICA8L2hlYWRlcj5cbiAgKTtcblxuICBjb25zdCBTeW5jU2V0dGluZ3NWaWV3ID0gKHsgY3VycmVudFNob3J0Q29kZSwgaXNMb2FkaW5nQ29kZSwgZXJyb3JNc2csIG9uUmV0cnlDb2RlLCBvblN5bmNDb2RlLCBvblJlcXVlc3RSZXNldCwgc2hvd1RvYXN0IH0pID0+IHtcbiAgICAgIGNvbnN0IFtpbnB1dElkLCBzZXRJbnB1dElkXSA9IHVzZVN0YXRlKCcnKTtcbiAgICAgIGNvbnN0IGhhbmRsZUNvcHkgPSAoKSA9PiB7IGlmICghY3VycmVudFNob3J0Q29kZSB8fCBjdXJyZW50U2hvcnRDb2RlLmxlbmd0aCA8IDgpIHJldHVybjsgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoY3VycmVudFNob3J0Q29kZSk7IHNob3dUb2FzdChcIuWQjOacn+OCs+ODvOODieOCkuOCs+ODlOODvOOBl+OBvuOBl+OBn1wiKTsgfTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtZnVsbCBtYXgtdy1tZCBteC1hdXRvIHAtNiBwdC02IHBiLTI0IGFuaW1hdGUtZmFkZS1pbiBvdmVyZmxvdy15LWF1dG8gbm8tc2Nyb2xsYmFyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktOFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIHRleHQtWzEwcHhdIGZvbnQtYm9sZCB0cmFja2luZy13aWRlc3QgdXBwZXJjYXNlIGJsb2NrIG1sLTFcIj7jgYLjgarjgZ/jga7lkIzmnJ/jgrPjg7zjg4k8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYmctd2hpdGUgZGFyazpiZy1zdG9uZS04MDAgcC00IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtNzAwIHNoYWRvdy1zbVwiPlxuICAgICAgICAgICAgICAgICAgPGNvZGUgY2xhc3NOYW1lPVwiZmxleC1ncm93IHRleHQteGwgZm9udC1tb25vIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMjAwIHRyYWNraW5nLXRpZ2h0ZXIgdGV4dC1jZW50ZXJcIj57aXNMb2FkaW5nQ29kZSA/ICcuLi4nIDogKGVycm9yTXNnID8gJ+OCqOODqeODvCcgOiBjdXJyZW50U2hvcnRDb2RlKX08L2NvZGU+XG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZUNvcHl9IGRpc2FibGVkPXshY3VycmVudFNob3J0Q29kZSB8fCBjdXJyZW50U2hvcnRDb2RlLmluY2x1ZGVzKCcuLi4nKX0gY2xhc3NOYW1lPVwicC0yIHRleHQtc3RvbmUtNDAwIGhvdmVyOnRleHQtc3RvbmUtODAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0yMDAgYmctc3RvbmUtNTAgZGFyazpiZy1zdG9uZS03MDAgcm91bmRlZC1sZyBhY3RpdmU6c2NhbGUtOTUgdHJhbnNpdGlvbi1hbGwgZGlzYWJsZWQ6b3BhY2l0eS0zMFwiPjxDb3B5IHNpemU9ezIwfSAvPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHtlcnJvck1zZyAmJiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIHRleHQtcmVkLTQwMCB0ZXh0LXhzIG10LTJcIj48QWxlcnRDaXJjbGUgc2l6ZT17MTR9IC8+PHNwYW4+e2Vycm9yTXNnfTwvc3Bhbj48YnV0dG9uIG9uQ2xpY2s9e29uUmV0cnlDb2RlfSBjbGFzc05hbWU9XCJ1bmRlcmxpbmVcIj7lho3oqabooYw8L2J1dHRvbj48L2Rpdj59XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1bMTBweF0gdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBsZWFkaW5nLXJlbGF4ZWQgaXRhbGljIHB4LTFcIj7jgZPjga445paH5a2X44KS5Yil44Gu56uv5pyr44Gn5YWl5Yqb44GZ44KL44Go44CB6KiA6JGJ44KS5ZCM5pyf44Gn44GN44G+44GZ44CCPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlclwiPjxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlci10IGJvcmRlci1zdG9uZS0xMDAgZGFyazpib3JkZXItc3RvbmUtODAwXCI+PC9kaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBmbGV4IGp1c3RpZnktY2VudGVyIHRleHQtWzEwcHhdIHVwcGVyY2FzZVwiPjxzcGFuIGNsYXNzTmFtZT1cImJnLXN0b25lLTUwIGRhcms6Ymctc3RvbmUtOTAwIHB4LTMgdGV4dC1zdG9uZS0zMDAgZGFyazp0ZXh0LXN0b25lLTYwMCBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0XCI+b3I8L3NwYW4+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIHRleHQtWzEwcHhdIGZvbnQtYm9sZCB0cmFja2luZy13aWRlc3QgdXBwZXJjYXNlIGJsb2NrIG1sLTFcIj7liKXjga7jgrPjg7zjg4njgajlkIzmnJ/jgZnjgos8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPXtpbnB1dElkfSBvbkNoYW5nZT17KGUpID0+IHNldElucHV0SWQoZS50YXJnZXQudmFsdWUudG9VcHBlckNhc2UoKSl9IHBsYWNlaG9sZGVyPVwi5L6LOiBBQkNELTEyMzRcIiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctd2hpdGUgZGFyazpiZy1zdG9uZS04MDAgYm9yZGVyIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtNzAwIHAtNCByb3VuZGVkLXhsIHRleHQtbGcgdGV4dC1jZW50ZXIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1zdG9uZS00MDAgZGFyazpmb2N1czpib3JkZXItc3RvbmUtNTAwIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAgZm9udC1tb25vIGZvbnQtYm9sZCBzaGFkb3ctc21cIiAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25TeW5jQ29kZShpbnB1dElkKX0gZGlzYWJsZWQ9eyFpbnB1dElkLnRyaW0oKSB8fCBpbnB1dElkLmxlbmd0aCA8IDl9IGNsYXNzTmFtZT1cInctZnVsbCBweS00IGJnLXN0b25lLTkwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIGRhcms6dGV4dC1zdG9uZS0yMDAgcm91bmRlZC14bCBmb250LWJvbGQgdGV4dC1zbSB0cmFja2luZy13aWRlc3QgZGlzYWJsZWQ6b3BhY2l0eS0zMCB0cmFuc2l0aW9uLWFsbCBhY3RpdmU6c2NhbGUtWzAuOThdIHNoYWRvdy1tZCBob3ZlcjpiZy1zdG9uZS04MDAgZGFyazpob3ZlcjpiZy1zdG9uZS02MDBcIj7lkIzmnJ/jgpLplovlp4vjgZnjgos8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNTAwIGxlYWRpbmctcmVsYXhlZCBpdGFsaWMgcHgtMSB0ZXh0LWNlbnRlclwiPuKAu+WFpeWKm+OBl+OBn+OCs+ODvOODieOBruODh+ODvOOCv+OBq+WIh+OCiuabv+OCj+OCiuOBvuOBmeOAgjwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtOCBtdC04IGJvcmRlci10IGJvcmRlci1zdG9uZS0xMDAgZGFyazpib3JkZXItc3RvbmUtODAwXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblJlcXVlc3RSZXNldH0gY2xhc3NOYW1lPVwidy1mdWxsIHB5LTQgdGV4dC1yZWQtNDAwIGhvdmVyOnRleHQtcmVkLTYwMCBkYXJrOmhvdmVyOnRleHQtcmVkLTMwMCB0ZXh0LXhzIGZvbnQtYm9sZCB0cmFja2luZy13aWRlc3QgdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTJcIj48VHJhc2gyIHNpemU9ezE2fSAvPjxzcGFuPuWFqOODh+ODvOOCv+OCkuWJiumZpOOBl+OBpuWIneacn+WMljwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gIH07XG4gIFxuICBjb25zdCBUb2FzdCA9ICh7IG1lc3NhZ2UsIGlzVmlzaWJsZSwgb25IaWRlIH0pID0+IHtcbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChpc1Zpc2libGUpIHsgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KG9uSGlkZSwgMjAwMCk7IHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpOyB9IH0sIFtpc1Zpc2libGUsIG9uSGlkZV0pO1xuICAgICAgaWYgKCFpc1Zpc2libGUpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgdG9wLTIwIGxlZnQtMS8yIHRyYW5zZm9ybSAtdHJhbnNsYXRlLXgtMS8yIHotWzEwMF0gYW5pbWF0ZS1mYWRlLWluIHBvaW50ZXItZXZlbnRzLW5vbmVcIj48ZGl2IGNsYXNzTmFtZT1cImJnLXN0b25lLTgwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIGRhcms6dGV4dC1zdG9uZS0xMDAgcHgtNCBweS0yIHJvdW5kZWQtZnVsbCBzaGFkb3ctbGcgdGV4dC1zbSBmb250LW1lZGl1bSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBib3JkZXIgYm9yZGVyLXN0b25lLTcwMCBkYXJrOmJvcmRlci1zdG9uZS02MDBcIj48Q2hlY2sgc2l6ZT17MTR9IC8+e21lc3NhZ2V9PC9kaXY+PC9kaXY+O1xuICB9O1xuXG4gIGNvbnN0IEZpbHRlclNoZWV0ID0gKHsgaXNWaXNpYmxlLCBjdXJyZW50Q2F0ZWdvcnksIG9uU2VsZWN0LCBvbkNsb3NlIH0pID0+IHtcbiAgICBpZiAoIWlzVmlzaWJsZSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LVs2MF0gZmxleCBpdGVtcy1lbmQganVzdGlmeS1jZW50ZXIgc206aXRlbXMtY2VudGVyIHAtNCBhbmltYXRlLWZhZGUtaW5cIj5cbiAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1zdG9uZS05MDAvMjAgZGFyazpiZy1ibGFjay82MCBiYWNrZHJvcC1ibHVyLXNtXCIgb25DbGljaz17b25DbG9zZX0+PC9kaXY+XG4gICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbCBtYXgtdy1zbSBiZy13aGl0ZSBkYXJrOmJnLXN0b25lLTg1MCByb3VuZGVkLTJ4bCBwLTYgc2hhZG93LXhsIGFuaW1hdGUtZmxvYXQtdXAgc3BhY2UteS0yIG1heC1oLVs4MHZoXSBvdmVyZmxvdy15LWF1dG8gbm8tc2Nyb2xsYmFyXCI+XG4gICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPjxMaXN0RmlsdGVyIHNpemU9ezE0fSAvPuihqOekuuOBmeOCi+iogOiRieOCkumBuOOBtjwvaDM+XG4gICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25TZWxlY3QobnVsbCl9IFxuICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgcC00IHJvdW5kZWQteGwgdHJhbnNpdGlvbi1hbGwgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyICR7IWN1cnJlbnRDYXRlZ29yeSA/ICdiZy1zdG9uZS0xMDAgZGFyazpiZy1zdG9uZS04MDAgZm9udC1ib2xkIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAnIDogJ3RleHQtc3RvbmUtNjAwIGRhcms6dGV4dC1zdG9uZS00MDAgaG92ZXI6Ymctc3RvbmUtNTAgZGFyazpob3ZlcjpiZy1zdG9uZS04MDAnfWB9XG4gICAgICAgICAgID5cbiAgICAgICAgICAgICA8c3Bhbj7jgZnjgbnjgabjga7oqIDokYk8L3NwYW4+XG4gICAgICAgICAgICAgeyFjdXJyZW50Q2F0ZWdvcnkgJiYgPENoZWNrIHNpemU9ezE2fSAvPn1cbiAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgIHtDQVRFR09SSUVTLm1hcChjYXQgPT4gKFxuICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICBrZXk9e2NhdH0gXG4gICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdChjYXQpfVxuICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBwLTQgcm91bmRlZC14bCB0cmFuc2l0aW9uLWFsbCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgJHtjdXJyZW50Q2F0ZWdvcnkgPT09IGNhdCA/ICdiZy1zdG9uZS0xMDAgZGFyazpiZy1zdG9uZS04MDAgZm9udC1ib2xkIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAnIDogJ3RleHQtc3RvbmUtNjAwIGRhcms6dGV4dC1zdG9uZS00MDAgaG92ZXI6Ymctc3RvbmUtNTAgZGFyazpob3ZlcjpiZy1zdG9uZS04MDAnfWB9XG4gICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgPHNwYW4+e2NhdH08L3NwYW4+XG4gICAgICAgICAgICAgICB7Y3VycmVudENhdGVnb3J5ID09PSBjYXQgJiYgPENoZWNrIHNpemU9ezE2fSAvPn1cbiAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgKSl9XG4gICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtNCBtdC0yIGJvcmRlci10IGJvcmRlci1zdG9uZS01MCBkYXJrOmJvcmRlci1zdG9uZS04MDBcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9XCJ3LWZ1bGwgcHktMyB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTYwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMzAwIHRleHQteHMgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdFwiPumWieOBmOOCizwvYnV0dG9uPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBNZW51U2hlZXQgPSAoeyBpc1Zpc2libGUsIG9uRWRpdCwgb25EZWxldGUsIG9uQ2xvc2UgfSkgPT4ge1xuICAgIGlmICghaXNWaXNpYmxlKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIHotWzcwXSBmbGV4IGl0ZW1zLWVuZCBqdXN0aWZ5LWNlbnRlciBzbTppdGVtcy1jZW50ZXIgcC00IGFuaW1hdGUtZmFkZS1pblwiPlxuICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLXN0b25lLTkwMC8yMCBkYXJrOmJnLWJsYWNrLzYwIGJhY2tkcm9wLWJsdXItc21cIiBvbkNsaWNrPXtvbkNsb3NlfT48L2Rpdj5cbiAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgdy1mdWxsIG1heC13LXNtIGJnLXdoaXRlIGRhcms6Ymctc3RvbmUtODUwIHJvdW5kZWQtMnhsIHAtNiBzaGFkb3cteGwgYW5pbWF0ZS1mbG9hdC11cCBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IG9uQ2xvc2UoKTsgb25FZGl0KCk7IH19XG4gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBwLTQgcm91bmRlZC14bCB0cmFuc2l0aW9uLWFsbCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCB0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtMzAwIGhvdmVyOmJnLXN0b25lLTUwIGRhcms6aG92ZXI6Ymctc3RvbmUtODAwXCJcbiAgICAgICAgICAgPlxuICAgICAgICAgICAgIDxFZGl0MiBzaXplPXsyMH0gY2xhc3NOYW1lPVwidGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMFwiIC8+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQtc20gdHJhY2tpbmctd2lkZVwiPuiogOiRieOCkue3qOmbhuOBmeOCizwvc3Bhbj5cbiAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBvbkNsb3NlKCk7IG9uRGVsZXRlKCk7IH19XG4gICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCBwLTQgcm91bmRlZC14bCB0cmFuc2l0aW9uLWFsbCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCB0ZXh0LXJlZC00MDAgaG92ZXI6YmctcmVkLTUwIGRhcms6aG92ZXI6Ymctc3RvbmUtODAwXCJcbiAgICAgICAgICAgPlxuICAgICAgICAgICAgIDxUcmFzaDIgc2l6ZT17MjB9IC8+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQtc20gdHJhY2tpbmctd2lkZVwiPuWJiumZpOOBmeOCizwvc3Bhbj5cbiAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtNCBtdC0yIGJvcmRlci10IGJvcmRlci1zdG9uZS01MCBkYXJrOmJvcmRlci1zdG9uZS04MDBcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9XCJ3LWZ1bGwgcHktMyB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTYwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMzAwIHRleHQteHMgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdFwiPumWieOBmOOCizwvYnV0dG9uPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBTZWFzb25EZXRhaWxWaWV3ID0gKHsgaW5pdGlhbERhdGUsIG9uQ2xvc2UgfSkgPT4ge1xuICAgIGNvbnN0IFtjdXJyZW50RGF0ZSwgc2V0Q3VycmVudERhdGVdID0gdXNlU3RhdGUoaW5pdGlhbERhdGUgfHwgbmV3IERhdGUoKSk7XG4gICAgY29uc3QgeyBzb2xhclRlcm0sIG1pY3JvU2Vhc29uIH0gPSB1c2VNZW1vKCgpID0+IGdldFNlYXNvbkluZm8oY3VycmVudERhdGUpLCBbY3VycmVudERhdGVdKTtcbiAgICBjb25zdCBoYW5kbGVQcmV2ID0gKCkgPT4geyBjb25zdCBkID0gbmV3IERhdGUoY3VycmVudERhdGUpOyBkLnNldERhdGUoZC5nZXREYXRlKCkgLSA1KTsgc2V0Q3VycmVudERhdGUoZCk7IH07XG4gICAgY29uc3QgaGFuZGxlTmV4dCA9ICgpID0+IHsgY29uc3QgZCA9IG5ldyBEYXRlKGN1cnJlbnREYXRlKTsgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgNSk7IHNldEN1cnJlbnREYXRlKGQpOyB9O1xuICAgIGNvbnN0IGJ0blN0eWxlID0gXCJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0zMDAgdHJhbnNpdGlvbi1jb2xvcnMgdHJhY2tpbmctd2lkZXN0IHB4LTQgcHktMlwiO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBoLWZ1bGwgbWF4LXctbWQgbXgtYXV0byBwLTggcGItOCByZWxhdGl2ZSBhbmltYXRlLWZhZGUtaW4gYmctc3RvbmUtNTAgZGFyazpiZy1zdG9uZS05MDAgb3ZlcmZsb3cteS1hdXRvIG5vLXNjcm9sbGJhciB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3cgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHQtNSB0ZXh0LWNlbnRlciBzcGFjZS15LTEwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHVwcGVyY2FzZVwiPuS6jOWNgeWbm+evgOawlzwvcD5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LXNlcmlmIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMTAwXCI+e3NvbGFyVGVybS5uYW1lfTwvaDI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgZm9udC1zZXJpZlwiPntzb2xhclRlcm0ueW9taX08L3A+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtc3RvbmUtNjAwIGRhcms6dGV4dC1zdG9uZS0zMDAgZm9udC1zZXJpZiBsZWFkaW5nLXJlbGF4ZWQgbXQtNCBweC00XCI+e3NvbGFyVGVybS5kZXNjfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTIgaC1weCBiZy1zdG9uZS0yMDAgZGFyazpiZy1zdG9uZS03MDAgbXgtYXV0b1wiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdCB1cHBlcmNhc2VcIj7kuIPljYHkuozlgJk8L3A+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlcmlmIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTcwMCBkYXJrOnRleHQtc3RvbmUtMjAwXCI+e21pY3JvU2Vhc29uLm5hbWV9PC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBmb250LXNlcmlmXCI+e21pY3JvU2Vhc29uLnlvbWl9PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtMzAwIGZvbnQtc2VyaWYgbGVhZGluZy1yZWxheGVkIG10LTQgcHgtNFwiPnttaWNyb1NlYXNvbi5kZXNjfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS02MDAgZm9udC1tb25vIHRyYWNraW5nLXdpZGVzdCBwdC00XCI+e2N1cnJlbnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnamEtSlAnLCB7IG1vbnRoOiAnbG9uZycsIGRheTogJ251bWVyaWMnIH0pfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtMTIgcGItMjQgdGV4dC1jZW50ZXIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB4LTQgbWF4LXcteHMgbXgtYXV0b1wiPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUHJldn0gY2xhc3NOYW1lPVwicC0zIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS02MDAgaG92ZXI6dGV4dC1zdG9uZS02MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBhY3RpdmU6c2NhbGUtOTVcIj48Q2hldnJvbkxlZnQgc2l6ZT17MjR9IC8+PC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9e2J0blN0eWxlfT7plonjgZjjgos8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZU5leHR9IGNsYXNzTmFtZT1cInAtMyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0zMDAgdHJhbnNpdGlvbi1jb2xvcnMgYWN0aXZlOnNjYWxlLTk1XCI+PENoZXZyb25SaWdodCBzaXplPXsyNH0gLz48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IENvbmZpcm1EaWFsb2cgPSAoeyBpc1Zpc2libGUsIHRpdGxlLCBtZXNzYWdlLCBhY3Rpb25MYWJlbCwgb25Db25maXJtLCBvbkNhbmNlbCB9KSA9PiB7XG4gICAgICBpZiAoIWlzVmlzaWJsZSkgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIHotWzgwXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTYgYmctc3RvbmUtOTAwLzQwIGRhcms6YmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbSBhbmltYXRlLWZhZGUtaW5cIj48ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGRhcms6Ymctc3RvbmUtODAwIHJvdW5kZWQtMnhsIHAtOCBtYXgtdy14cyB3LWZ1bGwgc2hhZG93LXhsIHRleHQtY2VudGVyXCI+PGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAgbWItMiBmb250LXNlcmlmXCI+e3RpdGxlfTwvaDM+PHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIG1iLTggbGVhZGluZy1yZWxheGVkXCI+e21lc3NhZ2V9PC9wPjxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zXCI+PGJ1dHRvbiBvbkNsaWNrPXtvbkNvbmZpcm19IGNsYXNzTmFtZT1cInctZnVsbCBweS0zIGJnLXN0b25lLTkwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIHJvdW5kZWQtbGcgZm9udC1ib2xkIHRleHQtc20gaG92ZXI6Ymctc3RvbmUtODAwIGRhcms6aG92ZXI6Ymctc3RvbmUtNjAwIHRyYW5zaXRpb24tY29sb3JzXCI+e2FjdGlvbkxhYmVsfTwvYnV0dG9uPjxidXR0b24gb25DbGljaz17b25DYW5jZWx9IGNsYXNzTmFtZT1cInctZnVsbCBweS0zIGJnLXN0b25lLTEwMCBkYXJrOmJnLXN0b25lLTkwMCB0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtNDAwIHJvdW5kZWQtbGcgZm9udC1ib2xkIHRleHQtc20gaG92ZXI6Ymctc3RvbmUtMjAwIGRhcms6aG92ZXI6Ymctc3RvbmUtOTUwIHRyYW5zaXRpb24tY29sb3JzXCI+44Kt44Oj44Oz44K744OrPC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+O1xuICB9O1xuICBjb25zdCBGbG9hdGluZ1dyaXRlQnV0dG9uID0gKHsgb25DbGljayB9KSA9PiAoPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNiBsZWZ0LTAgcmlnaHQtMCBmbGV4IGp1c3RpZnktY2VudGVyIHotNDAgcHgtNiBwb2ludGVyLWV2ZW50cy1ub25lXCI+PGJ1dHRvbiBvbkNsaWNrPXtvbkNsaWNrfSBjbGFzc05hbWU9XCJiZy1zdG9uZS05MDAgZGFyazpiZy1zdG9uZS03MDAgdGV4dC1zdG9uZS01MCBkYXJrOnRleHQtc3RvbmUtMTAwIHB4LTggcHktNCByb3VuZGVkLWZ1bGwgc2hhZG93LTJ4bCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBib3JkZXIgYm9yZGVyLXN0b25lLTcwMCBkYXJrOmJvcmRlci1zdG9uZS02MDAgcG9pbnRlci1ldmVudHMtYXV0byBhY3RpdmU6c2NhbGUtOTUgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIGhvdmVyOmJnLXN0b25lLTgwMCBkYXJrOmhvdmVyOmJnLXN0b25lLTYwMCBhbmltYXRlLWZsb2F0LXVwXCI+PFBlbkxpbmUgc2l6ZT17MjB9IHN0cm9rZVdpZHRoPXsyLjV9IC8+PHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0XCI+6KiY44GZPC9zcGFuPjwvYnV0dG9uPjwvZGl2Pik7XG4gIFxuICBjb25zdCBJbnB1dFZpZXcgPSAoeyBvblNhdmUsIGluaXRpYWxEYXRhID0gbnVsbCwgb25EaXJ0eUNoYW5nZSB9KSA9PiB7XG4gICAgICBjb25zdCBbdGV4dCwgc2V0VGV4dF0gPSB1c2VTdGF0ZShpbml0aWFsRGF0YSA/IGluaXRpYWxEYXRhLnRleHQgOiAnJyk7XG4gICAgICBjb25zdCBbc291cmNlLCBzZXRTb3VyY2VdID0gdXNlU3RhdGUoaW5pdGlhbERhdGEgPyBpbml0aWFsRGF0YS5zb3VyY2UgOiAnJyk7XG4gICAgICBjb25zdCBbc2VsZWN0ZWRDYXRlZ29yeSwgc2V0U2VsZWN0ZWRDYXRlZ29yeV0gPSB1c2VTdGF0ZShpbml0aWFsRGF0YSA/IGluaXRpYWxEYXRhLmNhdGVnb3J5IDogQ0FURUdPUklFU1swXSk7XG4gICAgICBjb25zdCB0ZXh0YXJlYVJlZiA9IHVzZVJlZihudWxsKTtcbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChpbml0aWFsRGF0YSkgeyBzZXRUZXh0KGluaXRpYWxEYXRhLnRleHQpOyBzZXRTb3VyY2UoaW5pdGlhbERhdGEuc291cmNlIHx8ICcnKTsgc2V0U2VsZWN0ZWRDYXRlZ29yeShpbml0aWFsRGF0YS5jYXRlZ29yeSk7IH0gZWxzZSB7IHNldFRleHQoJycpOyBzZXRTb3VyY2UoJycpOyBzZXRTZWxlY3RlZENhdGVnb3J5KENBVEVHT1JJRVNbMF0pOyB9IH0sIFtpbml0aWFsRGF0YV0pO1xuICAgICAgdXNlRWZmZWN0KCgpID0+IHsgaWYgKHRleHRhcmVhUmVmLmN1cnJlbnQpIHsgdGV4dGFyZWFSZWYuY3VycmVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7IHRleHRhcmVhUmVmLmN1cnJlbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGV4dGFyZWFSZWYuY3VycmVudC5zY3JvbGxIZWlnaHR9cHhgOyB9IH0sIFt0ZXh0XSk7XG4gICAgICBcbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChvbkRpcnR5Q2hhbmdlKSB7XG4gICAgICAgICAgICBjb25zdCBpc0RpcnR5ID0gaW5pdGlhbERhdGFcbiAgICAgICAgICAgICAgICA/ICh0ZXh0ICE9PSBpbml0aWFsRGF0YS50ZXh0IHx8IHNvdXJjZSAhPT0gKGluaXRpYWxEYXRhLnNvdXJjZSB8fCAnJykgfHwgc2VsZWN0ZWRDYXRlZ29yeSAhPT0gaW5pdGlhbERhdGEuY2F0ZWdvcnkpXG4gICAgICAgICAgICAgICAgOiAodGV4dC50cmltKCkubGVuZ3RoID4gMCB8fCBzb3VyY2UudHJpbSgpLmxlbmd0aCA+IDApO1xuICAgICAgICAgICAgb25EaXJ0eUNoYW5nZShpc0RpcnR5KTtcbiAgICAgICAgfVxuICAgICAgfSwgW3RleHQsIHNvdXJjZSwgc2VsZWN0ZWRDYXRlZ29yeSwgaW5pdGlhbERhdGEsIG9uRGlydHlDaGFuZ2VdKTtcblxuICAgICAgY29uc3QgaGFuZGxlU2F2ZSA9ICgpID0+IHsgaWYgKHRleHQudHJpbSgpKSBvblNhdmUodGV4dCwgc291cmNlLCBzZWxlY3RlZENhdGVnb3J5KTsgfTtcbiAgICAgIGNvbnN0IGlzRWRpdE1vZGUgPSAhIWluaXRpYWxEYXRhO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIG1heC13LW1kIG14LWF1dG8gcC02IHB0LTggcGItMjQgYW5pbWF0ZS1mYWRlLWluIG92ZXJmbG93LXktYXV0byBuby1zY3JvbGxiYXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IGZsZXggZmxleC1jb2wgZ2FwLTZcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQtc3RvbmUtNTAwIGRhcms6dGV4dC1zdG9uZS00MDAgdGV4dC14cyBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHVwcGVyY2FzZSBzZWxlY3Qtbm9uZSBjdXJzb3ItZGVmYXVsdCBhY3RpdmU6dGV4dC1zdG9uZS04MDAgZGFyazphY3RpdmU6dGV4dC1zdG9uZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIj57aXNFZGl0TW9kZSA/ICfoqIDokYnjgpLnt6jpm4bjgZnjgosnIDogJ+iogOiRieOCkuiomOOBmSd9PC9sYWJlbD5cbiAgICAgICAgICAgICAgPHRleHRhcmVhIHJlZj17dGV4dGFyZWFSZWZ9IHZhbHVlPXt0ZXh0fSBvbkNoYW5nZT17KGUpID0+IHNldFRleHQoZS50YXJnZXQudmFsdWUpfSBwbGFjZWhvbGRlcj1cIuW/g+OBq+aui+OBo+OBn+iogOiRieOCkuWFpeWKmy4uLlwiIGNsYXNzTmFtZT1cInctZnVsbCBtaW4taC1bOHJlbV0gYmctdHJhbnNwYXJlbnQgdGV4dC1sZyBsZWFkaW5nLXJlbGF4ZWQgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCBwbGFjZWhvbGRlcjp0ZXh0LXN0b25lLTMwMCBkYXJrOnBsYWNlaG9sZGVyOnRleHQtc3RvbmUtNjAwIHJlc2l6ZS1ub25lIGZvY3VzOm91dGxpbmUtbm9uZSBmb250LXNlcmlmIG92ZXJmbG93LWhpZGRlbiB0cmFuc2l0aW9uLWNvbG9yc1wiIGF1dG9Gb2N1cz17IWlzRWRpdE1vZGV9IC8+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPXtzb3VyY2V9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0U291cmNlKGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9XCLlh7rlhbjvvIjku7vmhI/vvIlcIiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctdHJhbnNwYXJlbnQgYm9yZGVyLWIgYm9yZGVyLXN0b25lLTIwMCBkYXJrOmJvcmRlci1zdG9uZS03MDAgcHktMiBtYi00IGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItc3RvbmUtNDAwIGRhcms6Zm9jdXM6Ym9yZGVyLXN0b25lLTUwMCB0ZXh0LXNtIGZvbnQtc2VyaWYgdGV4dC1zdG9uZS02MDAgZGFyazp0ZXh0LXN0b25lLTQwMCBwbGFjZWhvbGRlcjp0ZXh0LXN0b25lLTIwMCBkYXJrOnBsYWNlaG9sZGVyOnRleHQtc3RvbmUtNzAwIHRyYW5zaXRpb24tY29sb3JzXCIgLz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgIHtDQVRFR09SSUVTLm1hcCgoY2F0KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24ga2V5PXtjYXR9IG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkQ2F0ZWdvcnkoY2F0KX0gY2xhc3NOYW1lPXtgcHktMyBweC0yIHRleHQtc20gcm91bmRlZCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgYm9yZGVyICR7c2VsZWN0ZWRDYXRlZ29yeSA9PT0gY2F0ID8gJ2JnLXN0b25lLTgwMCBkYXJrOmJnLXN0b25lLTcwMCB0ZXh0LXN0b25lLTUwIGRhcms6dGV4dC1zdG9uZS0xMDAgYm9yZGVyLXN0b25lLTgwMCBkYXJrOmJvcmRlci1zdG9uZS03MDAgc2hhZG93LW1kJyA6ICdiZy13aGl0ZSBkYXJrOmJnLXN0b25lLTgwMCB0ZXh0LXN0b25lLTYwMCBkYXJrOnRleHQtc3RvbmUtNDAwIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtNzAwIGhvdmVyOmJvcmRlci1zdG9uZS00MDAgZGFyazpob3Zlcjpib3JkZXItc3RvbmUtNTAwJ31gfT57Y2F0fTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTYgcGItNFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVNhdmV9IGRpc2FibGVkPXshdGV4dC50cmltKCl9IGNsYXNzTmFtZT17YHctZnVsbCBweS00IHJvdW5kZWQtbGcgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgJHt0ZXh0LnRyaW0oKSA/ICdiZy1zdG9uZS04MDAgZGFyazpiZy1zdG9uZS03MDAgdGV4dC1zdG9uZS01MCBkYXJrOnRleHQtc3RvbmUtMTAwIHNoYWRvdy1sZyBob3ZlcjpiZy1zdG9uZS03MDAgZGFyazpob3ZlcjpiZy1zdG9uZS02MDAgYWN0aXZlOnNjYWxlLVswLjk4XScgOiAnYmctc3RvbmUtMjAwIGRhcms6Ymctc3RvbmUtODAwIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS02MDAgY3Vyc29yLW5vdC1hbGxvd2VkJ31gfT57aXNFZGl0TW9kZSA/ICfmm7TmlrDjgZnjgosnIDogJ+S/neWtmOOBmeOCiyd9PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gIH07XG4gIFxuICBjb25zdCBTZWFzb25CYWRnZSA9ICh7IG9uQ2xpY2sgfSkgPT4ge1xuICAgIGNvbnN0IHsgc29sYXJUZXJtLCBtaWNyb1NlYXNvbiB9ID0gdXNlTWVtbygoKSA9PiBnZXRTZWFzb25JbmZvKG5ldyBEYXRlKCkpLCBbXSk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxidXR0b24gb25DbGljaz17b25DbGlja30gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEuNSB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTUwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtNDAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnMgdHJhY2tpbmctd2lkZSBweS0xIGdyb3VwXCI+XG4gICAgICAgIDxDbG91ZFN1biBzaXplPXsxOH0gY2xhc3NOYW1lPVwidGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBncm91cC1ob3Zlcjp0ZXh0LXN0b25lLTYwMCBkYXJrOmdyb3VwLWhvdmVyOnRleHQtc3RvbmUtMzAwIHRyYW5zaXRpb24tY29sb3JzXCIgLz5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYm9yZGVyLWIgYm9yZGVyLXRyYW5zcGFyZW50IGdyb3VwLWhvdmVyOmJvcmRlci1zdG9uZS0zMDAgZGFyazpncm91cC1ob3Zlcjpib3JkZXItc3RvbmUtNjAwIHRyYW5zaXRpb24tYWxsXCI+e3NvbGFyVGVybS5uYW1lfSA8c3BhbiBjbGFzc05hbWU9XCJteC0xIHRleHQtc3RvbmUtMzAwIGRhcms6dGV4dC1zdG9uZS02MDBcIj4vPC9zcGFuPiB7bWljcm9TZWFzb24ubmFtZX08L3NwYW4+XG4gICAgICAgIDxDaGV2cm9uUmlnaHQgc2l6ZT17MTR9IGNsYXNzTmFtZT1cInRleHQtc3RvbmUtMzAwIGRhcms6dGV4dC1zdG9uZS02MDAgZ3JvdXAtaG92ZXI6dGV4dC1zdG9uZS01MDAgZGFyazpncm91cC1ob3Zlcjp0ZXh0LXN0b25lLTQwMCB0cmFuc2l0aW9uLWNvbG9yc1wiIC8+XG4gICAgICA8L2J1dHRvbj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IExpc3RWaWV3ID0gKHsgcXVvdGVzLCBvbkl0ZW1DbGljaywgb25TdGFydFJhbmRvbSwgZmlsdGVyQ2F0ZWdvcnksIG9uT3BlbkZpbHRlciwgb25PcGVuU2Vhc29uIH0pID0+IHtcbiAgICBjb25zdCBkaXNwbGF5UXVvdGVzID0gZmlsdGVyQ2F0ZWdvcnkgPyBxdW90ZXMuZmlsdGVyKHEgPT4gcS5jYXRlZ29yeSA9PT0gZmlsdGVyQ2F0ZWdvcnkpIDogcXVvdGVzO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBvdmVyZmxvdy15LWF1dG8gbWF4LXctbWQgbXgtYXV0byBweC02IHB0LTQgcGItMzIgbm8tc2Nyb2xsYmFyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtZW5kIG1iLTQgcHgtMSBnYXAtMlwiPlxuICAgICAgICAgIDxTZWFzb25CYWRnZSBvbkNsaWNrPXtvbk9wZW5TZWFzb259IC8+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbk9wZW5GaWx0ZXJ9IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjUgdGV4dC1bMTBweF0gZm9udC1ib2xkIHRleHQtc3RvbmUtNDAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6dGV4dC1zdG9uZS01MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyB0cmFja2luZy13aWRlIGJnLXN0b25lLTEwMC84MCBkYXJrOmJnLXN0b25lLTgwMC84MCBweC0zIHB5LTEuNSByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci1zdG9uZS0yMDAvNTAgZGFyazpib3JkZXItc3RvbmUtNzAwLzUwXCI+XG4gICAgICAgICAgICA8TGlzdEZpbHRlciBzaXplPXsxMn0gLz48c3Bhbj57ZmlsdGVyQ2F0ZWdvcnkgfHwgJ+OBmeOBueOBpuOBruiogOiRiSd9PC9zcGFuPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2Rpc3BsYXlRdW90ZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaC1mdWxsIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgcC02IHRleHQtY2VudGVyIGl0YWxpYyBmb250LXNlcmlmXCI+XG4gICAgICAgICAgICB7cXVvdGVzLmxlbmd0aCA9PT0gMCA/IDw+PHA+44G+44Gg6KiA6JGJ44GM44GC44KK44G+44Gb44KT44CCPC9wPjxwIGNsYXNzTmFtZT1cIm10LTJcIj7kuIvjga7jgIzoqJjjgZnjgI3jgYvjgonlp4vjgoHjgb7jgZfjgofjgYbjgII8L3A+PC8+IDogPHA+44GT44Gu44Kr44OG44K044Oq44Gu6KiA6JGJ44Gv44GC44KK44G+44Gb44KT44CCPC9wPn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblN0YXJ0UmFuZG9tfSBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB5LTQgcHgtNSBiZy1zdG9uZS0xMDAgZGFyazpiZy1zdG9uZS04MDAgYm9yZGVyIGJvcmRlci1zdG9uZS0yMDAgZGFyazpib3JkZXItc3RvbmUtNzAwIHJvdW5kZWQtMnhsIGhvdmVyOmJnLXN0b25lLTIwMCB0cmFuc2l0aW9uLWFsbCBncm91cCBhY3RpdmU6c2NhbGUtWzAuOThdXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj48ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGRhcms6Ymctc3RvbmUtNzAwIHAtMi41IHJvdW5kZWQteGwgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCBncm91cC1ob3Zlcjpyb3RhdGUtMTIgdHJhbnNpdGlvbi10cmFuc2Zvcm1cIj48U3BhcmtsZXMgc2l6ZT17MjB9IC8+PC9kaXY+PGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxlZnRcIj48cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTgwMCBkYXJrOnRleHQtc3RvbmUtMjAwIHRyYWNraW5nLXdpZGVyXCI+6KiA6JGJ44Go44Gu5YaN5LyaPC9wPjxwIGNsYXNzTmFtZT1cInRleHQtWzEwcHhdIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgZm9udC1zZXJpZlwiPuOBhOOBpOOBi+OBruiogOiRieOBq+OAgeOBvuOBn+WHuuS8muOBhjwvcD48L2Rpdj48L2Rpdj5cbiAgICAgICAgICAgICAgPENoZXZyb25SaWdodCBjbGFzc05hbWU9XCJ0ZXh0LXN0b25lLTMwMCBkYXJrOnRleHQtc3RvbmUtNjAwXCIgc2l6ZT17MTh9IC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIHtkaXNwbGF5UXVvdGVzLm1hcCgocXVvdGUpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e3F1b3RlLmlkfSBvbkNsaWNrPXsoKSA9PiBvbkl0ZW1DbGljayhxdW90ZS5pZCl9IGNsYXNzTmFtZT1cImdyb3VwIGJnLXdoaXRlIGRhcms6Ymctc3RvbmUtODUwIHAtNiByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXN0b25lLTEwMCBkYXJrOmJvcmRlci1zdG9uZS04MDAgaG92ZXI6Ym9yZGVyLXN0b25lLTMwMCB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlciBhY3RpdmU6Ymctc3RvbmUtNTAgc2hhZG93LXNtIHRleHQtbGVmdFwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmFzZSBsZWFkaW5nLXJlbGF4ZWQgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCB3aGl0ZXNwYWNlLXByZS13cmFwIG1iLTEgZm9udC1zZXJpZiBsaW5lLWNsYW1wLTNcIj57cXVvdGUudGV4dH08L3A+XG4gICAgICAgICAgICAgICAge3F1b3RlLnNvdXJjZSAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNTAwIGZvbnQtc2VyaWYgbWItM1wiPuKAlCB7cXVvdGUuc291cmNlfTwvcD59XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1lbmQgYm9yZGVyLXQgYm9yZGVyLXN0b25lLTUwIGRhcms6Ym9yZGVyLXN0b25lLTgwMCBwdC0zXCI+PHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIGJnLXN0b25lLTEwMCBkYXJrOmJnLXN0b25lLTgwMCBweC0yIHB5LTEgcm91bmRlZC1sZyBmb250LW1lZGl1bVwiPntxdW90ZS5jYXRlZ29yeX08L3NwYW4+PHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bMTBweF0gdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTYwMCBmb250LW1vbm9cIj57bmV3IERhdGUocXVvdGUudGltZXN0YW1wKS50b0xvY2FsZURhdGVTdHJpbmcoJ2phLUpQJyl9PC9zcGFuPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBTaW5nbGVRdW90ZVZpZXcgPSAoeyBxdW90ZSwgb25OZXh0LCBvblByZXYsIGhhc05leHQsIGhhc1ByZXYsIG5leHRJY29uOiBOZXh0SWNvbiwgb25DbG9zZSwgaXNSYW5kb21Nb2RlID0gZmFsc2UgfSkgPT4ge1xuICAgIGNvbnN0IGJ0blN0eWxlID0gXCJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGhvdmVyOnRleHQtc3RvbmUtNjAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0zMDAgdHJhbnNpdGlvbi1jb2xvcnMgdHJhY2tpbmctd2lkZXN0IHB4LTQgcHktMlwiO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC1mdWxsIG1heC13LW1kIG14LWF1dG8gcC04IHBiLTggcmVsYXRpdmUgYW5pbWF0ZS1mYWRlLWluIGJnLXN0b25lLTUwIGRhcms6Ymctc3RvbmUtOTAwIG92ZXJmbG93LXktYXV0byBuby1zY3JvbGxiYXIgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMzAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1ncm93IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHB0LTUgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgcHgtMyBweS0xIHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLXN0b25lLTIwMCBkYXJrOmJvcmRlci1zdG9uZS03MDAgdGV4dC14cyB0ZXh0LXN0b25lLTUwMCBkYXJrOnRleHQtc3RvbmUtNDAwIHRyYWNraW5nLXdpZGUgbWItOFwiPntxdW90ZS5jYXRlZ29yeX08L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC0yXCI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhsIG1kOnRleHQtMnhsIGZvbnQtc2VyaWYgdGV4dC1zdG9uZS04MDAgZGFyazp0ZXh0LXN0b25lLTIwMCB3aGl0ZXNwYWNlLXByZS13cmFwIG1iLTQgc2VsZWN0LXRleHQgbGVhZGluZy1yZWxheGVkXCIgc3R5bGU9e3sgbGluZUhlaWdodDogJzEuOCcgfX0+e3F1b3RlLnRleHR9PC9wPlxuICAgICAgICAgICAge3F1b3RlLnNvdXJjZSAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtc3RvbmUtNTAwIGRhcms6dGV4dC1zdG9uZS00MDAgZm9udC1zZXJpZiBtYi04XCI+4oCUIHtxdW90ZS5zb3VyY2V9PC9wPn1cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOCBmbGV4IGp1c3RpZnktY2VudGVyIHRleHQtc3RvbmUtMzAwIGRhcms6dGV4dC1zdG9uZS03MDBcIj48ZGl2IGNsYXNzTmFtZT1cImgtcHggdy0xMiBiZy1zdG9uZS0zMDAgZGFyazpiZy1zdG9uZS03MDBcIj48L2Rpdj48L2Rpdj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC14cyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGZvbnQtbW9ubyB0cmFja2luZy13aWRlc3RcIj57bmV3IERhdGUocXVvdGUudGltZXN0YW1wKS50b0xvY2FsZURhdGVTdHJpbmcoJ2phLUpQJyl9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0xMiBwYi0yNCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIHtpc1JhbmRvbU1vZGUgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC04IG1heC13LXhzIG14LWF1dG9cIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbk5leHR9IGNsYXNzTmFtZT1cImdyb3VwIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0zIHRleHQtc3RvbmUtNDAwIGRhcms6dGV4dC1zdG9uZS01MDAgaG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazpob3Zlcjp0ZXh0LXN0b25lLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyBhY3RpdmU6c2NhbGUtOTVcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCByb3VuZGVkLWZ1bGwgYmctc3RvbmUtMTAwIGRhcms6Ymctc3RvbmUtODAwIGdyb3VwLWhvdmVyOmJnLXN0b25lLTIwMCBkYXJrOmdyb3VwLWhvdmVyOmJnLXN0b25lLTcwMCB0cmFuc2l0aW9uLWNvbG9yc1wiPjxOZXh0SWNvbiBzaXplPXsyNH0gc3Ryb2tlV2lkdGg9ezEuNX0gLz48L2Rpdj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPXtidG5TdHlsZX0+6ZaJ44GY44KLPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHgtNCBtYXgtdy14cyBteC1hdXRvXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25QcmV2fSBkaXNhYmxlZD17IWhhc1ByZXZ9IGNsYXNzTmFtZT1cInAtMyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNjAwIGVuYWJsZWQ6aG92ZXI6dGV4dC1zdG9uZS02MDAgZGFyazplbmFibGVkOmhvdmVyOnRleHQtc3RvbmUtMzAwIHRyYW5zaXRpb24tY29sb3JzIGRpc2FibGVkOm9wYWNpdHktMCBhY3RpdmU6c2NhbGUtOTVcIj48Q2hldnJvbkxlZnQgc2l6ZT17MjR9IC8+PC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPXtidG5TdHlsZX0+5LiA6Kan44G4PC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25OZXh0fSBkaXNhYmxlZD17IWhhc05leHR9IGNsYXNzTmFtZT1cInAtMyB0ZXh0LXN0b25lLTQwMCBkYXJrOnRleHQtc3RvbmUtNTAwIGVuYWJsZWQ6aG92ZXI6dGV4dC1zdG9uZS04MDAgZGFyazplbmFibGVkOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzIGRpc2FibGVkOm9wYWNpdHktMCBhY3RpdmU6c2NhbGUtOTVcIj48TmV4dEljb24gc2l6ZT17MjR9IC8+PC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgQXBwID0gKCkgPT4ge1xuICAgIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtzaG9ydENvZGUsIHNldFNob3J0Q29kZV0gPSB1c2VTdGF0ZSgnJyk7XG4gICAgY29uc3QgW2lzTG9hZGluZ0NvZGUsIHNldElzTG9hZGluZ0NvZGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtjb2RlRXJyb3IsIHNldENvZGVFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbc3luY1VzZXJJZCwgc2V0U3luY1VzZXJJZF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbdmlld01vZGUsIHNldFZpZXdNb2RlXSA9IHVzZVN0YXRlKCdsaXN0Jyk7XG4gICAgY29uc3QgW3NlbGVjdGVkUXVvdGVJZCwgc2V0U2VsZWN0ZWRRdW90ZUlkXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtyYW5kb21IaXN0b3J5LCBzZXRSYW5kb21IaXN0b3J5XSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCBbcXVvdGVzLCBzZXRRdW90ZXNdID0gdXNlU3RhdGUoW10pO1xuICAgIGNvbnN0IFt0b2FzdCwgc2V0VG9hc3RdID0gdXNlU3RhdGUoeyBzaG93OiBmYWxzZSwgbWVzc2FnZTogJycgfSk7XG4gICAgY29uc3QgW2RpYWxvZ1N0YXRlLCBzZXREaWFsb2dTdGF0ZV0gPSB1c2VTdGF0ZSh7IGlzVmlzaWJsZTogZmFsc2UsIHR5cGU6IG51bGwsIGlkOiBudWxsIH0pO1xuICAgIGNvbnN0IFtpc0RhcmtNb2RlLCBzZXRJc0RhcmtNb2RlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbZmlsdGVyQ2F0ZWdvcnksIHNldEZpbHRlckNhdGVnb3J5XSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFtpc0ZpbHRlclZpc2libGUsIHNldElzRmlsdGVyVmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2lzSW5wdXREaXJ0eSwgc2V0SXNJbnB1dERpcnR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbaXNNZW51VmlzaWJsZSwgc2V0SXNNZW51VmlzaWJsZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW2lzSW5pdGlhbExvYWRpbmcsIHNldElzSW5pdGlhbExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgYXV0aEluaXRpYXRlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3Qgc2F2ZWRUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpO1xuICAgICAgaWYgKHNhdmVkVGhlbWUgPT09ICdkYXJrJykgeyBzZXRJc0RhcmtNb2RlKHRydWUpOyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGFyaycpOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJ0aGVtZS1jb2xvclwiXScpLnNldEF0dHJpYnV0ZSgnY29udGVudCcsICcjMGMwYTA5Jyk7IH1cbiAgICAgIGVsc2UgeyBzZXRJc0RhcmtNb2RlKGZhbHNlKTsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmsnKTsgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwidGhlbWUtY29sb3JcIl0nKS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCAnI2ZhZmFmOScpOyB9XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgdG9nZ2xlVGhlbWUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBuZXh0ID0gIWlzRGFya01vZGU7IHNldElzRGFya01vZGUobmV4dCk7XG4gICAgICBpZiAobmV4dCkgeyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGFyaycpOyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCAnZGFyaycpOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJ0aGVtZS1jb2xvclwiXScpLnNldEF0dHJpYnV0ZSgnY29udGVudCcsICcjMGMwYTA5Jyk7IH1cbiAgICAgIGVsc2UgeyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZGFyaycpOyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCAnbGlnaHQnKTsgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwidGhlbWUtY29sb3JcIl0nKS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnLCAnI2ZhZmFmOScpOyB9XG4gICAgfTtcblxuICAgIGNvbnN0IGZldGNoVXNlckRhdGEgPSBhc3luYyAoY3VycmVudFVzZXIpID0+IHtcbiAgICAgIGlmICghY3VycmVudFVzZXIpIHJldHVybjtcbiAgICAgIHNldElzTG9hZGluZ0NvZGUodHJ1ZSk7IHNldENvZGVFcnJvcihudWxsKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXJDb2RlUmVmID0gZG9jKGRiLCAnYXJ0aWZhY3RzJywgYXBwSWQsICdwdWJsaWMnLCAnZGF0YScsICd1c2VyQ29kZXMnLCBjdXJyZW50VXNlci51aWQpO1xuICAgICAgICBjb25zdCBjb2RlU25hcCA9IGF3YWl0IGdldERvYyh1c2VyQ29kZVJlZik7XG4gICAgICAgIGlmIChjb2RlU25hcC5leGlzdHMoKSkgeyBzZXRTaG9ydENvZGUoY29kZVNuYXAuZGF0YSgpLmNvZGUpOyB9IFxuICAgICAgICBlbHNlIHsgY29uc3QgbmV3Q29kZSA9IGdlbmVyYXRlU2hvcnRDb2RlKCk7IGF3YWl0IHNldERvYyhkb2MoZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3B1YmxpYycsICdkYXRhJywgJ3N5bmNDb2RlcycsIG5ld0NvZGUpLCB7IHVpZDogY3VycmVudFVzZXIudWlkIH0pOyBhd2FpdCBzZXREb2ModXNlckNvZGVSZWYsIHsgY29kZTogbmV3Q29kZSB9KTsgc2V0U2hvcnRDb2RlKG5ld0NvZGUpOyB9XG4gICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IHNldENvZGVFcnJvcihcIuaOpee2muOCqOODqeODvFwiKTsgfSBmaW5hbGx5IHsgc2V0SXNMb2FkaW5nQ29kZShmYWxzZSk7IH1cbiAgICB9O1xuXG4gICAgLy8g6KqN6Ki844Gu55uj6KaWOiDku6XliY3jga7jg5Djg7zjgrjjg6fjg7Pjgajjga7mlbTlkIjmgKfjgoLogIPmha7jgZfjgIFcbiAgICAvLyDjgZPjgZPjgafjga8gaW5pdEF1dGhQcm9taXNlIOOBruWujOS6huOCkuW+heOBpCAo44Kw44Ot44O844OQ44Or44Gn5rC457aa5YyW6Kit5a6a5riI44G/KVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoYXV0aEluaXRpYXRlZFJlZi5jdXJyZW50KSByZXR1cm47XG4gICAgICBhdXRoSW5pdGlhdGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgXG4gICAgICBsZXQgdW5zdWJzY3JpYmUgPSBudWxsO1xuICAgICAgXG4gICAgICBjb25zdCBzZXR1cEF1dGggPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdW5zdWJzY3JpYmUgPSBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgKHUpID0+IHtcbiAgICAgICAgICAgIGlmICh1KSB7IFxuICAgICAgICAgICAgICAvLyDml6LlrZjjg6bjg7zjgrbjg7zjgYzjgYTjgozjgbDjgZ3jgozjgpLkvb/jgYYgKHY557O744Gq44Gu44Gn5rC457aa5YyW5oOF5aCx44GvIGxvY2FsU3RvcmFnZSDjgavjgYLjgovjga/jgZopXG4gICAgICAgICAgICAgIHNldFVzZXIodSk7IFxuICAgICAgICAgICAgICBmZXRjaFVzZXJEYXRhKHUpOyBcbiAgICAgICAgICAgIH0gZWxzZSB7IFxuICAgICAgICAgICAgICAvLyDjg6bjg7zjgrbjg7zjgYzjgYTjgarjgYTloLTlkIjjga7jgb/mlrDopo/kvZzmiJBcbiAgICAgICAgICAgICAgLy8g44CQ6YeN6KaB44CR5rC457aa5YyW6Kit5a6aKHNldFBlcnNpc3RlbmNlKeOBr+OCueOCr+ODquODl+ODiOiqreOBv+i+vOOBv+ebtOW+jOOBq+i1sOOBo+OBpuOBhOOCi+OBn+OCgeOAgVxuICAgICAgICAgICAgICAvLyDjgZPjgZPjgacgdXNlciDjgYwgbnVsbCDjgarjgonmnKzlvZPjgavjgYTjgarjgYTjgajliKTmlq3jgZfjgaboia/jgYRcbiAgICAgICAgICAgICAgc2lnbkluQW5vbnltb3VzbHkoYXV0aCkuY2F0Y2goZSA9PiBzZXRDb2RlRXJyb3IoXCLoqo3oqLzjgqjjg6njg7xcIikpOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHNldHVwQXV0aCgpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGFjdGl2ZVVzZXJJZCA9IHN5bmNVc2VySWQgfHwgKHVzZXIgPyB1c2VyLnVpZCA6IG51bGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoIWFjdGl2ZVVzZXJJZCkgeyBcbiAgICAgICAgaWYgKCF1c2VyICYmICFpc0luaXRpYWxMb2FkaW5nID09PSBmYWxzZSkgc2V0SXNJbml0aWFsTG9hZGluZyhmYWxzZSk7IFxuICAgICAgICByZXR1cm47IFxuICAgICAgfVxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3VzZXJzJywgYWN0aXZlVXNlcklkLCAncXVvdGVzJykpO1xuICAgICAgcmV0dXJuIG9uU25hcHNob3QocSwgKHNuYXApID0+IHtcbiAgICAgICAgc2V0UXVvdGVzKHNuYXAuZG9jcy5tYXAoZCA9PiAoeyBpZDogZC5pZCwgLi4uZC5kYXRhKCkgfSkpLnNvcnQoKGEsIGIpID0+IChiLnRpbWVzdGFtcCB8fCAwKSAtIChhLnRpbWVzdGFtcCB8fCAwKSkpO1xuICAgICAgICBzZXRJc0luaXRpYWxMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0sICgpID0+IHNldElzSW5pdGlhbExvYWRpbmcoZmFsc2UpKTtcbiAgICB9LCBbYWN0aXZlVXNlcklkXSk7XG5cbiAgICBjb25zdCBzaG93VG9hc3QgPSAobWVzc2FnZSkgPT4gc2V0VG9hc3QoeyBzaG93OiB0cnVlLCBtZXNzYWdlIH0pO1xuICAgIGNvbnN0IGhhbmRsZVN5bmNCeUNvZGUgPSBhc3luYyAoY29kZSkgPT4geyBpZiAoIXVzZXIpIHJldHVybjsgdHJ5IHsgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvYyhkb2MoZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3B1YmxpYycsICdkYXRhJywgJ3N5bmNDb2RlcycsIGNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCkpKTsgaWYgKHNuYXAuZXhpc3RzKCkpIHsgc2V0U3luY1VzZXJJZChzbmFwLmRhdGEoKS51aWQpOyBzZXRWaWV3TW9kZSgnbGlzdCcpOyBzaG93VG9hc3QoXCLlkIzmnJ/jgpLplovlp4vjgZfjgb7jgZfjgZ9cIik7IH0gZWxzZSBzaG93VG9hc3QoXCLjgrPjg7zjg4njgYzopovjgaTjgYvjgorjgb7jgZvjgpNcIik7IH0gY2F0Y2ggKGUpIHsgc2hvd1RvYXN0KFwi5ZCM5pyf44Ko44Op44O8XCIpOyB9IH07XG4gICAgY29uc3QgYWRkUXVvdGUgPSBhc3luYyAodGV4dCwgc291cmNlLCBjYXRlZ29yeSkgPT4geyBpZiAoIWFjdGl2ZVVzZXJJZCkgcmV0dXJuOyBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAndXNlcnMnLCBhY3RpdmVVc2VySWQsICdxdW90ZXMnKSwgeyB0ZXh0LCBzb3VyY2UsIGNhdGVnb3J5LCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSk7IHNldElzSW5wdXREaXJ0eShmYWxzZSk7IHNldFZpZXdNb2RlKCdsaXN0Jyk7IHNob3dUb2FzdChcIuiogOiRieOCkuS/neWtmOOBl+OBvuOBl+OBn1wiKTsgfTtcbiAgICBjb25zdCB1cGRhdGVRdW90ZSA9IGFzeW5jICh0ZXh0LCBzb3VyY2UsIGNhdGVnb3J5KSA9PiB7IGlmICghYWN0aXZlVXNlcklkIHx8ICFzZWxlY3RlZFF1b3RlSWQpIHJldHVybjsgYXdhaXQgdXBkYXRlRG9jKGRvYyhkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAndXNlcnMnLCBhY3RpdmVVc2VySWQsICdxdW90ZXMnLCBzZWxlY3RlZFF1b3RlSWQpLCB7IHRleHQsIHNvdXJjZSwgY2F0ZWdvcnkgfSk7IHNldElzSW5wdXREaXJ0eShmYWxzZSk7IHNldFZpZXdNb2RlKHJhbmRvbUhpc3RvcnkubGVuZ3RoID4gMCA/ICdyYW5kb20nIDogJ2RldGFpbCcpOyBzaG93VG9hc3QoXCLoqIDokYnjgpLmm7TmlrDjgZfjgb7jgZfjgZ9cIik7IH07XG4gICAgY29uc3QgaGFuZGxlQ29uZmlybUFjdGlvbiA9IGFzeW5jICgpID0+IHsgaWYgKGRpYWxvZ1N0YXRlLnR5cGUgPT09ICdxdW90ZScpIGF3YWl0IGNvbmZpcm1EZWxldGVRdW90ZSgpOyBlbHNlIGlmIChkaWFsb2dTdGF0ZS50eXBlID09PSAnYWNjb3VudCcpIGF3YWl0IGNvbmZpcm1SZXNldEFjY291bnQoKTsgZWxzZSBpZiAoZGlhbG9nU3RhdGUudHlwZSA9PT0gJ2Rpc2NhcmQnKSB7IHNldElzSW5wdXREaXJ0eShmYWxzZSk7IHNldERpYWxvZ1N0YXRlKHsgaXNWaXNpYmxlOiBmYWxzZSwgdHlwZTogbnVsbCwgaWQ6IG51bGwgfSk7IHNldFZpZXdNb2RlKHJhbmRvbUhpc3RvcnkubGVuZ3RoID4gMCAmJiB2aWV3TW9kZSA9PT0gJ2VkaXQnID8gJ3JhbmRvbScgOiBzZWxlY3RlZFF1b3RlSWQgJiYgdmlld01vZGUgPT09ICdlZGl0JyA/ICdkZXRhaWwnIDogJ2xpc3QnKTsgfSB9O1xuICAgIGNvbnN0IGNvbmZpcm1EZWxldGVRdW90ZSA9IGFzeW5jICgpID0+IHsgaWYgKCFhY3RpdmVVc2VySWQgfHwgIWRpYWxvZ1N0YXRlLmlkKSByZXR1cm47IGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3VzZXJzJywgYWN0aXZlVXNlcklkLCAncXVvdGVzJywgZGlhbG9nU3RhdGUuaWQpKTsgc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IGZhbHNlLCB0eXBlOiBudWxsLCBpZDogbnVsbCB9KTsgc2V0Vmlld01vZGUoJ2xpc3QnKTsgc2V0U2VsZWN0ZWRRdW90ZUlkKG51bGwpOyBzaG93VG9hc3QoXCLliYrpmaTjgZfjgb7jgZfjgZ9cIik7IH07XG4gICAgY29uc3QgY29uZmlybVJlc2V0QWNjb3VudCA9IGFzeW5jICgpID0+IHsgaWYgKCF1c2VyIHx8ICFzaG9ydENvZGUpIHJldHVybjsgdHJ5IHsgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAndXNlcnMnLCB1c2VyLnVpZCwgJ3F1b3RlcycpKTsgYXdhaXQgUHJvbWlzZS5hbGwoc25hcC5kb2NzLm1hcChkID0+IGRlbGV0ZURvYyhkLnJlZikpKTsgYXdhaXQgZGVsZXRlRG9jKGRvYyhkYiwgJ2FydGlmYWN0cycsIGFwcElkLCAncHVibGljJywgJ2RhdGEnLCAnc3luY0NvZGVzJywgc2hvcnRDb2RlKSk7IGF3YWl0IGRlbGV0ZURvYyhkb2MoZGIsICdhcnRpZmFjdHMnLCBhcHBJZCwgJ3B1YmxpYycsICdkYXRhJywgJ3VzZXJDb2RlcycsIHVzZXIudWlkKSk7IHNob3dUb2FzdChcIuWIneacn+WMluOBl+OBvuOBl+OBn+OAguODquODreODvOODieOBl+OBvuOBmS4uLlwiKTsgc2V0VGltZW91dCgoKSA9PiB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCksIDE1MDApOyB9IGNhdGNoIChlKSB7IHNob3dUb2FzdChcIuWIneacn+WMluWkseaVl1wiKTsgc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IGZhbHNlLCB0eXBlOiBudWxsLCBpZDogbnVsbCB9KTsgfSB9O1xuXG4gICAgY29uc3QgaGFuZGxlVGl0bGVDbGljayA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5kZXRhaWwgPT09IDMpIHtcbiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTF0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSkpOyBhLmRvd25sb2FkID0gJ2luZGV4Lmh0bWwnOyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOyBhLmNsaWNrKCk7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7IHNob3dUb2FzdChcIkhUTUzjg5XjgqHjgqTjg6vjgpLjg4Djgqbjg7Pjg63jg7zjg4njgZfjgb7jgZfjgZ9cIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGN1cnJlbnRRdW90ZSA9IHF1b3Rlcy5maW5kKHEgPT4gcS5pZCA9PT0gc2VsZWN0ZWRRdW90ZUlkKTtcbiAgICBsZXQgbGVmdEFjdGlvbnMgPSBudWxsLCByaWdodEFjdGlvbnMgPSBudWxsO1xuICAgIHN3aXRjaCAodmlld01vZGUpIHtcbiAgICAgIGNhc2UgJ2xpc3QnOiBsZWZ0QWN0aW9ucyA9IDxidXR0b24gb25DbGljaz17dG9nZ2xlVGhlbWV9IGNsYXNzTmFtZT1cInAtMiB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzXCI+e2lzRGFya01vZGUgPyA8U3VuIHNpemU9ezI0fSAvPiA6IDxNb29uIHNpemU9ezI0fSAvPn08L2J1dHRvbj47IHJpZ2h0QWN0aW9ucyA9IDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ3NldHRpbmdzJyl9IGNsYXNzTmFtZT1cInAtMiAtbXItMiB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzXCI+PE1lbnUgc2l6ZT17MjR9IC8+PC9idXR0b24+OyBicmVhaztcbiAgICAgIGNhc2UgJ2lucHV0JzogY2FzZSAnc2V0dGluZ3MnOiBjYXNlICdlZGl0JzogcmlnaHRBY3Rpb25zID0gPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBpc0lucHV0RGlydHkgPyBzZXREaWFsb2dTdGF0ZSh7IGlzVmlzaWJsZTogdHJ1ZSwgdHlwZTogJ2Rpc2NhcmQnLCBpZDogbnVsbCB9KSA6IHNldFZpZXdNb2RlKCdsaXN0Jyl9IGNsYXNzTmFtZT1cInAtMiAtbXItMiB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzXCI+PFggc2l6ZT17MjR9IC8+PC9idXR0b24+OyBicmVhaztcbiAgICAgIGNhc2UgJ2RldGFpbCc6IGNhc2UgJ3JhbmRvbSc6IGxlZnRBY3Rpb25zID0gPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB7IHNldFZpZXdNb2RlKCdsaXN0Jyk7IHNldFJhbmRvbUhpc3RvcnkoW10pOyBzZXRTZWxlY3RlZFF1b3RlSWQobnVsbCk7IH19IGNsYXNzTmFtZT1cInAtMiAtbWwtMiB0ZXh0LXN0b25lLTQwMCBob3Zlcjp0ZXh0LXN0b25lLTgwMCBkYXJrOmhvdmVyOnRleHQtc3RvbmUtMjAwIHRyYW5zaXRpb24tY29sb3JzXCI+PEFycm93TGVmdCBzaXplPXsyNH0gLz48L2J1dHRvbj47IHJpZ2h0QWN0aW9ucyA9IDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0SXNNZW51VmlzaWJsZSh0cnVlKX0gY2xhc3NOYW1lPVwicC0yIC1tci0yIHRleHQtc3RvbmUtNDAwIGhvdmVyOnRleHQtc3RvbmUtODAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIj48TW9yZUhvcml6b250YWwgc2l6ZT17MjR9IC8+PC9idXR0b24+OyBicmVhaztcbiAgICAgIGNhc2UgJ3NlYXNvbi1kZXRhaWwnOiBsZWZ0QWN0aW9ucyA9IDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ2xpc3QnKX0gY2xhc3NOYW1lPVwicC0yIC1tbC0yIHRleHQtc3RvbmUtNDAwIGhvdmVyOnRleHQtc3RvbmUtODAwIGRhcms6aG92ZXI6dGV4dC1zdG9uZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIj48QXJyb3dMZWZ0IHNpemU9ezI0fSAvPjwvYnV0dG9uPjsgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyIHx8IGlzSW5pdGlhbExvYWRpbmcpIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImgtc2NyZWVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGZvbnQtc2VyaWYgdGV4dC1zdG9uZS00MDAgZGFyazp0ZXh0LXN0b25lLTUwMCBpdGFsaWMgYmctc3RvbmUtNTAgZGFyazpiZy1zdG9uZS05MDBcIj7oqq3jgb/ovrzjgb/kuK0uLi48L2Rpdj47XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLVsxMDBkdmhdIGJnLXN0b25lLTUwIGRhcms6Ymctc3RvbmUtOTAwIHRleHQtc3RvbmUtODAwIGRhcms6dGV4dC1zdG9uZS0yMDAgZm9udC1zYW5zIHNlbGVjdGlvbjpiZy1zdG9uZS0yMDAgZGFyazpzZWxlY3Rpb246Ymctc3RvbmUtNzAwIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTMwMFwiPlxuICAgICAgICA8SGVhZGVyIG9uVGl0bGVDbGljaz17aGFuZGxlVGl0bGVDbGlja30gbGVmdEFjdGlvbnM9e2xlZnRBY3Rpb25zfSByaWdodEFjdGlvbnM9e3JpZ2h0QWN0aW9uc30gLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3cgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIHB0LTE2XCI+XG4gICAgICAgICAgPG1haW4gY2xhc3NOYW1lPVwiaC1mdWxsIHJlbGF0aXZlIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAge3ZpZXdNb2RlID09PSAnaW5wdXQnICYmIDxJbnB1dFZpZXcgb25TYXZlPXthZGRRdW90ZX0gb25EaXJ0eUNoYW5nZT17c2V0SXNJbnB1dERpcnR5fSAvPn1cbiAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ2xpc3QnICYmIDxMaXN0VmlldyBxdW90ZXM9e3F1b3Rlc30gb25JdGVtQ2xpY2s9eyhpZCkgPT4geyBzZXRTZWxlY3RlZFF1b3RlSWQoaWQpOyBzZXRWaWV3TW9kZSgnZGV0YWlsJyk7IH19IG9uU3RhcnRSYW5kb209eygpID0+IHsgaWYgKHF1b3Rlcy5sZW5ndGggPiAwKSB7IGNvbnN0IGYgPSBxdW90ZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcXVvdGVzLmxlbmd0aCldOyBzZXRTZWxlY3RlZFF1b3RlSWQoZi5pZCk7IHNldFJhbmRvbUhpc3RvcnkoW2YuaWRdKTsgc2V0Vmlld01vZGUoJ3JhbmRvbScpOyB9IH19IGZpbHRlckNhdGVnb3J5PXtmaWx0ZXJDYXRlZ29yeX0gb25PcGVuRmlsdGVyPXsoKSA9PiBzZXRJc0ZpbHRlclZpc2libGUodHJ1ZSl9IG9uT3BlblNlYXNvbj17KCkgPT4gc2V0Vmlld01vZGUoJ3NlYXNvbi1kZXRhaWwnKX0gLz59XG4gICAgICAgICAgICB7dmlld01vZGUgPT09ICdkZXRhaWwnICYmIGN1cnJlbnRRdW90ZSAmJiA8U2luZ2xlUXVvdGVWaWV3IHF1b3RlPXtjdXJyZW50UXVvdGV9IG9uTmV4dD17KCkgPT4gc2V0U2VsZWN0ZWRRdW90ZUlkKHF1b3Rlc1socXVvdGVzLmZpbmRJbmRleChxID0+IHEuaWQgPT09IHNlbGVjdGVkUXVvdGVJZCkgKyAxKSAlIHF1b3Rlcy5sZW5ndGhdLmlkKX0gb25QcmV2PXsoKSA9PiBzZXRTZWxlY3RlZFF1b3RlSWQocXVvdGVzWyhxdW90ZXMuZmluZEluZGV4KHEgPT4gcS5pZCA9PT0gc2VsZWN0ZWRRdW90ZUlkKSAtIDEgKyBxdW90ZXMubGVuZ3RoKSAlIHF1b3Rlcy5sZW5ndGhdLmlkKX0gaGFzTmV4dD17cXVvdGVzLmxlbmd0aCA+IDF9IGhhc1ByZXY9e3F1b3Rlcy5sZW5ndGggPiAxfSBuZXh0SWNvbj17Q2hldnJvblJpZ2h0fSBvbkNsb3NlPXsoKSA9PiBzZXRWaWV3TW9kZSgnbGlzdCcpfSAvPn1cbiAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ3JhbmRvbScgJiYgY3VycmVudFF1b3RlICYmIDxTaW5nbGVRdW90ZVZpZXcgcXVvdGU9e2N1cnJlbnRRdW90ZX0gb25OZXh0PXsoKSA9PiB7IGxldCBuOyBkbyB7IG4gPSBxdW90ZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcXVvdGVzLmxlbmd0aCldLmlkOyB9IHdoaWxlIChuID09PSBzZWxlY3RlZFF1b3RlSWQgJiYgcXVvdGVzLmxlbmd0aCA+IDEpOyBzZXRTZWxlY3RlZFF1b3RlSWQobik7IH19IG5leHRJY29uPXtTcGFya2xlc30gb25DbG9zZT17KCkgPT4gc2V0Vmlld01vZGUoJ2xpc3QnKX0gaXNSYW5kb21Nb2RlPXt0cnVlfSAvPn1cbiAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ2VkaXQnICYmIGN1cnJlbnRRdW90ZSAmJiA8SW5wdXRWaWV3IGluaXRpYWxEYXRhPXtjdXJyZW50UXVvdGV9IG9uU2F2ZT17dXBkYXRlUXVvdGV9IG9uRGlydHlDaGFuZ2U9e3NldElzSW5wdXREaXJ0eX0gLz59XG4gICAgICAgICAgICB7dmlld01vZGUgPT09ICdzZXR0aW5ncycgJiYgPFN5bmNTZXR0aW5nc1ZpZXcgY3VycmVudFNob3J0Q29kZT17c2hvcnRDb2RlfSBpc0xvYWRpbmdDb2RlPXtpc0xvYWRpbmdDb2RlfSBlcnJvck1zZz17Y29kZUVycm9yfSBvblJldHJ5Q29kZT17KCkgPT4gZmV0Y2hVc2VyRGF0YSh1c2VyKX0gb25TeW5jQ29kZT17aGFuZGxlU3luY0J5Q29kZX0gb25SZXF1ZXN0UmVzZXQ9eygpID0+IHNldERpYWxvZ1N0YXRlKHsgaXNWaXNpYmxlOiB0cnVlLCB0eXBlOiAnYWNjb3VudCcsIGlkOiBudWxsIH0pfSBzaG93VG9hc3Q9e3Nob3dUb2FzdH0gLz59XG4gICAgICAgICAgICB7dmlld01vZGUgPT09ICdzZWFzb24tZGV0YWlsJyAmJiA8U2Vhc29uRGV0YWlsVmlldyBvbkNsb3NlPXsoKSA9PiBzZXRWaWV3TW9kZSgnbGlzdCcpfSAvPn1cbiAgICAgICAgICA8L21haW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8RmlsdGVyU2hlZXQgaXNWaXNpYmxlPXtpc0ZpbHRlclZpc2libGV9IGN1cnJlbnRDYXRlZ29yeT17ZmlsdGVyQ2F0ZWdvcnl9IG9uU2VsZWN0PXsoY2F0KSA9PiB7IHNldEZpbHRlckNhdGVnb3J5KGNhdCk7IHNldElzRmlsdGVyVmlzaWJsZShmYWxzZSk7IH19IG9uQ2xvc2U9eygpID0+IHNldElzRmlsdGVyVmlzaWJsZShmYWxzZSl9IC8+XG4gICAgICAgIDxNZW51U2hlZXQgaXNWaXNpYmxlPXtpc01lbnVWaXNpYmxlfSBvbkVkaXQ9eygpID0+IHNldFZpZXdNb2RlKCdlZGl0Jyl9IG9uRGVsZXRlPXsoKSA9PiBzZXREaWFsb2dTdGF0ZSh7IGlzVmlzaWJsZTogdHJ1ZSwgdHlwZTogJ3F1b3RlJywgaWQ6IHNlbGVjdGVkUXVvdGVJZCB9KX0gb25DbG9zZT17KCkgPT4gc2V0SXNNZW51VmlzaWJsZShmYWxzZSl9IC8+XG4gICAgICAgIHt2aWV3TW9kZSA9PT0gJ2xpc3QnICYmIDxGbG9hdGluZ1dyaXRlQnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdpbnB1dCcpfSAvPn1cbiAgICAgICAgPENvbmZpcm1EaWFsb2cgaXNWaXNpYmxlPXtkaWFsb2dTdGF0ZS5pc1Zpc2libGV9IHRpdGxlPXtkaWFsb2dTdGF0ZS50eXBlID09PSAnYWNjb3VudCcgPyBcIuWFqOODh+ODvOOCv+OCkuWJiumZpOOBl+OBvuOBmeOBi++8n1wiIDogZGlhbG9nU3RhdGUudHlwZSA9PT0gJ2Rpc2NhcmQnID8gXCLnt6jpm4blhoXlrrnjgpLnoLTmo4TjgZfjgb7jgZnjgYvvvJ9cIiA6IFwi6KiA6JGJ44KS5YmK6Zmk44GX44G+44GZ44GL77yfXCJ9IG1lc3NhZ2U9e2RpYWxvZ1N0YXRlLnR5cGUgPT09ICdhY2NvdW50JyA/IFwi44GZ44G544Gm44Gu6KiA6JGJ44CB6Kit5a6a44GM5raI5Y6744GV44KM44G+44GZ44CC44GT44Gu5pON5L2c44Gv5oi744Gb44G+44Gb44KT44CCXCIgOiBkaWFsb2dTdGF0ZS50eXBlID09PSAnZGlzY2FyZCcgPyBcIuS/neWtmOOBleOCjOOBpuOBhOOBquOBhOWkieabtOOBr+WkseOCj+OCjOOBvuOBmeOAglwiIDogXCLkuIDluqbliYrpmaTjgZnjgovjgajlhYPjgavmiLvjgZvjgb7jgZvjgpPjgIJcIn0gYWN0aW9uTGFiZWw9e2RpYWxvZ1N0YXRlLnR5cGUgPT09ICdhY2NvdW50JyA/IFwi5YWo5YmK6Zmk44GX44Gm5Yid5pyf5YyWXCIgOiBkaWFsb2dTdGF0ZS50eXBlID09PSAnZGlzY2FyZCcgPyBcIuegtOajhOOBl+OBpuaIu+OCi1wiIDogXCLliYrpmaTjgZnjgotcIn0gb25Db25maXJtPXtoYW5kbGVDb25maXJtQWN0aW9ufSBvbkNhbmNlbD17KCkgPT4gc2V0RGlhbG9nU3RhdGUoeyBpc1Zpc2libGU6IGZhbHNlLCB0eXBlOiBudWxsLCBpZDogbnVsbCB9KX0gLz5cbiAgICAgICAgPFRvYXN0IG1lc3NhZ2U9e3RvYXN0Lm1lc3NhZ2V9IGlzVmlzaWJsZT17dG9hc3Quc2hvd30gb25IaWRlPXsoKSA9PiBzZXRUb2FzdChwID0+ICh7IC4uLnAsIHNob3c6IGZhbHNlIH0pKX0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG4gIGNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSkucmVuZGVyKDxBcHAgLz4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0UsT0FBT0EsS0FBSyxJQUFJQyxRQUFRLEVBQUVDLFNBQVMsRUFBRUMsTUFBTSxFQUFFQyxPQUFPLFFBQVEsT0FBTztBQUNuRSxTQUFTQyxVQUFVLFFBQVEsa0JBQWtCO0FBQzdDLE9BQU8sS0FBS0MsV0FBVyxNQUFNLGNBQWM7QUFDM0MsU0FBU0MsYUFBYSxRQUFRLGNBQWM7QUFDNUMsU0FBU0MsT0FBTyxFQUFFQyxpQkFBaUIsRUFBRUMsa0JBQWtCLEVBQUVDLGNBQWMsRUFBRUMsdUJBQXVCLFFBQVEsZUFBZTtBQUN2SCxTQUFTQyxZQUFZLEVBQUVDLFVBQVUsRUFBRUMsR0FBRyxFQUFFQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFFQyxVQUFVLEVBQUVDLEtBQUssUUFBUSxvQkFBb0I7QUFFNUksSUFBTTtFQUFFQyxPQUFPO0VBQUVDLFFBQVE7RUFBRUMsS0FBSztFQUFFQyxZQUFZO0VBQUVDLFdBQVc7RUFBRUMsU0FBUztFQUFFQyxLQUFL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S0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQVksQ0FBQyxFQUN0RTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsWUFBWTtFQUFFQyxLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBZSxDQUFDLEVBQzVFO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxZQUFZO0VBQUVDLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRTtBQUFZLENBQUMsRUFDekU7RUFBRUosSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLFlBQVk7RUFBRUMsS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQWUsQ0FBQyxFQUM3RTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsU0FBUztFQUFFQyxLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBVSxDQUFDLEVBQ3BFO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxXQUFXO0VBQUVDLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLElBQUksRUFBRTtBQUFVLENBQUMsRUFDckU7RUFBRUosSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFFBQVE7RUFBRUMsS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQWEsQ0FBQyxFQUN0RTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsVUFBVTtFQUFFQyxLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBVSxDQUFDLEVBQ3JFO0VBQUVKLElBQUksRUFBRSxNQUFNO0VBQUVDLElBQUksRUFBRSxhQUFhO0VBQUVDLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRTtBQUFlLENBQUMsRUFDOUU7RUFBRUosSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFNBQVM7RUFBRUMsS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQVcsQ0FBQyxFQUNyRTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsVUFBVTtFQUFFQyxLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBWSxDQUFDLEVBQ3ZFO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxVQUFVO0VBQUVDLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLElBQUksRUFBRTtBQUFZLENBQUMsRUFDdEU7RUFBRUosSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLGVBQWU7RUFBRUMsS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQVUsQ0FBQyxFQUMzRTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsU0FBUztFQUFFQyxLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBYSxDQUFDLEVBQ3ZFO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxXQUFXO0VBQUVDLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRTtBQUFVLENBQUMsRUFDdEU7RUFBRUosSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFNBQVM7RUFBRUMsS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQVcsQ0FB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SztFQUFFQyxJQUFJLEVBQUUsV0FBVztFQUFFQyxLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBWSxDQUFDLEVBQ3pFO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxVQUFVO0VBQUVDLEtBQUssRUFBRSxFQUFFO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLElBQUksRUFBRTtBQUFXLENBQUMsRUFDdEU7RUFBRUosSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLFlBQVk7RUFBRUMsS0FBSyxFQUFFLEVBQUU7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsSUFBSSxFQUFFO0FBQVksQ0FBQyxFQUMxRTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsVUFBVTtFQUFFQyxLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBVyxDQUFDLEVBQ3ZFO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxTQUFTO0VBQUVDLEtBQUssRUFBRSxFQUFFO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRTtBQUFZLENBQUMsRUFDdkU7RUFBRUosSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLFdBQVc7RUFBRUMsS0FBSyxFQUFFLEVBQUU7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQVksQ0FBQyxFQUMxRTtFQUFFSixJQUFJLEVBQUUsTUFBTTtFQUFFQyxJQUFJLEVBQUUsYUFBYTtFQUFFQyxLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBZSxDQUFDLEVBQy9FO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxhQUFhO0VBQUVDLEtBQUssRUFBRSxFQUFFO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLElBQUksRUFBRTtBQUFhLENBQUMsRUFDM0U7RUFBRUosSUFBSSxFQUFFLE1BQU07RUFBRUMsSUFBSSxFQUFFLFlBQVk7RUFBRUMsS0FBSyxFQUFFLEVBQUU7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsSUFBSSxFQUFFO0FBQWUsQ0FBQyxFQUM3RTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsVUFBVTtFQUFFQyxLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBYyxDQUFDLEVBQzFFO0VBQUVKLElBQUksRUFBRSxLQUFLO0VBQUVDLElBQUksRUFBRSxXQUFXO0VBQUVDLEtBQUssRUFBRSxFQUFFO0VBQUVDLEdBQUcsRUFBRSxFQUFFO0VBQUVDLElBQUksRUFBRTtBQUFhLENBQUMsRUFDMUU7RUFBRUosSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFlBQVk7RUFBRUMsS0FBSyxFQUFFLEVBQUU7RUFBRUMsR0FBRyxFQUFFLEVBQUU7RUFBRUMsSUFBSSxFQUFFO0FBQVcsQ0FBQyxFQUN6RTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsWUFBWTtFQUFFQyxLQUFLLEVBQUUsRUFBRTtFQUFFQyxHQUFHLEVBQUUsRUFBRTtFQUFFQyxJQUFJLEVBQUU7QUFBVyxDQUFDLEVBQ3pFO0VBQUVKLElBQUksRUFBRSxNQUFNO0VBQUVDLElBQUksRUFBRSxhQUFhO0VBQUVDLEtBQUssRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLElBQUksRUFBRTtBQUFZLENBQUMsRUFDMUU7RUFBRUosSUFBSSxFQUFFLEtBQUs7RUFBRUMsSUFBSSxFQUFFLFdBQVc7RUFBRUMsS0FBSyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsSUFBSSxFQUFFO0FBQVUsQ0FBQyxFQUNyRTtFQUFFSixJQUFJLEVBQUUsS0FBSztFQUFFQyxJQUFJLEVBQUUsYUFBYTtFQUFFQyxLQUFLLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUUs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</script></head>
<body class="bg-stone-50 dark:bg-stone-900 transition-colors duration-300">
<div id="root"><div class="h-[100dvh] bg-stone-50 dark:bg-stone-900 text-stone-800 dark:text-stone-200 font-sans selection:bg-stone-200 dark:selection:bg-stone-700 overflow-hidden flex flex-col transition-colors duration-300"><header class="fixed top-0 left-0 right-0 z-50 h-16 bg-stone-50/90 dark:bg-stone-900/90 backdrop-blur-md border-b border-stone-200 dark:border-stone-800 px-6 flex items-center justify-between shadow-sm transition-colors duration-300"><div class="w-20 flex justify-start items-center"><button class="p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></button></div><h1 class="text-xl font-serif font-bold tracking-tight text-stone-800 dark:text-stone-200 cursor-default select-none active:opacity-70 transition-opacity" title="トリプルクリックでダウンロード">Kotobako</h1><div class="w-20 flex justify-end items-center gap-1"><button class="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></header><div class="flex-grow overflow-hidden relative pt-16"><main class="h-full relative overflow-hidden"><div class="h-full overflow-y-auto max-w-md mx-auto px-6 pt-4 pb-32 no-scrollbar"><div class="flex justify-between items-end mb-4 px-1 gap-2"><button class="flex items-center gap-1.5 text-sm font-bold text-stone-500 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200 transition-colors tracking-wide py-1 group"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-stone-400 dark:text-stone-500 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors"><path d="M12 2v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="M20 12h2"></path><path d="m19.07 4.93-1.41 1.41"></path><path d="M15.947 12.65a4 4 0 0 0-5.925-4.128"></path><path d="M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"></path></svg><span class="border-b border-transparent group-hover:border-stone-300 dark:group-hover:border-stone-600 transition-all">大寒 <span class="mx-1 text-stone-300 dark:text-stone-600">/</span> 鶏始乳</span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-stone-300 dark:text-stone-600 group-hover:text-stone-500 dark:group-hover:text-stone-400 transition-colors"><path d="m9 18 6-6-6-6"></path></svg></button><button class="flex items-center gap-1.5 text-[10px] font-bold text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-300 transition-colors tracking-wide bg-stone-100/80 dark:bg-stone-800/80 px-3 py-1.5 rounded-full border border-stone-200/50 dark:border-stone-700/50"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-filter"><path d="M3 6h18"></path><path d="M7 12h10"></path><path d="M10 18h4"></path></svg><span>すべての言葉</span></button></div><div class="flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 p-6 text-center italic font-serif"><p>まだ言葉がありません。</p><p class="mt-2">下の「記す」から始めましょう。</p></div></div></main></div><div class="fixed bottom-6 left-0 right-0 flex justify-center z-40 px-6 pointer-events-none"><button class="bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 border border-stone-700 dark:border-stone-600 pointer-events-auto active:scale-95 transition-all duration-300 hover:bg-stone-800 dark:hover:bg-stone-600 animate-float-up"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pen-line"><path d="M12 20h9"></path><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"></path></svg><span class="text-sm font-bold tracking-widest">記す</span></button></div></div></div>
<script type="text/babel" data-type="module">
  import React, { useState, useEffect, useRef, useMemo } from 'react';
  import { createRoot } from 'react-dom/client';
  import * as LucideIcons from 'lucide-react';
  import { initializeApp } from 'firebase/app';
  import { getAuth, signInAnonymously, onAuthStateChanged, setPersistence, browserLocalPersistence } from 'firebase/auth';
  import { getFirestore, collection, doc, setDoc, getDoc, getDocs, addDoc, updateDoc, deleteDoc, onSnapshot, query } from 'firebase/firestore';

  const { PenLine, Sparkles, Check, ChevronRight, ChevronLeft, ArrowLeft, Edit2, Trash2, Menu, Copy, RefreshCw, X, AlertCircle, Moon, Sun, ListFilter, CloudSun, MoreHorizontal } = LucideIcons;

  const firebaseConfig = {"apiKey":"AIzaSyBLw99hdYwzQKaWFacV3HdIAsa_adAna9k","authDomain":"kotobako-ec686.firebaseapp.com","projectId":"kotobako-ec686","storageBucket":"kotobako-ec686.firebasestorage.app","messagingSenderId":"836620257824","appId":"1:836620257824:web:5a76bf0e646e37f1fb4a45","measurementId":"G-9XDCCZ1BDM"};
  
  // --- Firebase Init (Global Scope) ---
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const appId = 'koto-no-ha-app';

  // --- Auth Logic: ID永続化の徹底検証済みロジック ---
  const initAuthPromise = new Promise((resolve) => {
    // 1. まず永続化設定を適用
    setPersistence(auth, browserLocalPersistence)
      .then(() => {
        // 2. 認証状態の監視を開始
        const unsubscribe = onAuthStateChanged(auth, (user) => {
            if (user) {
                // A. 既存ユーザーがいる（または新規作成が完了した）場合
                // ここで確実にIDが確定する
                console.log("Auth State: User detected", user.uid);
                resolve(user);
                unsubscribe(); // 確定したのでリスナー解除
            } else {
                // B. ユーザーがいない（null）場合
                // ここに来るのは「本当に初回」か「データが消えた」時のみ
                console.log("Auth State: No user, creating new...");
                signInAnonymously(auth).catch((e) => {
                    console.error("SignIn Error:", e);
                    // エラー時もresolveしないとアプリが止まる可能性があるが、
                    // ここではリトライを促すUIがないためログのみ
                });
                // 【重要】ここで unsubscribe() しない！
                // signInAnonymously が成功すると、再度 onAuthStateChanged が発火し、
                // 上記 A のブロックに入って resolve されるのを待つ。
            }
        });
      })
      .catch((e) => {
        console.error("Persistence Init Error:", e);
        // 万が一設定に失敗してもログインを試みる
        signInAnonymously(auth).then(cred => resolve(cred.user));
      });
  });

  const CATEGORIES = ["心に残った", "新たな気づき", "おもしろい", "役立ちそう"];

  // --- Utility Functions ---
  const generateShortCode = () => {
      const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
      let result = '';
      for (let i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
      result += '-';
      for (let i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
      return result;
  };

  // --- Constants for Seasons ---
  const SOLAR_TERMS = [
    { name: '立春', yomi: 'りっしゅん', month: 2, day: 4, desc: '寒さも峠を越え、春の気配を感じ始める頃' },
    { name: '雨水', yomi: 'うすい', month: 2, day: 19, desc: '雪が雨に変わり、氷が解け始める頃' },
    { name: '啓蟄', yomi: 'けいちつ', month: 3, day: 6, desc: '冬ごもりしていた虫たちが土から出てくる頃' },
    { name: '春分', yomi: 'しゅんぶん', month: 3, day: 21, desc: '昼と夜の長さがほぼ同じになる日' },
    { name: '清明', yomi: 'せいめい', month: 4, day: 5, desc: '万物が清らかで生き生きとしてくる頃' },
    { name: '穀雨', yomi: 'こくう', month: 4, day: 20, desc: '穀物を潤す春雨が降る頃' },
    { name: '立夏', yomi: 'りっか', month: 5, day: 6, desc: '夏の気配が感じられ始める頃' },
    { name: '小満', yomi: 'しょうまん', month: 5, day: 21, desc: '陽気が良くなり、草木が成長して茂る頃' },
    { name: '芒種', yomi: 'ぼうしゅ', month: 6, day: 6, desc: '稲や麦など、穂の出る穀物の種をまく頃' },
    { name: '夏至', yomi: 'げし', month: 6, day: 21, desc: '一年で最も昼が長い日' },
    { name: '小暑', yomi: 'しょうしょ', month: 7, day: 7, desc: '梅雨明けが近づき、暑さが本格的になる頃' },
    { name: '大暑', yomi: 'たいしょ', month: 7, day: 23, desc: '一年で最も暑さが厳しい頃' },
    { name: '立秋', yomi: 'りっしゅう', month: 8, day: 8, desc: '秋の気配が立ち始める頃' },
    { name: '処暑', yomi: 'しょしょ', month: 8, day: 23, desc: '暑さが峠を越え、朝夕に涼気を感じる頃' },
    { name: '白露', yomi: 'はくろ', month: 9, day: 8, desc: '草花に朝露が宿り始める頃' },
    { name: '秋分', yomi: 'しゅうぶん', month: 9, day: 23, desc: '昼と夜の長さが再びほぼ同じになる日' },
    { name: '寒露', yomi: 'かんろ', month: 10, day: 8, desc: '冷たい露が降り、秋も深まる頃' },
    { name: '霜降', yomi: 'そうこう', month: 10, day: 23, desc: '霜が降り始め、冬の近づきを感じる頃' },
    { name: '立冬', yomi: 'りっとう', month: 11, day: 7, desc: '冬の気配が立ち始める頃' },
    { name: '小雪', yomi: 'しょうせつ', month: 11, day: 22, desc: 'わずかながら雪が降り始める頃' },
    { name: '大雪', yomi: 'たいせつ', month: 12, day: 7, desc: '雪が激しく降り始める頃' },
    { name: '冬至', yomi: 'とうじ', month: 12, day: 22, desc: '一年で最も昼が短い日' },
    { name: '小寒', yomi: 'しょうかん', month: 1, day: 6, desc: '寒さが厳しくなり始める頃（寒の入り）' },
    { name: '大寒', yomi: 'だいかん', month: 1, day: 20, desc: '一年で最も寒さが厳しい頃' },
  ];

  const MICRO_SEASONS = [
    { name: '東風解凍', yomi: 'はるかぜこおりをとく', month: 2, day: 4, desc: '春の風が氷を解かす' },
    { name: '黄鶯睍睆', yomi: 'うぐいすなく', month: 2, day: 9, desc: '鶯が鳴き始める' },
    { name: '魚上氷', yomi: 'うおこおりをいずる', month: 2, day: 14, desc: '割れた氷の間から魚が飛び出る' },
    { name: '土脉潤起', yomi: 'つちのしょううるおいおこる', month: 2, day: 19, desc: '雨が降り、土が湿り気を含む' },
    { name: '霞始靆', yomi: 'かすみはじめてたなびく', month: 2, day: 24, desc: '春霞がたなびき始める' },
    { name: '草木萌動', yomi: 'そうもくめばえいずる', month: 3, day: 1, desc: '草木が芽吹き始める' },
    { name: '蟄虫啓戸', yomi: 'すごもりのむしとをひらく', month: 3, day: 6, desc: '冬籠りの虫が出て来る' },
    { name: '桃始笑', yomi: 'ももはじめてさく', month: 3, day: 11, desc: '桃の花が咲き始める' },
    { name: '菜虫化蝶', yomi: 'なむしちょうとなる', month: 3, day: 16, desc: '青虫が羽化して紋白蝶になる' },
    { name: '雀始巣', yomi: 'すずめはじめてすくう', month: 3, day: 21, desc: '雀が巣を作り始める' },
    { name: '桜始開', yomi: 'さくらはじめてひらく', month: 3, day: 26, desc: '桜の花が咲き始める' },
    { name: '雷乃発声', yomi: 'かみなりすなわちこえをはっす', month: 3, day: 31, desc: '遠くで雷の音がし始める' },
    { name: '玄鳥至', yomi: 'つばめきたる', month: 4, day: 5, desc: '燕が南からやって来る' },
    { name: '鴻雁北', yomi: 'こうがんかえる', month: 4, day: 10, desc: '雁が北へ帰っていく' },
    { name: '虹始見', yomi: 'にじはじめてあらわる', month: 4, day: 15, desc: '雨上がりに虹が見え始める' },
    { name: '葭始生', yomi: 'あしはじめてしょうず', month: 4, day: 20, desc: '葦が芽を吹き始める' },
    { name: '霜止出苗', yomi: 'しもやみてなえいずる', month: 4, day: 25, desc: '霜が降りなくなり苗が育つ' },
    { name: '牡丹華', yomi: 'ぼたんはなさく', month: 4, day: 30, desc: '牡丹の花が咲く' },
    { name: '蛙始鳴', yomi: 'かわずはじめてなく', month: 5, day: 6, desc: '蛙が鳴き始める' },
    { name: '蚯蚓出', yomi: 'みみずいずる', month: 5, day: 11, desc: '蚯蚓が地上に出てくる' },
    { name: '竹笋生', yomi: 'たけのこしょうず', month: 5, day: 16, desc: '筍が生えてくる' },
    { name: '蚕起食桑', yomi: 'かいこおきてくわをはむ', month: 5, day: 21, desc: '蚕が桑を盛んに食べ始める' },
    { name: '紅花栄', yomi: 'べにばなさかう', month: 5, day: 26, desc: '紅花が盛んに咲く' },
    { name: '麦秋至', yomi: 'むぎのときいたる', month: 5, day: 31, desc: '麦が熟し麦秋となる' },
    { name: '蟷螂生', yomi: 'かまきりしょうず', month: 6, day: 6, desc: 'カマキリが生まれる' },
    { name: '腐草為蛍', yomi: 'くされたるくさほたるとなる', month: 6, day: 11, desc: '蛍が飛び始める' },
    { name: '梅子黄', yomi: 'うめのみきばむ', month: 6, day: 16, desc: '梅の実が黄ばんで熟す' },
    { name: '乃東枯', yomi: 'なつかれくさかるる', month: 6, day: 21, desc: '夏枯草が枯れる' },
    { name: '菖蒲華', yomi: 'あやめはなさく', month: 6, day: 26, desc: 'あやめの花が咲く' },
    { name: '半夏生', yomi: 'はんげしょうず', month: 7, day: 2, desc: '半夏（カラスビシャク）が生える' },
    { name: '温風至', yomi: 'あつかぜいたる', month: 7, day: 7, desc: '暖かい風が吹いて来る' },
    { name: '蓮始開', yomi: 'はすはじめてひらく', month: 7, day: 12, desc: '蓮の花が開き始める' },
    { name: '鷹乃学習', yomi: 'たかすなわちわざをならう', month: 7, day: 17, desc: '鷹の幼鳥が飛ぶことを覚える' },
    { name: '桐始結花', yomi: 'きりはじめてはなをむすぶ', month: 7, day: 23, desc: '桐の実がなり始める' },
    { name: '土潤溽暑', yomi: 'つちうるおうてむしあつし', month: 7, day: 28, desc: '土が湿って蒸し暑くなる' },
    { name: '大雨時行', yomi: 'たいうときどきふる', month: 8, day: 2, desc: '時として大雨が降る' },
    { name: '涼風至', yomi: 'すずかぜいたる', month: 8, day: 8, desc: '涼しい風が立ち始める' },
    { name: '寒蝉鳴', yomi: 'ひぐらしなく', month: 8, day: 13, desc: 'ヒグラシが鳴き始める' },
    { name: '蒙霧升降', yomi: 'ふかききりまとう', month: 8, day: 18, desc: '深い霧が立ち込める' },
    { name: '綿柎開', yomi: 'わたのはなしべひらく', month: 8, day: 23, desc: '綿を包むガクが開く' },
    { name: '天地始粛', yomi: 'てんちはじめてさむし', month: 8, day: 28, desc: 'ようやく暑さが鎮まる' },
    { name: '禾乃登', yomi: 'こくものすなわちみのる', month: 9, day: 2, desc: '稲が実る' },
    { name: '草露白', yomi: 'くさのつゆしろし', month: 9, day: 8, desc: '草に降りた露が白く光る' },
    { name: '鶺鴒鳴', yomi: 'せきれいなく', month: 9, day: 13, desc: '鶺鴒（せきれい）が鳴き始める' },
    { name: '玄鳥去', yomi: 'つばめさる', month: 9, day: 18, desc: '燕が南へ帰って行く' },
    { name: '雷乃収声', yomi: 'かみなりすなわちこえをおさむ', month: 9, day: 23, desc: '雷が鳴らなくなる' },
    { name: '蟄虫坏戸', yomi: 'むしかくれてとをふさぐ', month: 9, day: 28, desc: '虫が土中に掘ってこもる' },
    { name: '水始涸', yomi: 'みずはじめてかる', month: 10, day: 3, desc: '田畑の水を抜いて干す' },
    { name: '鴻雁来', yomi: 'こうがんきたる', month: 10, day: 8, desc: '雁が北から渡って来る' },
    { name: '菊花開', yomi: 'きくのはなひらく', month: 10, day: 13, desc: '菊の花が咲く' },
    { name: '蟋蟀在戸', yomi: 'きりぎりすとにあり', month: 10, day: 18, desc: 'キリギリスが戸口で鳴く' },
    { name: '霜始降', yomi: 'しもはじめてふる', month: 10, day: 23, desc: '霜が降り始める' },
    { name: '霎時施', yomi: 'こさめときどきふる', month: 10, day: 28, desc: '小雨がしとしと降る' },
    { name: '楓蔦黄', yomi: 'もみじつたきばむ', month: 11, day: 2, desc: '紅葉や蔦が色づく' },
    { name: '山茶始開', yomi: 'つばきはじめてひらく', month: 11, day: 7, desc: '山茶花が咲き始める' },
    { name: '地始凍', yomi: 'ちはじめてこおる', month: 11, day: 12, desc: '大地が凍り始める' },
    { name: '金盞香', yomi: 'きんせんかさく', month: 11, day: 17, desc: '水仙の花が咲き香る' },
    { name: '虹蔵不見', yomi: 'にじかくれてみえず', month: 11, day: 22, desc: '虹を見かけなくなる' },
    { name: '朔風払葉', yomi: 'きたかぜこのはをはらう', month: 11, day: 27, desc: '北風が木の葉を払い落とす' },
    { name: '橘始黄', yomi: 'たちばなはじめてきばむ', month: 12, day: 2, desc: '橘の実が黄色く色づく' },
    { name: '閉塞成冬', yomi: 'そらさむくふゆとなる', month: 12, day: 7, desc: '天地の気が塞がり冬となる' },
    { name: '熊蟄穴', yomi: 'くまあなにこもる', month: 12, day: 12, desc: '熊が穴に入って冬眠する' },
    { name: '鱖魚群', yomi: 'さけのうおむらがる', month: 12, day: 17, desc: '鮭が群がって川を上る' },
    { name: '乃東生', yomi: 'なつかれくさしょうず', month: 12, day: 22, desc: '夏枯草が芽を出す' },
    { name: '麋角解', yomi: 'おおしかのつのおつる', month: 12, day: 27, desc: '大鹿の角が落ちる' },
    { name: '雪下出麦', yomi: 'ゆきわたりてむぎのびる', month: 1, day: 1, desc: '雪の下で麦が伸びる' },
    { name: '芹乃栄', yomi: 'せりすなわちさかう', month: 1, day: 6, desc: '芹が盛んに育つ' },
    { name: '水泉動', yomi: 'しみずあたたかをふくむ', month: 1, day: 11, desc: '地中の凍った水が溶け動き始める' },
    { name: '雉始雊', yomi: 'きじはじめてなく', month: 1, day: 16, desc: '雄の雉が鳴き始める' },
    { name: '款冬華', yomi: 'ふきのはなさく', month: 1, day: 20, desc: '蕗の薹（ふきのとう）が顔を出す' },
    { name: '水沢腹堅', yomi: 'さわみずこおりつめる', month: 1, day: 25, desc: '沢の水が厚く凍りつめる' },
    { name: '鶏始乳', yomi: 'にわとりはじめてとやにつく', month: 1, day: 30, desc: '鶏が卵を産み始める' },
  ];

  const getSeasonInfo = (date) => {
    const m = date.getMonth() + 1;
    const d = date.getDate();
    const currentVal = m * 100 + d;

    let solarTerm = SOLAR_TERMS[SOLAR_TERMS.length - 1]; 
    for (let i = 0; i < SOLAR_TERMS.length; i++) {
        const sVal = SOLAR_TERMS[i].month * 100 + SOLAR_TERMS[i].day;
        if (currentVal >= sVal) {
            solarTerm = SOLAR_TERMS[i];
        } else {
            break;
        }
    }
    if (currentVal < SOLAR_TERMS[0].month * 100 + SOLAR_TERMS[0].day) {
        // 年始の調整（大寒など）
    }

    let microSeason = MICRO_SEASONS[MICRO_SEASONS.length - 1];
    for (let i = 0; i < MICRO_SEASONS.length; i++) {
        const sVal = MICRO_SEASONS[i].month * 100 + MICRO_SEASONS[i].day;
        if (currentVal >= sVal) {
            microSeason = MICRO_SEASONS[i];
        } else {
            break;
        }
    }

    return { solarTerm, microSeason };
  };

  const Header = ({ onTitleClick, leftActions, rightActions }) => (
      <header className="fixed top-0 left-0 right-0 z-50 h-16 bg-stone-50/90 dark:bg-stone-900/90 backdrop-blur-md border-b border-stone-200 dark:border-stone-800 px-6 flex items-center justify-between shadow-sm transition-colors duration-300">
          <div className="w-20 flex justify-start items-center">{leftActions}</div>
          <h1 onClick={onTitleClick} className="text-xl font-serif font-bold tracking-tight text-stone-800 dark:text-stone-200 cursor-default select-none active:opacity-70 transition-opacity" title="トリプルクリックでダウンロード">Kotobako</h1>
          <div className="w-20 flex justify-end items-center gap-1">{rightActions}</div>
      </header>
  );

  const SyncSettingsView = ({ currentShortCode, isLoadingCode, errorMsg, onRetryCode, onSyncCode, onRequestReset, showToast }) => {
      const [inputId, setInputId] = useState('');
      const handleCopy = () => { if (!currentShortCode || currentShortCode.length < 8) return; navigator.clipboard.writeText(currentShortCode); showToast("同期コードをコピーしました"); };
      return (
          <div className="flex flex-col h-full max-w-md mx-auto p-6 pt-6 pb-24 animate-fade-in overflow-y-auto no-scrollbar">
            <div className="space-y-8">
              <div className="space-y-3">
                <label className="text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1">あなたの同期コード</label>
                <div className="flex items-center gap-2 bg-white dark:bg-stone-800 p-4 rounded-xl border border-stone-200 dark:border-stone-700 shadow-sm">
                  <code className="flex-grow text-xl font-mono font-bold text-stone-800 dark:text-stone-200 tracking-tighter text-center">{isLoadingCode ? '...' : (errorMsg ? 'エラー' : currentShortCode)}</code>
                  <button onClick={handleCopy} disabled={!currentShortCode || currentShortCode.includes('...')} className="p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 bg-stone-50 dark:bg-stone-700 rounded-lg active:scale-95 transition-all disabled:opacity-30"><Copy size={20} /></button>
                </div>
                {errorMsg && <div className="flex items-center justify-center gap-2 text-red-400 text-xs mt-2"><AlertCircle size={14} /><span>{errorMsg}</span><button onClick={onRetryCode} className="underline">再試行</button></div>}
                <p className="text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1">この8文字を別の端末で入力すると、言葉を同期できます。</p>
              </div>
              <div className="relative">
                <div className="absolute inset-0 flex items-center"><div className="w-full border-t border-stone-100 dark:border-stone-800"></div></div>
                <div className="relative flex justify-center text-[10px] uppercase"><span className="bg-stone-50 dark:bg-stone-900 px-3 text-stone-300 dark:text-stone-600 font-bold tracking-widest">or</span></div>
              </div>
              <div className="space-y-4">
                <label className="text-stone-500 dark:text-stone-400 text-[10px] font-bold tracking-widest uppercase block ml-1">別のコードと同期する</label>
                <input type="text" value={inputId} onChange={(e) => setInputId(e.target.value.toUpperCase())} placeholder="例: ABCD-1234" className="w-full bg-white dark:bg-stone-800 border border-stone-200 dark:border-stone-700 p-4 rounded-xl text-lg text-center focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-stone-800 dark:text-stone-200 font-mono font-bold shadow-sm" />
                <button onClick={() => onSyncCode(inputId)} disabled={!inputId.trim() || inputId.length < 9} className="w-full py-4 bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-200 rounded-xl font-bold text-sm tracking-widest disabled:opacity-30 transition-all active:scale-[0.98] shadow-md hover:bg-stone-800 dark:hover:bg-stone-600">同期を開始する</button>
                <p className="text-[10px] text-stone-400 dark:text-stone-500 leading-relaxed italic px-1 text-center">※入力したコードのデータに切り替わります。</p>
              </div>
              <div className="pt-8 mt-8 border-t border-stone-100 dark:border-stone-800">
                <button onClick={onRequestReset} className="w-full py-4 text-red-400 hover:text-red-600 dark:hover:text-red-300 text-xs font-bold tracking-widest transition-colors flex items-center justify-center gap-2"><Trash2 size={16} /><span>全データを削除して初期化</span></button>
              </div>
            </div>
          </div>
      );
  };
  
  const Toast = ({ message, isVisible, onHide }) => {
      useEffect(() => { if (isVisible) { const timer = setTimeout(onHide, 2000); return () => clearTimeout(timer); } }, [isVisible, onHide]);
      if (!isVisible) return null;
      return <div className="fixed top-20 left-1/2 transform -translate-x-1/2 z-[100] animate-fade-in pointer-events-none"><div className="bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-4 py-2 rounded-full shadow-lg text-sm font-medium flex items-center gap-2 border border-stone-700 dark:border-stone-600"><Check size={14} />{message}</div></div>;
  };

  const FilterSheet = ({ isVisible, currentCategory, onSelect, onClose }) => {
    if (!isVisible) return null;
    return (
      <div className="fixed inset-0 z-[60] flex items-end justify-center sm:items-center p-4 animate-fade-in">
         <div className="absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm" onClick={onClose}></div>
         <div className="relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2 max-h-[80vh] overflow-y-auto no-scrollbar">
           <h3 className="text-xs font-bold text-stone-400 dark:text-stone-500 uppercase tracking-widest mb-4 flex items-center gap-2"><ListFilter size={14} />表示する言葉を選ぶ</h3>
           <button 
             onClick={() => onSelect(null)} 
             className={`w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ${!currentCategory ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800'}`}
           >
             <span>すべての言葉</span>
             {!currentCategory && <Check size={16} />}
           </button>
           {CATEGORIES.map(cat => (
             <button 
               key={cat} 
               onClick={() => onSelect(cat)}
               className={`w-full text-left p-4 rounded-xl transition-all flex justify-between items-center ${currentCategory === cat ? 'bg-stone-100 dark:bg-stone-800 font-bold text-stone-800 dark:text-stone-200' : 'text-stone-600 dark:text-stone-400 hover:bg-stone-50 dark:hover:bg-stone-800'}`}
             >
               <span>{cat}</span>
               {currentCategory === cat && <Check size={16} />}
             </button>
           ))}
           <div className="pt-4 mt-2 border-t border-stone-50 dark:border-stone-800">
              <button onClick={onClose} className="w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest">閉じる</button>
           </div>
         </div>
      </div>
    );
  };

  const MenuSheet = ({ isVisible, onEdit, onDelete, onClose }) => {
    if (!isVisible) return null;
    return (
      <div className="fixed inset-0 z-[70] flex items-end justify-center sm:items-center p-4 animate-fade-in">
         <div className="absolute inset-0 bg-stone-900/20 dark:bg-black/60 backdrop-blur-sm" onClick={onClose}></div>
         <div className="relative w-full max-w-sm bg-white dark:bg-stone-850 rounded-2xl p-6 shadow-xl animate-float-up space-y-2">
           <button 
             onClick={() => { onClose(); onEdit(); }}
             className="w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-stone-600 dark:text-stone-300 hover:bg-stone-50 dark:hover:bg-stone-800"
           >
             <Edit2 size={20} className="text-stone-400 dark:text-stone-500" />
             <span className="font-bold text-sm tracking-wide">言葉を編集する</span>
           </button>
           <button 
             onClick={() => { onClose(); onDelete(); }}
             className="w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 text-red-400 hover:bg-red-50 dark:hover:bg-stone-800"
           >
             <Trash2 size={20} />
             <span className="font-bold text-sm tracking-wide">削除する</span>
           </button>
           <div className="pt-4 mt-2 border-t border-stone-50 dark:border-stone-800">
              <button onClick={onClose} className="w-full py-3 text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 text-xs font-bold tracking-widest">閉じる</button>
           </div>
         </div>
      </div>
    );
  };

  const SeasonDetailView = ({ initialDate, onClose }) => {
    const [currentDate, setCurrentDate] = useState(initialDate || new Date());
    const { solarTerm, microSeason } = useMemo(() => getSeasonInfo(currentDate), [currentDate]);
    const handlePrev = () => { const d = new Date(currentDate); d.setDate(d.getDate() - 5); setCurrentDate(d); };
    const handleNext = () => { const d = new Date(currentDate); d.setDate(d.getDate() + 5); setCurrentDate(d); };
    const btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";

    return (
      <div className="flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300">
        <div className="flex-grow flex flex-col items-center justify-center pt-5 text-center space-y-10">
          <div className="space-y-2">
            <p className="text-xs text-stone-400 dark:text-stone-500 font-bold tracking-widest uppercase">二十四節気</p>
            <h2 className="text-3xl font-serif font-bold text-stone-800 dark:text-stone-100">{solarTerm.name}</h2>
            <p className="text-xs text-stone-400 dark:text-stone-500 font-serif">{solarTerm.yomi}</p>
            <p className="text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4">{solarTerm.desc}</p>
          </div>
          <div className="w-12 h-px bg-stone-200 dark:bg-stone-700 mx-auto"></div>
          <div className="space-y-3">
            <p className="text-xs text-stone-400 dark:text-stone-500 font-bold tracking-widest uppercase">七十二候</p>
            <h3 className="text-xl font-serif font-bold text-stone-700 dark:text-stone-200">{microSeason.name}</h3>
            <p className="text-xs text-stone-400 dark:text-stone-500 font-serif">{microSeason.yomi}</p>
            <p className="text-sm text-stone-600 dark:text-stone-300 font-serif leading-relaxed mt-4 px-4">{microSeason.desc}</p>
          </div>
          <p className="text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest pt-4">{currentDate.toLocaleDateString('ja-JP', { month: 'long', day: 'numeric' })}</p>
        </div>
        <div className="pt-12 pb-24 text-center flex items-center justify-between px-4 max-w-xs mx-auto">
          <button onClick={handlePrev} className="p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"><ChevronLeft size={24} /></button>
          <button onClick={onClose} className={btnStyle}>閉じる</button>
          <button onClick={handleNext} className="p-3 text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors active:scale-95"><ChevronRight size={24} /></button>
        </div>
      </div>
    );
  };

  const ConfirmDialog = ({ isVisible, title, message, actionLabel, onConfirm, onCancel }) => {
      if (!isVisible) return null;
      return <div className="fixed inset-0 z-[80] flex items-center justify-center p-6 bg-stone-900/40 dark:bg-black/60 backdrop-blur-sm animate-fade-in"><div className="bg-white dark:bg-stone-800 rounded-2xl p-8 max-w-xs w-full shadow-xl text-center"><h3 className="text-lg font-bold text-stone-800 dark:text-stone-200 mb-2 font-serif">{title}</h3><p className="text-sm text-stone-500 dark:text-stone-400 mb-8 leading-relaxed">{message}</p><div className="space-y-3"><button onClick={onConfirm} className="w-full py-3 bg-stone-900 dark:bg-stone-700 text-stone-50 rounded-lg font-bold text-sm hover:bg-stone-800 dark:hover:bg-stone-600 transition-colors">{actionLabel}</button><button onClick={onCancel} className="w-full py-3 bg-stone-100 dark:bg-stone-900 text-stone-600 dark:text-stone-400 rounded-lg font-bold text-sm hover:bg-stone-200 dark:hover:bg-stone-950 transition-colors">キャンセル</button></div></div></div>;
  };
  const FloatingWriteButton = ({ onClick }) => (<div className="fixed bottom-6 left-0 right-0 flex justify-center z-40 px-6 pointer-events-none"><button onClick={onClick} className="bg-stone-900 dark:bg-stone-700 text-stone-50 dark:text-stone-100 px-8 py-4 rounded-full shadow-2xl flex items-center gap-3 border border-stone-700 dark:border-stone-600 pointer-events-auto active:scale-95 transition-all duration-300 hover:bg-stone-800 dark:hover:bg-stone-600 animate-float-up"><PenLine size={20} strokeWidth={2.5} /><span className="text-sm font-bold tracking-widest">記す</span></button></div>);
  
  const InputView = ({ onSave, initialData = null, onDirtyChange }) => {
      const [text, setText] = useState(initialData ? initialData.text : '');
      const [source, setSource] = useState(initialData ? initialData.source : '');
      const [selectedCategory, setSelectedCategory] = useState(initialData ? initialData.category : CATEGORIES[0]);
      const textareaRef = useRef(null);
      useEffect(() => { if (initialData) { setText(initialData.text); setSource(initialData.source || ''); setSelectedCategory(initialData.category); } else { setText(''); setSource(''); setSelectedCategory(CATEGORIES[0]); } }, [initialData]);
      useEffect(() => { if (textareaRef.current) { textareaRef.current.style.height = 'auto'; textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`; } }, [text]);
      
      useEffect(() => {
        if (onDirtyChange) {
            const isDirty = initialData
                ? (text !== initialData.text || source !== (initialData.source || '') || selectedCategory !== initialData.category)
                : (text.trim().length > 0 || source.trim().length > 0);
            onDirtyChange(isDirty);
        }
      }, [text, source, selectedCategory, initialData, onDirtyChange]);

      const handleSave = () => { if (text.trim()) onSave(text, source, selectedCategory); };
      const isEditMode = !!initialData;
      return (
          <div className="flex flex-col h-full max-w-md mx-auto p-6 pt-8 pb-24 animate-fade-in overflow-y-auto no-scrollbar">
            <div className="flex-grow flex flex-col gap-6">
              <label className="text-stone-500 dark:text-stone-400 text-xs font-bold tracking-widest uppercase select-none cursor-default active:text-stone-800 dark:active:text-stone-200 transition-colors">{isEditMode ? '言葉を編集する' : '言葉を記す'}</label>
              <textarea ref={textareaRef} value={text} onChange={(e) => setText(e.target.value)} placeholder="心に残った言葉を入力..." className="w-full min-h-[8rem] bg-transparent text-lg leading-relaxed text-stone-800 dark:text-stone-200 placeholder:text-stone-300 dark:placeholder:text-stone-600 resize-none focus:outline-none font-serif overflow-hidden transition-colors" autoFocus={!isEditMode} />
              <input type="text" value={source} onChange={(e) => setSource(e.target.value)} placeholder="出典（任意）" className="w-full bg-transparent border-b border-stone-200 dark:border-stone-700 py-2 mb-4 focus:outline-none focus:border-stone-400 dark:focus:border-stone-500 text-sm font-serif text-stone-600 dark:text-stone-400 placeholder:text-stone-200 dark:placeholder:text-stone-700 transition-colors" />
              <div className="space-y-3">
                <div className="grid grid-cols-2 gap-2">
                  {CATEGORIES.map((cat) => (
                    <button key={cat} onClick={() => setSelectedCategory(cat)} className={`py-3 px-2 text-sm rounded transition-all duration-200 border ${selectedCategory === cat ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 border-stone-800 dark:border-stone-700 shadow-md' : 'bg-white dark:bg-stone-800 text-stone-600 dark:text-stone-400 border-stone-200 dark:border-stone-700 hover:border-stone-400 dark:hover:border-stone-500'}`}>{cat}</button>
                  ))}
                </div>
              </div>
            </div>
            <div className="pt-6 pb-4">
              <button onClick={handleSave} disabled={!text.trim()} className={`w-full py-4 rounded-lg font-bold tracking-widest transition-all duration-200 ${text.trim() ? 'bg-stone-800 dark:bg-stone-700 text-stone-50 dark:text-stone-100 shadow-lg hover:bg-stone-700 dark:hover:bg-stone-600 active:scale-[0.98]' : 'bg-stone-200 dark:bg-stone-800 text-stone-400 dark:text-stone-600 cursor-not-allowed'}`}>{isEditMode ? '更新する' : '保存する'}</button>
            </div>
          </div>
      );
  };
  
  const SeasonBadge = ({ onClick }) => {
    const { solarTerm, microSeason } = useMemo(() => getSeasonInfo(new Date()), []);
    return (
      <button onClick={onClick} className="flex items-center gap-1.5 text-sm font-bold text-stone-500 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200 transition-colors tracking-wide py-1 group">
        <CloudSun size={18} className="text-stone-400 dark:text-stone-500 group-hover:text-stone-600 dark:group-hover:text-stone-300 transition-colors" />
        <span className="border-b border-transparent group-hover:border-stone-300 dark:group-hover:border-stone-600 transition-all">{solarTerm.name} <span className="mx-1 text-stone-300 dark:text-stone-600">/</span> {microSeason.name}</span>
        <ChevronRight size={14} className="text-stone-300 dark:text-stone-600 group-hover:text-stone-500 dark:group-hover:text-stone-400 transition-colors" />
      </button>
    );
  };

  const ListView = ({ quotes, onItemClick, onStartRandom, filterCategory, onOpenFilter, onOpenSeason }) => {
    const displayQuotes = filterCategory ? quotes.filter(q => q.category === filterCategory) : quotes;
    return (
      <div className="h-full overflow-y-auto max-w-md mx-auto px-6 pt-4 pb-32 no-scrollbar">
        <div className="flex justify-between items-end mb-4 px-1 gap-2">
          <SeasonBadge onClick={onOpenSeason} />
          <button onClick={onOpenFilter} className="flex items-center gap-1.5 text-[10px] font-bold text-stone-400 hover:text-stone-600 dark:text-stone-500 dark:hover:text-stone-300 transition-colors tracking-wide bg-stone-100/80 dark:bg-stone-800/80 px-3 py-1.5 rounded-full border border-stone-200/50 dark:border-stone-700/50">
            <ListFilter size={12} /><span>{filterCategory || 'すべての言葉'}</span>
          </button>
        </div>
        {displayQuotes.length === 0 ? (
          <div className="flex flex-col items-center justify-center h-full text-stone-400 dark:text-stone-500 p-6 text-center italic font-serif">
            {quotes.length === 0 ? <><p>まだ言葉がありません。</p><p className="mt-2">下の「記す」から始めましょう。</p></> : <p>このカテゴリの言葉はありません。</p>}
          </div>
        ) : (
          <div className="space-y-6">
            <button onClick={onStartRandom} className="w-full flex items-center justify-between py-4 px-5 bg-stone-100 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded-2xl hover:bg-stone-200 transition-all group active:scale-[0.98]">
              <div className="flex items-center gap-3"><div className="bg-white dark:bg-stone-700 p-2.5 rounded-xl text-stone-800 dark:text-stone-200 group-hover:rotate-12 transition-transform"><Sparkles size={20} /></div><div className="text-left"><p className="text-sm font-bold text-stone-800 dark:text-stone-200 tracking-wider">言葉との再会</p><p className="text-[10px] text-stone-400 dark:text-stone-500 font-serif">いつかの言葉に、また出会う</p></div></div>
              <ChevronRight className="text-stone-300 dark:text-stone-600" size={18} />
            </button>
            {displayQuotes.map((quote) => (
              <div key={quote.id} onClick={() => onItemClick(quote.id)} className="group bg-white dark:bg-stone-850 p-6 rounded-2xl border border-stone-100 dark:border-stone-800 hover:border-stone-300 transition-all cursor-pointer active:bg-stone-50 shadow-sm text-left">
                <p className="text-base leading-relaxed text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-1 font-serif line-clamp-3">{quote.text}</p>
                {quote.source && <p className="text-[10px] text-stone-400 dark:text-stone-500 font-serif mb-3">— {quote.source}</p>}
                <div className="flex justify-between items-end border-t border-stone-50 dark:border-stone-800 pt-3"><span className="text-xs text-stone-500 dark:text-stone-400 bg-stone-100 dark:bg-stone-800 px-2 py-1 rounded-lg font-medium">{quote.category}</span><span className="text-[10px] text-stone-400 dark:text-stone-600 font-mono">{new Date(quote.timestamp).toLocaleDateString('ja-JP')}</span></div>
              </div>
            ))}
          </div>
        )}
      </div>
    );
  };

  const SingleQuoteView = ({ quote, onNext, onPrev, hasNext, hasPrev, nextIcon: NextIcon, onClose, isRandomMode = false }) => {
    const btnStyle = "text-xs font-bold text-stone-400 dark:text-stone-600 hover:text-stone-600 dark:hover:text-stone-300 transition-colors tracking-widest px-4 py-2";
    return (
      <div className="flex flex-col h-full max-w-md mx-auto p-8 pb-8 relative animate-fade-in bg-stone-50 dark:bg-stone-900 overflow-y-auto no-scrollbar transition-colors duration-300">
        <div className="flex-grow flex flex-col items-center pt-5 text-center">
          <span className="inline-block px-3 py-1 rounded-full border border-stone-200 dark:border-stone-700 text-xs text-stone-500 dark:text-stone-400 tracking-wide mb-8">{quote.category}</span>
          <div className="px-2">
            <p className="text-xl md:text-2xl font-serif text-stone-800 dark:text-stone-200 whitespace-pre-wrap mb-4 select-text leading-relaxed" style={{ lineHeight: '1.8' }}>{quote.text}</p>
            {quote.source && <p className="text-sm text-stone-500 dark:text-stone-400 font-serif mb-8">— {quote.source}</p>}
            <div className="mt-8 flex justify-center text-stone-300 dark:text-stone-700"><div className="h-px w-12 bg-stone-300 dark:bg-stone-700"></div></div>
            <p className="mt-4 text-xs text-stone-400 dark:text-stone-600 font-mono tracking-widest">{new Date(quote.timestamp).toLocaleDateString('ja-JP')}</p>
          </div>
        </div>
        <div className="pt-12 pb-24 text-center">
          {isRandomMode ? (
            <div className="flex flex-col items-center gap-8 max-w-xs mx-auto">
              <button onClick={onNext} className="group flex flex-col items-center gap-3 text-stone-400 dark:text-stone-500 hover:text-stone-800 dark:hover:text-stone-200 transition-colors active:scale-95">
                <div className="p-4 rounded-full bg-stone-100 dark:bg-stone-800 group-hover:bg-stone-200 dark:group-hover:bg-stone-700 transition-colors"><NextIcon size={24} strokeWidth={1.5} /></div>
              </button>
              <button onClick={onClose} className={btnStyle}>閉じる</button>
            </div>
          ) : (
            <div className="flex items-center justify-between px-4 max-w-xs mx-auto">
              <button onClick={onPrev} disabled={!hasPrev} className="p-3 text-stone-400 dark:text-stone-600 enabled:hover:text-stone-600 dark:enabled:hover:text-stone-300 transition-colors disabled:opacity-0 active:scale-95"><ChevronLeft size={24} /></button>
              <button onClick={onClose} className={btnStyle}>一覧へ</button>
              <button onClick={onNext} disabled={!hasNext} className="p-3 text-stone-400 dark:text-stone-500 enabled:hover:text-stone-800 dark:enabled:hover:text-stone-200 transition-colors disabled:opacity-0 active:scale-95"><NextIcon size={24} /></button>
            </div>
          )}
        </div>
      </div>
    );
  };

  const App = () => {
    const [user, setUser] = useState(null);
    const [shortCode, setShortCode] = useState('');
    const [isLoadingCode, setIsLoadingCode] = useState(false);
    const [codeError, setCodeError] = useState(null);
    const [syncUserId, setSyncUserId] = useState(null);
    const [viewMode, setViewMode] = useState('list');
    const [selectedQuoteId, setSelectedQuoteId] = useState(null);
    const [randomHistory, setRandomHistory] = useState([]);
    const [quotes, setQuotes] = useState([]);
    const [toast, setToast] = useState({ show: false, message: '' });
    const [dialogState, setDialogState] = useState({ isVisible: false, type: null, id: null });
    const [isDarkMode, setIsDarkMode] = useState(false);
    const [filterCategory, setFilterCategory] = useState(null);
    const [isFilterVisible, setIsFilterVisible] = useState(false);
    const [isInputDirty, setIsInputDirty] = useState(false);
    const [isMenuVisible, setIsMenuVisible] = useState(false);
    const [isInitialLoading, setIsInitialLoading] = useState(true);
    const authInitiatedRef = useRef(false);

    useEffect(() => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') { setIsDarkMode(true); document.documentElement.classList.add('dark'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09'); }
      else { setIsDarkMode(false); document.documentElement.classList.remove('dark'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9'); }
    }, []);

    const toggleTheme = () => {
      const next = !isDarkMode; setIsDarkMode(next);
      if (next) { document.documentElement.classList.add('dark'); localStorage.setItem('theme', 'dark'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0c0a09'); }
      else { document.documentElement.classList.remove('dark'); localStorage.setItem('theme', 'light'); document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fafaf9'); }
    };

    const fetchUserData = async (currentUser) => {
      if (!currentUser) return;
      setIsLoadingCode(true); setCodeError(null);
      try {
        const userCodeRef = doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', currentUser.uid);
        const codeSnap = await getDoc(userCodeRef);
        if (codeSnap.exists()) { setShortCode(codeSnap.data().code); } 
        else { const newCode = generateShortCode(); await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', newCode), { uid: currentUser.uid }); await setDoc(userCodeRef, { code: newCode }); setShortCode(newCode); }
      } catch (e) { console.error(e); setCodeError("接続エラー"); } finally { setIsLoadingCode(false); }
    };

    // 認証の監視: 以前のバージョンとの整合性も考慮し、
    // ここでは initAuthPromise の完了を待つ (グローバルで永続化設定済み)
    useEffect(() => {
      if (authInitiatedRef.current) return;
      authInitiatedRef.current = true;
      
      let unsubscribe = null;
      
      const setupAuth = async () => {
          unsubscribe = onAuthStateChanged(auth, (u) => {
            if (u) { 
              // 既存ユーザーがいればそれを使う (v9系なので永続化情報は localStorage にあるはず)
              setUser(u); 
              fetchUserData(u); 
            } else { 
              // ユーザーがいない場合のみ新規作成
              // 【重要】永続化設定(setPersistence)はスクリプト読み込み直後に走っているため、
              // ここで user が null なら本当にいないと判断して良い
              signInAnonymously(auth).catch(e => setCodeError("認証エラー")); 
            }
          });
      };
      
      setupAuth();
    }, []);

    const activeUserId = syncUserId || (user ? user.uid : null);
    useEffect(() => {
      if (!activeUserId) { 
        if (!user && !isInitialLoading === false) setIsInitialLoading(false); 
        return; 
      }
      const q = query(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'));
      return onSnapshot(q, (snap) => {
        setQuotes(snap.docs.map(d => ({ id: d.id, ...d.data() })).sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0)));
        setIsInitialLoading(false);
      }, () => setIsInitialLoading(false));
    }, [activeUserId]);

    const showToast = (message) => setToast({ show: true, message });
    const handleSyncByCode = async (code) => { if (!user) return; try { const snap = await getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', code.trim().toUpperCase())); if (snap.exists()) { setSyncUserId(snap.data().uid); setViewMode('list'); showToast("同期を開始しました"); } else showToast("コードが見つかりません"); } catch (e) { showToast("同期エラー"); } };
    const addQuote = async (text, source, category) => { if (!activeUserId) return; await addDoc(collection(db, 'artifacts', appId, 'users', activeUserId, 'quotes'), { text, source, category, timestamp: Date.now() }); setIsInputDirty(false); setViewMode('list'); showToast("言葉を保存しました"); };
    const updateQuote = async (text, source, category) => { if (!activeUserId || !selectedQuoteId) return; await updateDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', selectedQuoteId), { text, source, category }); setIsInputDirty(false); setViewMode(randomHistory.length > 0 ? 'random' : 'detail'); showToast("言葉を更新しました"); };
    const handleConfirmAction = async () => { if (dialogState.type === 'quote') await confirmDeleteQuote(); else if (dialogState.type === 'account') await confirmResetAccount(); else if (dialogState.type === 'discard') { setIsInputDirty(false); setDialogState({ isVisible: false, type: null, id: null }); setViewMode(randomHistory.length > 0 && viewMode === 'edit' ? 'random' : selectedQuoteId && viewMode === 'edit' ? 'detail' : 'list'); } };
    const confirmDeleteQuote = async () => { if (!activeUserId || !dialogState.id) return; await deleteDoc(doc(db, 'artifacts', appId, 'users', activeUserId, 'quotes', dialogState.id)); setDialogState({ isVisible: false, type: null, id: null }); setViewMode('list'); setSelectedQuoteId(null); showToast("削除しました"); };
    const confirmResetAccount = async () => { if (!user || !shortCode) return; try { const snap = await getDocs(collection(db, 'artifacts', appId, 'users', user.uid, 'quotes')); await Promise.all(snap.docs.map(d => deleteDoc(d.ref))); await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'syncCodes', shortCode)); await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'userCodes', user.uid)); showToast("初期化しました。リロードします..."); setTimeout(() => window.location.reload(), 1500); } catch (e) { showToast("初期化失敗"); setDialogState({ isVisible: false, type: null, id: null }); } };

    const handleTitleClick = (e) => {
      if (e.detail === 3) {
        const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([document.documentElement.outerHTML], { type: 'text/html' })); a.download = 'index.html'; document.body.appendChild(a); a.click(); document.body.removeChild(a); showToast("HTMLファイルをダウンロードしました");
      }
    };

    const currentQuote = quotes.find(q => q.id === selectedQuoteId);
    let leftActions = null, rightActions = null;
    switch (viewMode) {
      case 'list': leftActions = <button onClick={toggleTheme} className="p-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors">{isDarkMode ? <Sun size={24} /> : <Moon size={24} />}</button>; rightActions = <button onClick={() => setViewMode('settings')} className="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><Menu size={24} /></button>; break;
      case 'input': case 'settings': case 'edit': rightActions = <button onClick={() => isInputDirty ? setDialogState({ isVisible: true, type: 'discard', id: null }) : setViewMode('list')} className="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><X size={24} /></button>; break;
      case 'detail': case 'random': leftActions = <button onClick={() => { setViewMode('list'); setRandomHistory([]); setSelectedQuoteId(null); }} className="p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><ArrowLeft size={24} /></button>; rightActions = <button onClick={() => setIsMenuVisible(true)} className="p-2 -mr-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><MoreHorizontal size={24} /></button>; break;
      case 'season-detail': leftActions = <button onClick={() => setViewMode('list')} className="p-2 -ml-2 text-stone-400 hover:text-stone-800 dark:hover:text-stone-200 transition-colors"><ArrowLeft size={24} /></button>; break;
    }

    if (!user || isInitialLoading) return <div className="h-screen flex items-center justify-center font-serif text-stone-400 dark:text-stone-500 italic bg-stone-50 dark:bg-stone-900">読み込み中...</div>;

    return (
      <div className="h-[100dvh] bg-stone-50 dark:bg-stone-900 text-stone-800 dark:text-stone-200 font-sans selection:bg-stone-200 dark:selection:bg-stone-700 overflow-hidden flex flex-col transition-colors duration-300">
        <Header onTitleClick={handleTitleClick} leftActions={leftActions} rightActions={rightActions} />
        <div className="flex-grow overflow-hidden relative pt-16">
          <main className="h-full relative overflow-hidden">
            {viewMode === 'input' && <InputView onSave={addQuote} onDirtyChange={setIsInputDirty} />}
            {viewMode === 'list' && <ListView quotes={quotes} onItemClick={(id) => { setSelectedQuoteId(id); setViewMode('detail'); }} onStartRandom={() => { if (quotes.length > 0) { const f = quotes[Math.floor(Math.random() * quotes.length)]; setSelectedQuoteId(f.id); setRandomHistory([f.id]); setViewMode('random'); } }} filterCategory={filterCategory} onOpenFilter={() => setIsFilterVisible(true)} onOpenSeason={() => setViewMode('season-detail')} />}
            {viewMode === 'detail' && currentQuote && <SingleQuoteView quote={currentQuote} onNext={() => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) + 1) % quotes.length].id)} onPrev={() => setSelectedQuoteId(quotes[(quotes.findIndex(q => q.id === selectedQuoteId) - 1 + quotes.length) % quotes.length].id)} hasNext={quotes.length > 1} hasPrev={quotes.length > 1} nextIcon={ChevronRight} onClose={() => setViewMode('list')} />}
            {viewMode === 'random' && currentQuote && <SingleQuoteView quote={currentQuote} onNext={() => { let n; do { n = quotes[Math.floor(Math.random() * quotes.length)].id; } while (n === selectedQuoteId && quotes.length > 1); setSelectedQuoteId(n); }} nextIcon={Sparkles} onClose={() => setViewMode('list')} isRandomMode={true} />}
            {viewMode === 'edit' && currentQuote && <InputView initialData={currentQuote} onSave={updateQuote} onDirtyChange={setIsInputDirty} />}
            {viewMode === 'settings' && <SyncSettingsView currentShortCode={shortCode} isLoadingCode={isLoadingCode} errorMsg={codeError} onRetryCode={() => fetchUserData(user)} onSyncCode={handleSyncByCode} onRequestReset={() => setDialogState({ isVisible: true, type: 'account', id: null })} showToast={showToast} />}
            {viewMode === 'season-detail' && <SeasonDetailView onClose={() => setViewMode('list')} />}
          </main>
        </div>
        <FilterSheet isVisible={isFilterVisible} currentCategory={filterCategory} onSelect={(cat) => { setFilterCategory(cat); setIsFilterVisible(false); }} onClose={() => setIsFilterVisible(false)} />
        <MenuSheet isVisible={isMenuVisible} onEdit={() => setViewMode('edit')} onDelete={() => setDialogState({ isVisible: true, type: 'quote', id: selectedQuoteId })} onClose={() => setIsMenuVisible(false)} />
        {viewMode === 'list' && <FloatingWriteButton onClick={() => setViewMode('input')} />}
        <ConfirmDialog isVisible={dialogState.isVisible} title={dialogState.type === 'account' ? "全データを削除しますか？" : dialogState.type === 'discard' ? "編集内容を破棄しますか？" : "言葉を削除しますか？"} message={dialogState.type === 'account' ? "すべての言葉、設定が消去されます。この操作は戻せません。" : dialogState.type === 'discard' ? "保存されていない変更は失われます。" : "一度削除すると元に戻せません。"} actionLabel={dialogState.type === 'account' ? "全削除して初期化" : dialogState.type === 'discard' ? "破棄して戻る" : "削除する"} onConfirm={handleConfirmAction} onCancel={() => setDialogState({ isVisible: false, type: null, id: null })} />
        <Toast message={toast.message} isVisible={toast.show} onHide={() => setToast(p => ({ ...p, show: false }))} />
      </div>
    );
  };
  createRoot(document.getElementById('root')).render(<App />);
</script>

</body></html>